# Sync repo to https://gitee.com/
#
# https://github.com/marketplace/actions/gitee-pages-action
# é…ç½®æ­¥éª¤å¦‚ä¸‹
# 1. åœ¨å‘½ä»¤è¡Œç»ˆç«¯æˆ– Git Bash ä½¿ç”¨å‘½ä»¤ ssh-keygen -t rsa -C "youremail@example.com" ç”Ÿæˆ SSH Keyï¼Œæ³¨æ„æ›¿æ¢ä¸ºè‡ªå·±çš„é‚®ç®±ã€‚ç”Ÿæˆçš„ id_rsa æ˜¯ç§é’¥ï¼Œid_rsa.pub æ˜¯å…¬é’¥ã€‚(âš ï¸æ³¨æ„æ­¤å¤„ä¸è¦è®¾ç½®å¯†ç )
# 2. åœ¨ GitHub é¡¹ç›®çš„ã€Œâ€‹Settings -> Secretsã€è·¯å¾„ä¸‹é…ç½®å¥½å‘½åä¸º GITEE_RSA_PRIVATE_KEY å’Œ GITEE_PASSWORD çš„ä¸¤ä¸ªå¯†é’¥ã€‚å…¶ä¸­ï¼šGITEE_RSA_PRIVATE_KEY å­˜æ”¾ id_rsa ç§é’¥ï¼›GITEE_PASSWORD å­˜æ”¾ Gitee å¸å·çš„å¯†ç ã€‚
# 3. åœ¨ GitHub çš„ä¸ªäººè®¾ç½®é¡µé¢ã€ŒSettings -> SSH and GPG keysã€â€‹ é…ç½® SSH å…¬é’¥ï¼ˆå³ï¼šid_rsa.pubï¼‰ï¼Œå‘½åéšæ„ã€‚æˆ–è€…åœ¨ä»“åº“è®¾ç½®é¡µé¢æ·»åŠ ä¸€ä¸ªéƒ¨ç½²å…¬é’¥ã€‚
# 4. åœ¨ Gitee çš„ä¸ªäººè®¾ç½®é¡µé¢ã€Œå®‰å…¨è®¾ç½® -> SSH å…¬é’¥ã€â€‹ é…ç½® SSH å…¬é’¥ï¼ˆå³ï¼šid_rsa.pubï¼‰ï¼Œå‘½åéšæ„ã€‚

name: ğŸ”ã€€Sync to Gitee
on: [push]
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”ã€€Sync to Gitee
        uses: wearerequired/git-mirror-action@master
        env:
          # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_RSA_PRIVATE_KEY
          SSH_PRIVATE_KEY: ${{ secrets.GITEE_RSA_PRIVATE_KEY }}
        with:
          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€
          source-repo: 'git@github.com:antvis/X6.git'
          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€
          destination-repo: 'git@gitee.com:antv-x6/antv-x6.git'
      - name: ğŸ“¦ã€€Build Gitee Pages
        uses: yanglbme/gitee-pages-action@master
        with:
          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å
          gitee-username: afc163
          # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_PASSWORD
          gitee-password: ${{ secrets.GITEE_PASSWORD }}
          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“
          gitee-repo: antv-x6/antv-x6
          # è¦éƒ¨ç½²çš„åˆ†æ”¯
          branch: gh-pages
