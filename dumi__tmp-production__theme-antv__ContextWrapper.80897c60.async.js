"use strict";(self.webpackChunk_antv_x6_sites=self.webpackChunk_antv_x6_sites||[]).push([[2643],{31755:function(n,e,t){t.r(e),t.d(e,{default:function(){return i}});t(29186);var r=t(98130),o=t(87264),a=t(81715);function i(){var n=(0,r.useOutlet)();return(0,a.jsx)(o.w.Provider,{value:{meta:{exampleTopics:[{id:"showcase",title:{zh:"场景案例",en:"Case"},icon:"case",examples:[{demos:[{id:"agentFlow",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*sXYvQZDhuF0AAAAAUOAAAAgAemJ7AQ/original",source:"import { type Edge, Graph, type Node, Snapline, Stencil } from '@antv/x6'\nimport { register } from '@antv/x6-react-shape'\nimport insertCss from 'insert-css'\nimport React from 'react'\n\n// 为了协助代码演示\npreWork()\n\nconst CARD_WIDTH = 260\nconst CARD_HEIGHT = 96\nconst PORT_DOT_RADIUS = 3\nconst COLOR_PORT_GRAY = '#C2C8D5'\nconst COLOR_PORT_BLUE = '#5F95FF'\n\nconst graph = new Graph({\n  container: document.getElementById('graph-container') as HTMLElement,\n  grid: true,\n  mousewheel: {\n    enabled: true,\n    minScale: 0.5,\n    maxScale: 3,\n  },\n  connecting: {\n    connector: { name: 'smooth' },\n    connectionPoint: 'anchor',\n    allowBlank: false,\n    snap: { radius: 20 },\n    allowEdge: false,\n    allowLoop: false,\n    highlight: true,\n    createEdge(): Edge {\n      return graph.createEdge({ shape: 'agent-edge' })\n    },\n    validateConnection({\n      targetMagnet,\n    }: {\n      targetMagnet?: Element | null\n    }): boolean {\n      return !!targetMagnet\n    },\n  },\n  highlighting: {\n    magnetAdsorbed: {\n      name: 'stroke',\n      args: {\n        attrs: {\n          fill: COLOR_PORT_BLUE,\n          stroke: COLOR_PORT_BLUE,\n        },\n      },\n    },\n  },\n})\n\ngraph.use(new Snapline())\n\nGraph.registerEdge(\n  'agent-edge',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: { stroke: COLOR_PORT_BLUE, strokeWidth: 2, targetMarker: 'block' },\n    },\n  },\n  true,\n)\n\nconst stencil = new Stencil({\n  title: '智能体流程编排',\n  target: graph,\n  stencilGraphWidth: 240,\n  stencilGraphHeight: 480,\n  stencilGraphOptions: { panning: true },\n  collapsable: true,\n  groups: [\n    {\n      title: '业务逻辑',\n      name: 'biz',\n      graphHeight: 380,\n      layoutOptions: { rowHeight: 88 },\n    },\n    {\n      title: '知识库&数据',\n      name: 'data',\n      graphHeight: 300,\n      layoutOptions: { rowHeight: 88 },\n    },\n  ],\n  layoutOptions: { columns: 1, columnWidth: 230, rowHeight: 88, dx: 8 },\n})\ndocument\n  .getElementById('stencil')\n  ?.appendChild(stencil.container as HTMLElement)\n\nconst basePortAttrs = {\n  r: PORT_DOT_RADIUS,\n  magnet: true,\n  stroke: COLOR_PORT_GRAY,\n  strokeWidth: 1,\n  fill: COLOR_PORT_GRAY,\n  style: { visibility: 'hidden' },\n}\nconst createPortGroup = (position: 'top' | 'right' | 'bottom' | 'left') => ({\n  position,\n  attrs: { circle: { ...basePortAttrs } },\n})\nconst ports = {\n  groups: {\n    top: createPortGroup('top'),\n    right: createPortGroup('right'),\n    bottom: createPortGroup('bottom'),\n    left: createPortGroup('left'),\n  },\n  items: [\n    { id: 'top', group: 'top' },\n    { id: 'right', group: 'right' },\n    { id: 'bottom', group: 'bottom' },\n    { id: 'left', group: 'left' },\n  ],\n}\n\nconst isPortConnected = (node: Node, portId: string): boolean => {\n  const edges = graph.getConnectedEdges(node)\n  return edges.some(\n    (e) =>\n      (e.getSourceCellId() === node.id && e.getSourcePortId() === portId) ||\n      (e.getTargetCellId() === node.id && e.getTargetPortId() === portId),\n  )\n}\nconst setPortVisible = (node: Node, portId: string, visible: boolean) => {\n  node.setPortProp(\n    portId,\n    'attrs/circle/style/visibility',\n    visible ? 'visible' : 'hidden',\n  )\n}\nconst setPortColor = (node: Node, portId: string, color: string) => {\n  node.setPortProp(portId, 'attrs/circle/fill', color)\n  node.setPortProp(portId, 'attrs/circle/stroke', color)\n}\nconst setPortDot = (\n  node: Node,\n  portId: string,\n  visible: boolean,\n  color?: string,\n) => {\n  setPortVisible(node, portId, visible)\n  if (color) setPortColor(node, portId, color)\n}\nconst withNodePort = (\n  cellId?: string | null,\n  portId?: string | null,\n  fn?: (node: Node, portId: string) => void,\n) => {\n  if (!cellId || !portId || !fn) return\n  const cell = graph.getCellById(cellId)\n  if (cell && cell.isNode()) fn(cell as Node, portId)\n}\nconst showNodePorts = (node: Node, show: boolean) => {\n  const ps = node.getPorts()\n  for (let i = 0; i < ps.length; i += 1) {\n    const id = ps[i].id as string\n    if (show) {\n      setPortVisible(node, id, true)\n    } else {\n      const connected = isPortConnected(node, id)\n      setPortVisible(node, id, connected)\n      setPortColor(node, id, connected ? COLOR_PORT_BLUE : COLOR_PORT_GRAY)\n    }\n  }\n}\ngraph.on('node:mouseenter', ({ node }: { node: Node }) => {\n  showNodePorts(node, true)\n})\ngraph.on('node:mouseleave', ({ node }: { node: Node }) => {\n  showNodePorts(node, false)\n})\ngraph.on('edge:mouseenter', ({ edge }: { edge: Edge }) => {\n  edge.addTools({ name: 'button-remove', args: { distance: -40 } })\n})\ngraph.on('edge:mouseleave', ({ edge }: { edge: Edge }) => {\n  edge.removeTools()\n})\n\ngraph.on(\n  'edge:connected',\n  ({\n    currentCell,\n    currentPort,\n  }: {\n    currentCell: Node\n    currentPort?: string\n  }) => {\n    if (!currentPort) return\n    setPortDot(currentCell, currentPort, true, COLOR_PORT_BLUE)\n  },\n)\n\ngraph.on('edge:added', ({ edge }: { edge: Edge }) => {\n  withNodePort(edge.getSourceCellId(), edge.getSourcePortId(), (node, port) =>\n    setPortDot(node, port, true, COLOR_PORT_BLUE),\n  )\n  withNodePort(edge.getTargetCellId(), edge.getTargetPortId(), (node, port) =>\n    setPortDot(node, port, true, COLOR_PORT_BLUE),\n  )\n})\n\ngraph.on('edge:removed', ({ edge }: { edge: Edge }) => {\n  withNodePort(edge.getSourceCellId(), edge.getSourcePortId(), (node, port) => {\n    const stillConnected = isPortConnected(node, port)\n    if (!stillConnected) setPortDot(node, port, false, COLOR_PORT_GRAY)\n  })\n  withNodePort(edge.getTargetCellId(), edge.getTargetPortId(), (node, port) => {\n    const stillConnected = isPortConnected(node, port)\n    if (!stillConnected) setPortDot(node, port, false, COLOR_PORT_GRAY)\n  })\n})\n\ntype AgentCardConfig = {\n  key: string\n  iconText: string\n  title: string\n  desc: string\n  theme?: 'blue' | 'green' | 'orange' | 'red'\n  inputPlaceholder?: string\n}\n\nconst AgentReactCard = ({ node }: { node: Node }) => {\n  const raw = node.getData() as AgentCardConfig | null | undefined\n  const data: AgentCardConfig = {\n    key: raw?.key ?? 'unknown',\n    iconText: raw?.iconText ?? '',\n    title: raw?.title ?? '',\n    desc: raw?.desc ?? '',\n    theme: raw?.theme ?? 'blue',\n    inputPlaceholder: raw?.inputPlaceholder,\n  }\n  const theme = data.theme ?? 'blue'\n  return React.createElement('div', { className: `agent-card ${theme}` }, [\n    React.createElement('div', { className: 'header', key: 'header' }, [\n      React.createElement(\n        'div',\n        { className: 'icon', key: 'icon' },\n        data.iconText,\n      ),\n      React.createElement(\n        'div',\n        { className: 'title', key: 'title' },\n        data.title,\n      ),\n      React.createElement('div', { className: 'actions', key: 'actions' }, [\n        React.createElement(\n          'span',\n          {\n            className: 'op',\n            key: 'delete',\n            onClick: (e: React.MouseEvent) => {\n              e.stopPropagation()\n              const cfg = (node.getData() as AgentCardConfig | null) || null\n              const k = cfg?.key\n              if (k === 'start' || k === 'end') return\n              node.remove()\n            },\n            title: '删除节点',\n          },\n          '✖️',\n        ),\n      ]),\n    ]),\n\n    data.inputPlaceholder\n      ? React.createElement('div', { className: 'body', key: 'body' }, [\n          React.createElement(\n            'span',\n            { className: 'section', key: 'sec' },\n            '节点内容',\n          ),\n          React.createElement('input', {\n            type: 'text',\n            placeholder: data.inputPlaceholder,\n          }),\n        ])\n      : React.createElement(\n          'div',\n          { className: 'desc', key: 'desc' },\n          data.desc,\n        ),\n  ])\n}\n\nregister({\n  shape: 'agent-react-card',\n  width: CARD_WIDTH,\n  height: CARD_HEIGHT,\n  effect: ['data'],\n  component: AgentReactCard,\n})\n\nconst createAgentCard = (cfg: AgentCardConfig) =>\n  graph.createNode({\n    shape: 'agent-react-card',\n    width: CARD_WIDTH,\n    height: CARD_HEIGHT,\n    data: cfg,\n    ports,\n  })\n\ntype FlowData = {\n  title: string\n  badge?: string\n}\n\nconst FlowCard = ({ node }: { node: Node }) => {\n  const data = node.getData() as FlowData\n  const shape = node.shape\n  const type = shape === 'agent-end-card' ? 'end' : 'start'\n  return React.createElement('div', { className: `flow-card ${type}` }, [\n    React.createElement('div', { className: 'header', key: 'h' }, [\n      React.createElement(\n        'div',\n        { className: 'icon', key: 'i' },\n        type === 'end' ? 'E' : 'S',\n      ),\n      React.createElement('div', { className: 'title', key: 't' }, data.title),\n      data.badge\n        ? React.createElement(\n            'div',\n            { className: 'badge', key: 'b' },\n            data.badge,\n          )\n        : null,\n    ]),\n    type === 'start'\n      ? React.createElement('div', { className: 'body', key: 'body' }, [\n          React.createElement(\n            'span',\n            { className: 'section', key: 's' },\n            'Agent 开始节点',\n          ),\n        ])\n      : React.createElement('div', { className: 'footer', key: 'f' }, [\n          React.createElement(\n            'span',\n            { className: 'section', key: 's2' },\n            'Agent 结束节点',\n          ),\n        ]),\n  ])\n}\n\nconst registerFlowShape = (shape: string) => {\n  register({\n    shape,\n    width: CARD_WIDTH,\n    height: CARD_HEIGHT,\n    effect: ['data'],\n    component: FlowCard,\n  })\n}\n\nregisterFlowShape('agent-start-card')\nregisterFlowShape('agent-end-card')\n\nconst createFlowCard = (kind: 'start' | 'end', data: FlowData) =>\n  graph.createNode({\n    shape: kind === 'start' ? 'agent-start-card' : 'agent-end-card',\n    width: CARD_WIDTH,\n    height: CARD_HEIGHT,\n    data,\n    ports,\n  })\n\nconst createStartCard = () =>\n  createFlowCard('start', {\n    title: '开始',\n    badge: '触发器',\n  })\n\nconst createEndCard = () =>\n  createFlowCard('end', {\n    title: '结束',\n    badge: '输出器',\n  })\n\nGraph.registerNode(\n  'agent-stencil-card',\n  {\n    inherit: 'rect',\n    width: 220,\n    height: 66,\n    markup: [\n      { tagName: 'rect', selector: 'body' },\n      { tagName: 'rect', selector: 'iconRect' },\n      { tagName: 'text', selector: 'iconLabel' },\n      { tagName: 'text', selector: 'title' },\n      { tagName: 'text', selector: 'desc' },\n    ],\n    attrs: {\n      body: { stroke: '#5F95FF', strokeWidth: 1, fill: '#fff', rx: 8, ry: 8 },\n      iconRect: {\n        width: 32,\n        height: 32,\n        rx: 8,\n        ry: 8,\n        refX: 12,\n        refY: 20,\n        fill: '#F0F5FF',\n      },\n      iconLabel: {\n        refX: 28,\n        refY: 36,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontSize: 12,\n        fontWeight: 600,\n        fill: '#1D39C4',\n      },\n      title: {\n        refX: 60,\n        refY: 26,\n        textAnchor: 'start',\n        textVerticalAnchor: 'middle',\n        fontSize: 14,\n        fontWeight: 600,\n        fill: '#141414',\n        textWrap: { width: 170, height: 20, ellipsis: '…' },\n      },\n      desc: {\n        refX: 60,\n        refY: 46,\n        textAnchor: 'start',\n        textVerticalAnchor: 'middle',\n        fontSize: 12,\n        fill: 'rgba(0,0,0,0.65)',\n        textWrap: { width: 170, height: 32, ellipsis: '…' },\n      },\n    },\n    ports,\n  },\n  true,\n)\n\nconst createAgentStencilCard = (cfg: AgentCardConfig) => {\n  const themeMap = {\n    blue: { rectFill: '#F0F5FF', textFill: '#1D39C4' },\n    green: { rectFill: '#E6FFFB', textFill: '#08979C' },\n    orange: { rectFill: '#FFF7E6', textFill: '#FA8C16' },\n    red: { rectFill: '#FFF1F0', textFill: '#CF1322' },\n  } as const\n  const theme = cfg.theme ?? 'blue'\n  const colors = themeMap[theme]\n  return graph.createNode({\n    shape: 'agent-stencil-card',\n    attrs: {\n      iconRect: { fill: colors.rectFill },\n      iconLabel: { text: cfg.iconText, fill: colors.textFill },\n      title: { text: cfg.title },\n      desc: { text: cfg.desc },\n    },\n    data: { type: cfg.key },\n    ports,\n  })\n}\n\nlet AGENT_CONFIGS: Record<string, AgentCardConfig> | null = null\n\nconst getAgentConfig = (type: string): AgentCardConfig | null => {\n  return AGENT_CONFIGS ? (AGENT_CONFIGS[type] ?? null) : null\n}\n\ngraph.on('node:added', ({ node }: { node: Node }) => {\n  const data = node.getData() as { type?: string } | undefined\n  const type = data?.type\n  if (type && node.shape !== 'agent-react-card') {\n    const cfg = getAgentConfig(type)\n    if (cfg) {\n      const { x, y } = node.position()\n      const newNode = createAgentCard(cfg).position(x, y)\n      node.remove()\n      graph.addNode(newNode)\n    }\n  }\n})\n;(async () => {\n  AGENT_CONFIGS = await fetch('/data/agent-flow.json').then((res) => res.json())\n\n  stencil.load(\n    [\n      createAgentStencilCard(getAgentConfig('llm')!),\n      createAgentStencilCard(getAgentConfig('code')!),\n      createAgentStencilCard(getAgentConfig('branch')!),\n      createAgentStencilCard(getAgentConfig('loop')!),\n    ],\n    'biz',\n  )\n\n  stencil.load(\n    [\n      createAgentStencilCard(getAgentConfig('kb')!),\n      createAgentStencilCard(getAgentConfig('mcp')!),\n      createAgentStencilCard(getAgentConfig('db')!),\n    ],\n    'data',\n  )\n\n  const start = graph.addNode(createStartCard().position(60, 60))\n\n  const llm = graph.addNode(\n    createAgentCard(getAgentConfig('llm')!).position(220, 220),\n  )\n\n  const end = graph.addNode(createEndCard().position(360, 380))\n\n  graph.addEdge({\n    shape: 'agent-edge',\n    source: { cell: start.id, port: 'bottom' },\n    target: { cell: llm.id, port: 'top' },\n  })\n  graph.addEdge({\n    shape: 'agent-edge',\n    source: { cell: llm.id, port: 'bottom' },\n    target: { cell: end.id, port: 'top' },\n  })\n})().catch((err) => {\n  console.error(err)\n})\n\nfunction preWork() {\n  const container = document.getElementById('container') as HTMLElement\n  if (!container) {\n    return\n  }\n  const stencilContainer = document.createElement('div')\n  stencilContainer.id = 'stencil'\n  const graphContainer = document.createElement('div')\n  graphContainer.id = 'graph-container'\n  container.appendChild(stencilContainer)\n  container.appendChild(graphContainer)\n\n  insertCss(`\n    #container {\n      display: flex;\n      border: 1px solid #dfe3e8;\n      height: 480px;\n    }\n    #stencil {\n      width: 260px;\n      height: 100%;\n      position: relative;\n      border-right: 1px solid #dfe3e8;\n      background: #fff;\n    }\n    #graph-container {\n      width: calc(100% - 260px);\n      height: 100%;\n      background: #fff;\n    }\n    .x6-widget-stencil  { background-color: #fff; }\n    .x6-widget-stencil-title { background-color: #fff; }\n    .x6-widget-stencil-group-title { background-color: #fff !important; }\n\n    /* agent card */\n    .agent-card {\n      display: flex;\n      flex-direction: column;\n      border: 1px solid #5F95FF;\n      border-radius: 8px;\n      box-sizing: border-box;\n      padding: 12px;\n      width: 260px;\n      height: 96px;\n      background: #fff;\n      gap: 8px;\n    }\n\n    .agent-card .header { display: flex; align-items: center; gap: 12px; }\n    .agent-card .icon {\n      width: 32px; height: 32px; border-radius: 8px;\n      background: #F0F5FF; color: #1D39C4; display: flex; align-items: center; justify-content: center;\n      font-size: 12px; font-weight: 600; font-family: Inter, PingFang SC, Arial;\n    }\n    .agent-card.green .icon { background: #E6FFFB; color: #08979C; }\n    .agent-card.orange .icon { background: #FFF7E6; color: #FA8C16; }\n    .agent-card.red .icon { background: #FFF1F0; color: #CF1322; }\n\n    .agent-card .title { font-size: 16px; color: #141414; font-weight: 600; line-height: 20px; }\n    .agent-card .desc { font-size: 13px; color: rgba(0,0,0,0.65); line-height: 18px; }\n    .agent-card .body { display: flex; align-items: center; gap: 8px; }\n    .agent-card .section { font-size: 12px; color: #8c8c8c; flex: 0 0 auto; white-space: nowrap; min-width: max-content; }\n    .agent-card .body input {\n      flex: 1; min-width: 0; height: 30px; border: 1px solid #5F95FF; border-radius: 6px; padding: 4px 8px; background: #FAFAFA; color: #141414;\n    }\n    .agent-card .actions { margin-left: auto; color: #8c8c8c; display: flex; gap: 8px; }\n    .agent-card .actions .op { font-size: 14px; cursor: pointer; }\n\n    /* start/end flow cards */\n    .flow-card { display: flex; flex-direction: column; border: 1px solid #5F95FF; border-radius: 12px; background: #fff; width: 260px; height: 96px; box-sizing: border-box; padding: 12px; gap: 8px; }\n    .flow-card .header { display: flex; align-items: center; gap: 12px; }\n    .flow-card .icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; }\n    .flow-card.start .icon { background: #EEF2FF; color: #5F95FF; }\n    .flow-card.end .icon { background: #FFF1F0; color: #FF7875; }\n    .flow-card .title { font-size: 16px; color: #141414; font-weight: 600; }\n    .flow-card .badge { margin-left: auto; font-size: 12px; color: #8c8c8c; background: #F5F5F5; border-radius: 8px; padding: 2px 8px; }\n    .flow-card .body { display: flex; align-items: center; gap: 8px; }\n    .flow-card .section { font-size: 12px; color: #8c8c8c; }\n    .flow-card .chips { display: flex; align-items: center; gap: 6px; flex: 1; flex-wrap: wrap; }\n    .flow-card .chip { font-size: 12px; color: #595959; background: #FAFAFA; border: 1px solid #5F95FF; border-radius: 6px; padding: 2px 8px; }\n    .flow-card .actions { margin-left: auto; color: #8c8c8c; }\n    .flow-card .footer { display: flex; align-items: center; gap: 8px; }\n  `)\n}\n",title:{zh:"智能体流程编排",en:"Agent Flow"},filename:"agentFlow.ts",isNew:!1},{id:"flowchart",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*JSr-RbwCgmcAAAAAAAAAAAAAARQnAQ",source:"import {\n  Clipboard,\n  Graph,\n  History,\n  Keyboard,\n  Selection,\n  Shape,\n  Snapline,\n  Stencil,\n  Transform,\n} from '@antv/x6'\nimport insertCss from 'insert-css'\n\n// 为了协助代码演示\npreWork()\n\n// #region 初始化画布\nconst graph = new Graph({\n  container: document.getElementById('graph-container') as HTMLElement,\n  grid: true,\n  mousewheel: {\n    enabled: true,\n    zoomAtMousePosition: true,\n    modifiers: 'ctrl',\n    minScale: 0.5,\n    maxScale: 3,\n  },\n  connecting: {\n    router: 'manhattan',\n    connector: {\n      name: 'rounded',\n      args: {\n        radius: 8,\n      },\n    },\n    anchor: 'center',\n    connectionPoint: 'anchor',\n    allowBlank: false,\n    snap: {\n      radius: 20,\n    },\n    createEdge() {\n      return new Shape.Edge({\n        attrs: {\n          line: {\n            stroke: '#A2B1C3',\n            strokeWidth: 2,\n            targetMarker: {\n              name: 'block',\n              width: 12,\n              height: 8,\n            },\n          },\n        },\n        zIndex: 0,\n      })\n    },\n    validateConnection({ targetMagnet }) {\n      return !!targetMagnet\n    },\n  },\n  highlighting: {\n    magnetAdsorbed: {\n      name: 'stroke',\n      args: {\n        attrs: {\n          fill: '#5F95FF',\n          stroke: '#5F95FF',\n        },\n      },\n    },\n  },\n})\n// #endregion\n\n// #region 使用插件\ngraph\n  .use(\n    new Transform({\n      resizing: true,\n      rotating: true,\n    }),\n  )\n  .use(\n    new Selection({\n      rubberband: true,\n      showNodeSelectionBox: true,\n    }),\n  )\n  .use(new Snapline())\n  .use(new Keyboard())\n  .use(new Clipboard())\n  .use(new History())\n// #endregion\n\n// #region 初始化 stencil\nconst stencil = new Stencil({\n  title: '流程图',\n  target: graph,\n  stencilGraphWidth: 200,\n  stencilGraphHeight: 180,\n  stencilGraphOptions: { panning: true },\n  collapsable: true,\n  groups: [\n    {\n      title: '基础流程图',\n      name: 'group1',\n    },\n    {\n      title: '系统设计图',\n      name: 'group2',\n      graphHeight: 250,\n      layoutOptions: {\n        rowHeight: 70,\n      },\n    },\n  ],\n  layoutOptions: {\n    columns: 2,\n    columnWidth: 80,\n    rowHeight: 55,\n  },\n})\ndocument\n  .getElementById('stencil')\n  ?.appendChild(stencil.container as HTMLElement)\n// #endregion\n\n// #region 快捷键与事件\ngraph.bindKey(['meta+c', 'ctrl+c'], () => {\n  const cells = graph.getSelectedCells()\n  if (cells.length) {\n    graph.copy(cells)\n  }\n  return false\n})\ngraph.bindKey(['meta+x', 'ctrl+x'], () => {\n  const cells = graph.getSelectedCells()\n  if (cells.length) {\n    graph.cut(cells)\n  }\n  return false\n})\ngraph.bindKey(['meta+v', 'ctrl+v'], () => {\n  if (!graph.isClipboardEmpty()) {\n    const cells = graph.paste({ offset: 32 })\n    graph.cleanSelection()\n    graph.select(cells)\n  }\n  return false\n})\n\n// undo redo\ngraph.bindKey(['meta+z', 'ctrl+z'], () => {\n  if (graph.canUndo()) {\n    graph.undo()\n  }\n  return false\n})\ngraph.bindKey(['meta+shift+z', 'ctrl+shift+z'], () => {\n  if (graph.canRedo()) {\n    graph.redo()\n  }\n  return false\n})\n\n// select all\ngraph.bindKey(['meta+a', 'ctrl+a'], () => {\n  const nodes = graph.getNodes()\n  if (nodes) {\n    graph.select(nodes)\n  }\n})\n\n// delete\ngraph.bindKey('backspace', () => {\n  const cells = graph.getSelectedCells()\n  if (cells.length) {\n    graph.removeCells(cells)\n  }\n})\n\n// zoom\ngraph.bindKey(['ctrl+1', 'meta+1'], () => {\n  const zoom = graph.zoom()\n  if (zoom < 1.5) {\n    graph.zoom(0.1)\n  }\n})\ngraph.bindKey(['ctrl+2', 'meta+2'], () => {\n  const zoom = graph.zoom()\n  if (zoom > 0.5) {\n    graph.zoom(-0.1)\n  }\n})\n\n// 控制连接桩显示/隐藏\nconst showPorts = (ports: NodeListOf<SVGElement>, show: boolean) => {\n  for (let i = 0, len = ports.length; i < len; i += 1) {\n    ports[i].style.visibility = show ? 'visible' : 'hidden'\n  }\n}\ngraph.on('node:mouseenter', () => {\n  const container = document.getElementById('graph-container') as HTMLElement\n  const ports = container.querySelectorAll(\n    '.x6-port-body',\n  ) as NodeListOf<SVGElement>\n  showPorts(ports, true)\n})\ngraph.on('node:mouseleave', () => {\n  const container = document.getElementById('graph-container') as HTMLElement\n  const ports = container.querySelectorAll(\n    '.x6-port-body',\n  ) as NodeListOf<SVGElement>\n  showPorts(ports, false)\n})\n// #endregion\n\n// #region 初始化图形\nconst ports = {\n  groups: {\n    top: {\n      position: 'top',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#5F95FF',\n          strokeWidth: 1,\n          fill: '#fff',\n          style: {\n            visibility: 'hidden',\n          },\n        },\n      },\n    },\n    right: {\n      position: 'right',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#5F95FF',\n          strokeWidth: 1,\n          fill: '#fff',\n          style: {\n            visibility: 'hidden',\n          },\n        },\n      },\n    },\n    bottom: {\n      position: 'bottom',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#5F95FF',\n          strokeWidth: 1,\n          fill: '#fff',\n          style: {\n            visibility: 'hidden',\n          },\n        },\n      },\n    },\n    left: {\n      position: 'left',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#5F95FF',\n          strokeWidth: 1,\n          fill: '#fff',\n          style: {\n            visibility: 'hidden',\n          },\n        },\n      },\n    },\n  },\n  items: [\n    {\n      group: 'top',\n    },\n    {\n      group: 'right',\n    },\n    {\n      group: 'bottom',\n    },\n    {\n      group: 'left',\n    },\n  ],\n}\n\nGraph.registerNode(\n  'custom-rect',\n  {\n    inherit: 'rect',\n    width: 66,\n    height: 36,\n    attrs: {\n      body: {\n        strokeWidth: 1,\n        stroke: '#5F95FF',\n        fill: '#EFF4FF',\n      },\n      text: {\n        fontSize: 12,\n        fill: '#262626',\n      },\n    },\n    ports: { ...ports },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'custom-polygon',\n  {\n    inherit: 'polygon',\n    width: 66,\n    height: 36,\n    attrs: {\n      body: {\n        strokeWidth: 1,\n        stroke: '#5F95FF',\n        fill: '#EFF4FF',\n      },\n      text: {\n        fontSize: 12,\n        fill: '#262626',\n      },\n    },\n    ports: {\n      ...ports,\n      items: [\n        {\n          group: 'top',\n        },\n        {\n          group: 'bottom',\n        },\n      ],\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'custom-circle',\n  {\n    inherit: 'circle',\n    width: 45,\n    height: 45,\n    attrs: {\n      body: {\n        strokeWidth: 1,\n        stroke: '#5F95FF',\n        fill: '#EFF4FF',\n      },\n      text: {\n        fontSize: 12,\n        fill: '#262626',\n      },\n    },\n    ports: { ...ports },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'custom-image',\n  {\n    inherit: 'rect',\n    width: 52,\n    height: 52,\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n      },\n      {\n        tagName: 'text',\n        selector: 'label',\n      },\n    ],\n    attrs: {\n      body: {\n        stroke: '#5F95FF',\n        fill: '#5F95FF',\n      },\n      image: {\n        width: 26,\n        height: 26,\n        refX: 13,\n        refY: 16,\n      },\n      label: {\n        refX: 3,\n        refY: 2,\n        textAnchor: 'left',\n        textVerticalAnchor: 'top',\n        fontSize: 12,\n        fill: '#fff',\n      },\n    },\n    ports: { ...ports },\n  },\n  true,\n)\n\nconst r1 = graph.createNode({\n  shape: 'custom-rect',\n  label: '开始',\n  attrs: {\n    body: {\n      rx: 20,\n      ry: 26,\n    },\n  },\n})\nconst r2 = graph.createNode({\n  shape: 'custom-rect',\n  label: '过程',\n})\nconst r3 = graph.createNode({\n  shape: 'custom-rect',\n  attrs: {\n    body: {\n      rx: 6,\n      ry: 6,\n    },\n  },\n  label: '可选过程',\n})\nconst r4 = graph.createNode({\n  shape: 'custom-polygon',\n  attrs: {\n    body: {\n      refPoints: '0,10 10,0 20,10 10,20',\n    },\n  },\n  label: '决策',\n})\nconst r5 = graph.createNode({\n  shape: 'custom-polygon',\n  attrs: {\n    body: {\n      refPoints: '10,0 40,0 30,20 0,20',\n    },\n  },\n  label: '数据',\n})\nconst r6 = graph.createNode({\n  shape: 'custom-circle',\n  label: '连接',\n})\nstencil.load([r1, r2, r3, r4, r5, r6], 'group1')\n\nconst imageShapes = [\n  {\n    label: 'Client',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/687b6cb9-4b97-42a6-96d0-34b3099133ac.svg',\n  },\n  {\n    label: 'Http',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/dc1ced06-417d-466f-927b-b4a4d3265791.svg',\n  },\n  {\n    label: 'Api',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/c55d7ae1-8d20-4585-bd8f-ca23653a4489.svg',\n  },\n  {\n    label: 'Sql',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/6eb71764-18ed-4149-b868-53ad1542c405.svg',\n  },\n  {\n    label: 'Clound',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/c36fe7cb-dc24-4854-aeb5-88d8dc36d52e.svg',\n  },\n  {\n    label: 'Mq',\n    image:\n      'https://gw.alipayobjects.com/zos/bmw-prod/2010ac9f-40e7-49d4-8c4a-4fcf2f83033b.svg',\n  },\n]\nconst imageNodes = imageShapes.map((item) =>\n  graph.createNode({\n    shape: 'custom-image',\n    label: item.label,\n    attrs: {\n      image: {\n        'xlink:href': item.image,\n      },\n    },\n  }),\n)\nstencil.load(imageNodes, 'group2')\n// #endregion\n\nfunction preWork() {\n  // 这里协助演示的代码，在实际项目中根据实际情况进行调整\n  const container = document.getElementById('container') as HTMLElement\n  const stencilContainer = document.createElement('div')\n  stencilContainer.id = 'stencil'\n  const graphContainer = document.createElement('div')\n  graphContainer.id = 'graph-container'\n  container.appendChild(stencilContainer)\n  container.appendChild(graphContainer)\n\n  insertCss(`\n    #container {\n      display: flex;\n      border: 1px solid #dfe3e8;\n    }\n    #stencil {\n      width: 180px;\n      height: 100%;\n      position: relative;\n      border-right: 1px solid #dfe3e8;\n    }\n    #graph-container {\n      width: calc(100% - 180px);\n      height: 100%;\n    }\n    .x6-widget-stencil  {\n      background-color: #fff;\n    }\n    .x6-widget-stencil-title {\n      background-color: #fff;\n    }\n    .x6-widget-stencil-group-title {\n      background-color: #fff !important;\n    }\n    .x6-widget-transform {\n      margin: -1px 0 0 -1px;\n      padding: 0px;\n      border: 1px solid #239edd;\n    }\n    .x6-widget-transform > div {\n      border: 1px solid #239edd;\n    }\n    .x6-widget-transform > div:hover {\n      background-color: #3dafe4;\n    }\n    .x6-widget-transform-active-handle {\n      background-color: #3dafe4;\n    }\n    .x6-widget-transform-resize {\n      border-radius: 0;\n    }\n    .x6-widget-selection-inner {\n      border: 1px solid #239edd;\n    }\n    .x6-widget-selection-box {\n      opacity: 0;\n    }\n  `)\n}\n",title:{zh:"流程图",en:"Flow Chart"},filename:"flowchart.ts",isNew:!1},{id:"dag",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*RPiGRaSus3UAAAAAAAAAAAAAARQnAQ",source:"import React from 'react'\nimport { Graph, Path, Cell, Selection } from '@antv/x6'\nimport insertCss from 'insert-css'\nimport { register } from '@antv/x6-react-shape'\n\ninterface NodeStatus {\n  id: string\n  status: 'default' | 'success' | 'failed' | 'running'\n  label?: string\n}\n\nconst image = {\n  logo: 'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*evDjT5vjkX0AAAAAAAAAAAAAARQnAQ',\n  success:\n    'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*6l60T6h8TTQAAAAAAAAAAAAAARQnAQ',\n  failed:\n    'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*SEISQ6My-HoAAAAAAAAAAAAAARQnAQ',\n  running:\n    'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*t8fURKfgSOgAAAAAAAAAAAAAARQnAQ',\n}\n\nconst AlgoNode = (props: { node: Cell }) => {\n  const { node } = props\n  const data = node?.getData() as NodeStatus\n  const { label, status = 'default' } = data\n\n  return (\n    <div className={`node ${status}`}>\n      <img src={image.logo} alt=\"logo\" />\n      <span className=\"label\">{label}</span>\n      <span className=\"status\">\n        {status === 'success' && <img src={image.success} alt=\"success\" />}\n        {status === 'failed' && <img src={image.failed} alt=\"failed\" />}\n        {status === 'running' && <img src={image.running} alt=\"running\" />}\n      </span>\n    </div>\n  )\n}\n\nregister({\n  shape: 'dag-node',\n  width: 180,\n  height: 36,\n  component: AlgoNode,\n  ports: {\n    groups: {\n      top: {\n        position: 'top',\n        attrs: {\n          circle: {\n            r: 4,\n            magnet: true,\n            stroke: '#C2C8D5',\n            strokeWidth: 1,\n            fill: '#fff',\n          },\n        },\n      },\n      bottom: {\n        position: 'bottom',\n        attrs: {\n          circle: {\n            r: 4,\n            magnet: true,\n            stroke: '#C2C8D5',\n            strokeWidth: 1,\n            fill: '#fff',\n          },\n        },\n      },\n    },\n  },\n})\n\nGraph.registerEdge(\n  'dag-edge',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        stroke: '#C2C8D5',\n        strokeWidth: 1,\n        targetMarker: null,\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerConnector(\n  'algo-connector',\n  (s, e) => {\n    const offset = 4\n    const deltaY = Math.abs(e.y - s.y)\n    const control = Math.floor((deltaY / 3) * 2)\n\n    const v1 = { x: s.x, y: s.y + offset + control }\n    const v2 = { x: e.x, y: e.y - offset - control }\n\n    return Path.parse(\n      `\n      M ${s.x} ${s.y}\n      L ${s.x} ${s.y + offset}\n      C ${v1.x} ${v1.y} ${v2.x} ${v2.y} ${e.x} ${e.y - offset}\n      L ${e.x} ${e.y}\n    `,\n    ).serialize()\n  },\n  true,\n)\n\nconst nodeStatusList: NodeStatus[][] = [\n  [\n    {\n      id: '1',\n      status: 'running',\n    },\n    {\n      id: '2',\n      status: 'default',\n    },\n    {\n      id: '3',\n      status: 'default',\n    },\n    {\n      id: '4',\n      status: 'default',\n    },\n  ],\n  [\n    {\n      id: '1',\n      status: 'success',\n    },\n    {\n      id: '2',\n      status: 'running',\n    },\n    {\n      id: '3',\n      status: 'default',\n    },\n    {\n      id: '4',\n      status: 'default',\n    },\n  ],\n  [\n    {\n      id: '1',\n      status: 'success',\n    },\n    {\n      id: '2',\n      status: 'success',\n    },\n    {\n      id: '3',\n      status: 'running',\n    },\n    {\n      id: '4',\n      status: 'running',\n    },\n  ],\n  [\n    {\n      id: '1',\n      status: 'success',\n    },\n    {\n      id: '2',\n      status: 'success',\n    },\n    {\n      id: '3',\n      status: 'success',\n    },\n    {\n      id: '4',\n      status: 'failed',\n    },\n  ],\n]\n\nconst graph: Graph = new Graph({\n  container: document.getElementById('container')!,\n  panning: {\n    enabled: true,\n    eventTypes: ['leftMouseDown', 'mouseWheel'],\n  },\n  mousewheel: {\n    enabled: true,\n    modifiers: 'ctrl',\n    factor: 1.1,\n    maxScale: 1.5,\n    minScale: 0.5,\n  },\n  highlighting: {\n    magnetAdsorbed: {\n      name: 'stroke',\n      args: {\n        attrs: {\n          fill: '#fff',\n          stroke: '#31d0c6',\n          strokeWidth: 4,\n        },\n      },\n    },\n  },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    highlight: true,\n    connector: 'algo-connector',\n    connectionPoint: 'anchor',\n    anchor: 'center',\n    validateMagnet({ magnet }) {\n      return magnet.getAttribute('port-group') !== 'top'\n    },\n    createEdge() {\n      return graph.createEdge({\n        shape: 'dag-edge',\n        attrs: {\n          line: {\n            strokeDasharray: '5 5',\n          },\n        },\n        zIndex: -1,\n      })\n    },\n  },\n})\ngraph.use(\n  new Selection({\n    multiple: true,\n    rubberEdge: true,\n    rubberNode: true,\n    modifiers: 'shift',\n    rubberband: true,\n  }),\n)\n\ngraph.on('edge:connected', ({ edge }) => {\n  edge.attr({\n    line: {\n      strokeDasharray: '',\n    },\n  })\n})\n\ngraph.on('node:change:data', ({ node }) => {\n  const edges = graph.getIncomingEdges(node)\n  const { status } = node.getData() as NodeStatus\n  edges?.forEach((edge) => {\n    if (status === 'running') {\n      edge.attr('line/strokeDasharray', 5)\n      edge.attr('line/style/animation', 'running-line 30s infinite linear')\n    } else {\n      edge.attr('line/strokeDasharray', '')\n      edge.attr('line/style/animation', '')\n    }\n  })\n})\n\n// 初始化节点/边\nconst init = (data: any[]) => {\n  const cells: Cell[] = []\n  data.forEach((item) => {\n    if (item.shape === 'dag-node') {\n      cells.push(graph.createNode(item))\n    } else {\n      cells.push(graph.createEdge(item))\n    }\n  })\n  graph.resetCells(cells)\n}\n\n// 显示节点状态\nconst showNodeStatus = async (statusList: NodeStatus[][]) => {\n  const status = statusList.shift()\n  status?.forEach((item) => {\n    const { id, status } = item\n    const node = graph.getCellById(id)\n    const data = node.getData() as NodeStatus\n    node.setData({\n      ...data,\n      status,\n    })\n  })\n  setTimeout(() => {\n    showNodeStatus(statusList)\n  }, 3000)\n}\n\nfetch('/data/dag.json')\n  .then((response) => response.json())\n  .then((data) => {\n    init(data)\n    showNodeStatus(nodeStatusList)\n    graph.centerContent()\n  })\n\ninsertCss(`\n.node {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  border: 1px solid #c2c8d5;\n  border-left: 4px solid #5F95FF;\n  border-radius: 4px;\n  box-shadow: 0 2px 5px 1px rgba(0, 0, 0, 0.06);\n}\n.node img {\n  width: 20px;\n  height: 20px;\n  flex-shrink: 0;\n  margin-left: 8px;\n}\n.node .label {\n  display: inline-block;\n  flex-shrink: 0;\n  width: 104px;\n  margin-left: 8px;\n  color: #666;\n  font-size: 12px;\n}\n.node .status {\n  flex-shrink: 0;\n}\n.node.success {\n  border-left: 4px solid #52c41a;\n}\n.node.failed {\n  border-left: 4px solid #ff4d4f;\n}\n.node.running .status img {\n  animation: spin 1s linear infinite;\n}\n.x6-node-selected .node {\n  border-color: #1890ff;\n  border-radius: 2px;\n  box-shadow: 0 0 0 4px #d4e8fe;\n}\n.x6-node-selected .node.success {\n  border-color: #52c41a;\n  border-radius: 2px;\n  box-shadow: 0 0 0 4px #ccecc0;\n}\n.x6-node-selected .node.failed {\n  border-color: #ff4d4f;\n  border-radius: 2px;\n  box-shadow: 0 0 0 4px #fedcdc;\n}\n.x6-edge:hover path:nth-child(2){\n  stroke: #1890ff;\n  stroke-width: 1px;\n}\n\n.x6-edge-selected path:nth-child(2){\n  stroke: #1890ff;\n  stroke-width: 1.5px !important;\n}\n\n@keyframes running-line {\n  to {\n    stroke-dashoffset: -1000;\n  }\n}\n@keyframes spin {\n  from {\n      transform: rotate(0deg);\n  }\n  to {\n      transform: rotate(360deg);\n  }\n}\n`)\n",title:{zh:"人工智能建模 DAG 图",en:"DAG for AI Model"},filename:"dag.tsx",isNew:!1},{id:"dataProcessingDag",screenshot:"https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*yRLDQ5KgSO4AAAAAAAAAAAAADtOHAQ/original",source:"import React from 'react'\nimport {\n  Graph,\n  Node,\n  Path,\n  Edge,\n  StringExt,\n  Selection,\n  IS_SAFARI,\n} from '@antv/x6'\nimport classnames from 'classnames'\nimport insertCss from 'insert-css'\nimport { register } from '@antv/x6-react-shape'\nimport { Tooltip, Dropdown } from 'antd'\n\n// 节点类型\nenum NodeType {\n  INPUT = 'INPUT', // 数据输入\n  FILTER = 'FILTER', // 数据过滤\n  JOIN = 'JOIN', // 数据连接\n  UNION = 'UNION', // 数据合并\n  AGG = 'AGG', // 数据聚合\n  OUTPUT = 'OUTPUT', // 数据输出\n}\n\n// 元素校验状态\nenum CellStatus {\n  DEFAULT = 'default',\n  SUCCESS = 'success',\n  ERROR = 'error',\n}\n\ninterface ProcessingNodeData {\n  name: string\n  type: NodeType\n  status?: CellStatus\n  statusMsg?: string\n}\n\n// 节点位置信息\ninterface Position {\n  x: number\n  y: number\n}\n\n// 加工类型列表\nconst PROCESSING_TYPE_LIST: { type: NodeType; name: string }[] = [\n  {\n    type: NodeType.FILTER,\n    name: '数据筛选',\n  },\n  {\n    type: NodeType.JOIN,\n    name: '数据连接',\n  },\n  {\n    type: NodeType.UNION,\n    name: '数据合并',\n  },\n  {\n    type: NodeType.AGG,\n    name: '数据聚合',\n  },\n\n  {\n    type: NodeType.OUTPUT,\n    name: '数据输出',\n  },\n]\n\n// 不同节点类型的icon\nconst NODE_TYPE_LOGO: Record<NodeType, string> = {\n  INPUT:\n    'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*RXnuTpQ22xkAAAAAAAAAAAAADtOHAQ/original', // 数据输入\n  FILTER:\n    'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*ZJ6qToit8P4AAAAAAAAAAAAADtOHAQ/original', // 数据筛选\n  JOIN: 'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*EHqyQoDeBvIAAAAAAAAAAAAADtOHAQ/original', // 数据连接\n  UNION:\n    'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*k4eyRaXv8gsAAAAAAAAAAAAADtOHAQ/original', // 数据合并\n  AGG: 'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*TKG8R6nfYiAAAAAAAAAAAAAADtOHAQ/original', // 数据聚合\n  OUTPUT:\n    'https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*zUgORbGg1HIAAAAAAAAAAAAADtOHAQ/original', // 数据输出\n}\n\n/**\n * 根据起点初始下游节点的位置信息\n * @param node 起始节点\n * @param graph\n * @returns\n */\nconst getDownstreamNodePosition = (\n  node: Node,\n  graph: Graph,\n  dx = 250,\n  dy = 100,\n) => {\n  // 找出画布中以该起始节点为起点的相关边的终点id集合\n  const downstreamNodeIdList: string[] = []\n  graph.getEdges().forEach((edge) => {\n    const originEdge = edge.toJSON()?.data\n    if (originEdge.source === node.id) {\n      downstreamNodeIdList.push(originEdge.target)\n    }\n  })\n  // 获取起点的位置信息\n  const position = node.getPosition()\n  let minX = Infinity\n  let maxY = -Infinity\n  graph.getNodes().forEach((graphNode) => {\n    if (downstreamNodeIdList.indexOf(graphNode.id) > -1) {\n      const nodePosition = graphNode.getPosition()\n      // 找到所有节点中最左侧的节点的x坐标\n      if (nodePosition.x < minX) {\n        minX = nodePosition.x\n      }\n      // 找到所有节点中最x下方的节点的y坐标\n      if (nodePosition.y > maxY) {\n        maxY = nodePosition.y\n      }\n    }\n  })\n\n  return {\n    x: minX !== Infinity ? minX : position.x + dx,\n    y: maxY !== -Infinity ? maxY + dy : position.y,\n  }\n}\n\n// 根据节点的类型获取ports\nconst getPortsByType = (\n  type: NodeType,\n  nodeId: string,\n): { id: string; group: 'in' | 'out' }[] => {\n  let ports: { id: string; group: 'in' | 'out' }[] = []\n  switch (type) {\n    case NodeType.INPUT:\n      ports = [\n        {\n          id: `${nodeId}-out`,\n          group: 'out',\n        },\n      ]\n      break\n    case NodeType.OUTPUT:\n      ports = [\n        {\n          id: `${nodeId}-in`,\n          group: 'in',\n        },\n      ]\n      break\n    default:\n      ports = [\n        {\n          id: `${nodeId}-in`,\n          group: 'in',\n        },\n        {\n          id: `${nodeId}-out`,\n          group: 'out',\n        },\n      ]\n      break\n  }\n  return ports\n}\n\n/**\n * 创建节点并添加到画布\n * @param type 节点类型\n * @param graph\n * @param position 节点位置\n * @returns\n */\nexport const createNode = (\n  type: NodeType,\n  graph: Graph,\n  position?: Position,\n): Node => {\n  const sameTypeNodes = graph\n    .getNodes()\n    .filter((item) => item.getData()?.type === type)\n  const typeName = PROCESSING_TYPE_LIST?.find(\n    (item) => item.type === type,\n  )?.name\n  const id = StringExt.uuid()\n  const node = {\n    id,\n    shape: 'data-processing-dag-node',\n    x: position?.x,\n    y: position?.y,\n    ports: getPortsByType(type, id),\n    data: {\n      name: `${typeName}_${sameTypeNodes.length + 1}`,\n      type,\n    },\n  }\n  return graph.addNode(node)\n}\n\n/**\n * 创建边并添加到画布\n * @param source\n * @param target\n * @param graph\n */\nconst createEdge = (source: string, target: string, graph: Graph) => {\n  const edge = {\n    id: StringExt.uuid(),\n    shape: 'data-processing-curve',\n    source: {\n      cell: source,\n      port: `${source}-out`,\n    },\n    target: {\n      cell: target,\n      port: `${target}-in`,\n    },\n    zIndex: -1,\n    data: {\n      source,\n      target,\n    },\n  }\n  if (graph) {\n    graph.addEdge(edge)\n  }\n}\n\nclass DataProcessingDagNode extends React.Component<{\n  node: Node\n}> {\n  state = {\n    plusActionSelected: false,\n  }\n\n  // 创建下游的节点和边\n  createDownstream = (type: NodeType) => {\n    const { node } = this.props\n    const { graph } = node.model || {}\n    if (graph) {\n      // 获取下游节点的初始位置信息\n      const position = getDownstreamNodePosition(node, graph)\n      // 创建下游节点\n      const newNode = createNode(type, graph, position)\n      const source = node.id\n      const target = newNode.id\n      // 创建该节点出发到下游节点的边\n      createEdge(source, target, graph)\n    }\n  }\n\n  // 点击添加下游+号\n  clickPlusDragMenu = (type: NodeType) => {\n    this.createDownstream(type)\n    this.setState({\n      plusActionSelected: false,\n    })\n  }\n\n  //  获取+号下拉菜单\n  getPlusDagMenu = () => {\n    return (\n      <ul>\n        {PROCESSING_TYPE_LIST.map((item) => {\n          const content = (\n            // eslint-disable-next-line\n            <a onClick={() => this.clickPlusDragMenu(item.type)}>\n              <i\n                className=\"node-mini-logo\"\n                style={{ backgroundImage: `url(${NODE_TYPE_LOGO[item.type]})` }}\n              />\n\n              <span>{item.name}</span>\n            </a>\n          )\n          return (\n            <li className=\"each-sub-menu\" key={item.type}>\n              {content}\n            </li>\n          )\n        })}\n      </ul>\n    )\n  }\n\n  // 添加下游菜单的打开状态变化\n  onPlusDropdownOpenChange = (value: boolean) => {\n    this.setState({\n      plusActionSelected: value,\n    })\n  }\n\n  // 鼠标进入矩形主区域的时候显示连接桩\n  onMainMouseEnter = () => {\n    const { node } = this.props\n    // 获取该节点下的所有连接桩\n    const ports = node.getPorts() || []\n    ports.forEach((port: { id: string }) => {\n      node.setPortProp(port.id, 'attrs/circle', {\n        fill: '#fff',\n        stroke: '#85A5FF',\n      })\n    })\n  }\n\n  // 鼠标离开矩形主区域的时候隐藏连接桩\n  onMainMouseLeave = () => {\n    const { node } = this.props\n    // 获取该节点下的所有连接桩\n    const ports = node.getPorts() || []\n    ports.forEach((port: { id: string }) => {\n      node.setPortProp(port.id, 'attrs/circle', {\n        fill: 'transparent',\n        stroke: 'transparent',\n      })\n    })\n  }\n\n  render() {\n    const { plusActionSelected } = this.state\n    const { node } = this.props\n    const data = node?.getData() as ProcessingNodeData\n    const { name, type, status, statusMsg } = data\n\n    return (\n      <div className=\"data-processing-dag-node\">\n        <div\n          className=\"main-area\"\n          onMouseEnter={this.onMainMouseEnter}\n          onMouseLeave={this.onMainMouseLeave}\n        >\n          <div className=\"main-info\">\n            {/* 节点类型icon */}\n            <i\n              className=\"node-logo\"\n              style={{ backgroundImage: `url(${NODE_TYPE_LOGO[type]})` }}\n            />\n            <Tooltip title={name} mouseEnterDelay={0.8}>\n              <div className=\"ellipsis-row node-name\">{name}</div>\n            </Tooltip>\n          </div>\n\n          {/* 节点状态信息 */}\n          <div className=\"status-action\">\n            {status === CellStatus.ERROR && (\n              <Tooltip title={statusMsg}>\n                <i className=\"status-icon status-icon-error\" />\n              </Tooltip>\n            )}\n            {status === CellStatus.SUCCESS && (\n              <i className=\"status-icon status-icon-success\" />\n            )}\n\n            {/* 节点操作菜单 */}\n            <div className=\"more-action-container\">\n              <i className=\"more-action\" />\n            </div>\n          </div>\n        </div>\n\n        {/* 添加下游节点 */}\n        {type !== NodeType.OUTPUT && (\n          <div className=\"plus-dag\">\n            <Dropdown\n              dropdownRender={this.getPlusDagMenu}\n              overlayClassName=\"processing-node-menu\"\n              trigger={['click']}\n              placement=\"bottom\"\n              open={plusActionSelected}\n              onOpenChange={this.onPlusDropdownOpenChange}\n            >\n              <i\n                className={classnames('plus-action', {\n                  'plus-action-selected': plusActionSelected,\n                })}\n              />\n            </Dropdown>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nregister({\n  shape: 'data-processing-dag-node',\n  width: 212,\n  height: 48,\n  component: DataProcessingDagNode,\n  // port默认不可见\n  ports: {\n    groups: {\n      in: {\n        position: 'left',\n        attrs: {\n          circle: {\n            r: 4,\n            magnet: true,\n            stroke: 'transparent',\n            strokeWidth: 1,\n            fill: 'transparent',\n          },\n        },\n      },\n\n      out: {\n        position: {\n          name: 'right',\n          args: {\n            dx: -32,\n          },\n        },\n\n        attrs: {\n          circle: {\n            r: 4,\n            magnet: true,\n            stroke: 'transparent',\n            strokeWidth: 1,\n            fill: 'transparent',\n          },\n        },\n      },\n    },\n  },\n})\n\n// 注册连线\nGraph.registerConnector(\n  'curveConnector',\n  (sourcePoint, targetPoint) => {\n    const hgap = Math.abs(targetPoint.x - sourcePoint.x)\n    const path = new Path()\n    path.appendSegment(\n      Path.createSegment('M', sourcePoint.x - 4, sourcePoint.y),\n    )\n    path.appendSegment(\n      Path.createSegment('L', sourcePoint.x + 12, sourcePoint.y),\n    )\n    // 水平三阶贝塞尔曲线\n    path.appendSegment(\n      Path.createSegment(\n        'C',\n        sourcePoint.x < targetPoint.x\n          ? sourcePoint.x + hgap / 2\n          : sourcePoint.x - hgap / 2,\n        sourcePoint.y,\n        sourcePoint.x < targetPoint.x\n          ? targetPoint.x - hgap / 2\n          : targetPoint.x + hgap / 2,\n        targetPoint.y,\n        targetPoint.x - 6,\n        targetPoint.y,\n      ),\n    )\n    path.appendSegment(\n      Path.createSegment('L', targetPoint.x + 2, targetPoint.y),\n    )\n\n    return path.serialize()\n  },\n  true,\n)\n\nEdge.config({\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'wrap',\n      attrs: {\n        fill: 'none',\n        cursor: 'pointer',\n        stroke: 'transparent',\n        strokeLinecap: 'round',\n      },\n    },\n    {\n      tagName: 'path',\n      selector: 'line',\n      attrs: {\n        fill: 'none',\n        pointerEvents: 'none',\n      },\n    },\n  ],\n  connector: { name: 'curveConnector' },\n  attrs: {\n    wrap: {\n      connection: true,\n      strokeWidth: 10,\n      strokeLinejoin: 'round',\n    },\n    line: {\n      connection: true,\n      stroke: '#A2B1C3',\n      strokeWidth: 1,\n      targetMarker: {\n        name: 'classic',\n        size: 6,\n      },\n    },\n  },\n})\n\nGraph.registerEdge('data-processing-curve', Edge, true)\n\nconst graph: Graph = new Graph({\n  container: document.getElementById('container')!,\n  panning: {\n    enabled: true,\n    eventTypes: ['leftMouseDown', 'mouseWheel'],\n  },\n  mousewheel: {\n    enabled: true,\n    modifiers: 'ctrl',\n    factor: 1.1,\n    maxScale: 1.5,\n    minScale: 0.5,\n  },\n  highlighting: {\n    magnetAdsorbed: {\n      name: 'stroke',\n      args: {\n        attrs: {\n          fill: '#fff',\n          stroke: '#31d0c6',\n          strokeWidth: 4,\n        },\n      },\n    },\n  },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    highlight: true,\n    sourceAnchor: {\n      name: 'left',\n      args: {\n        dx: IS_SAFARI ? 4 : 8,\n      },\n    },\n    targetAnchor: {\n      name: 'right',\n      args: {\n        dx: IS_SAFARI ? 4 : -8,\n      },\n    },\n    createEdge() {\n      return graph.createEdge({\n        shape: 'data-processing-curve',\n        attrs: {\n          line: {\n            strokeDasharray: '5 5',\n          },\n        },\n        zIndex: -1,\n      })\n    },\n    // 连接桩校验\n    validateConnection({ sourceMagnet, targetMagnet }) {\n      // 只能从输出链接桩创建连接\n      if (!sourceMagnet || sourceMagnet.getAttribute('port-group') === 'in') {\n        return false\n      }\n      // 只能连接到输入链接桩\n      if (!targetMagnet || targetMagnet.getAttribute('port-group') !== 'in') {\n        return false\n      }\n      return true\n    },\n  },\n})\n\ngraph.use(\n  new Selection({\n    multiple: true,\n    rubberEdge: true,\n    rubberNode: true,\n    modifiers: 'shift',\n    rubberband: true,\n  }),\n)\n\n// 节点状态列表\nconst nodeStatusList = [\n  {\n    id: 'node-0',\n    status: 'success',\n  },\n  {\n    id: 'node-1',\n    status: 'success',\n  },\n  {\n    id: 'node-2',\n    status: 'success',\n  },\n  {\n    id: 'node-3',\n    status: 'success',\n  },\n  {\n    id: 'node-4',\n    status: 'error',\n    statusMsg: '错误信息示例',\n  },\n]\n\n// 边状态列表\nconst edgeStatusList = [\n  {\n    id: 'edge-0',\n    status: 'success',\n  },\n  {\n    id: 'edge-1',\n    status: 'success',\n  },\n  {\n    id: 'edge-2',\n    status: 'success',\n  },\n  {\n    id: 'edge-3',\n    status: 'success',\n  },\n]\n\n// 显示节点状态\nconst showNodeStatus = () => {\n  nodeStatusList.forEach((item) => {\n    const { id, status, statusMsg } = item\n    const node = graph.getCellById(id)\n    const data = (node.getData() || {}) as ProcessingNodeData\n    node.setData({\n      ...data,\n      status,\n      statusMsg,\n    })\n  })\n}\n\n// 开启边的运行动画\nconst excuteAnimate = () => {\n  graph.getEdges().forEach((edge) => {\n    edge.attr({\n      line: {\n        stroke: '#3471F9',\n      },\n    })\n    edge.attr('line/strokeDasharray', 5)\n    edge.attr('line/style/animation', 'running-line 30s infinite linear')\n  })\n}\n\n// 关闭边的动画\nconst stopAnimate = () => {\n  graph.getEdges().forEach((edge) => {\n    edge.attr('line/strokeDasharray', 0)\n    edge.attr('line/style/animation', '')\n  })\n  edgeStatusList.forEach((item) => {\n    const { id, status } = item\n    const edge = graph.getCellById(id)\n    if (status === 'success') {\n      edge.attr('line/stroke', '#52c41a')\n    }\n    if (status === 'error') {\n      edge.attr('line/stroke', '#ff4d4f')\n    }\n  })\n  // 默认选中一个节点\n  graph.select('node-2')\n}\n\nfetch('/data/data-processing-dag.json')\n  .then((response) => response.json())\n  .then((data) => {\n    graph.fromJSON(data)\n    const zoomOptions = {\n      padding: {\n        left: 10,\n        right: 10,\n      },\n    }\n    graph.zoomToFit(zoomOptions)\n    setTimeout(() => {\n      excuteAnimate()\n    }, 2000)\n    setTimeout(() => {\n      showNodeStatus()\n      stopAnimate()\n    }, 3000)\n  })\n\ninsertCss(`\n  .data-processing-dag-node {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  }\n\n  .main-area {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 12px;\n    width: 180px;\n    height: 48px;\n    color: rgba(0, 0, 0, 65%);\n    font-size: 12px;\n    font-family: PingFangSC;\n    line-height: 24px;\n    background-color: #fff;\n    box-shadow: 0 -1px 4px 0 rgba(209, 209, 209, 50%), 1px 1px 4px 0 rgba(217, 217, 217, 50%);\n    border-radius: 2px;\n    border: 1px solid transparent;\n  }\n  .main-area:hover {\n    border: 1px solid rgba(0, 0, 0, 10%);\n    box-shadow: 0 -2px 4px 0 rgba(209, 209, 209, 50%), 2px 2px 4px 0 rgba(217, 217, 217, 50%);\n  }\n\n  .node-logo {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 100%;\n  }\n\n  .node-name {\n    overflow: hidden;\n    display: inline-block;\n    width: 70px;\n    margin-left: 6px;\n    color: rgba(0, 0, 0, 65%);\n    font-size: 12px;\n    font-family: PingFangSC;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    vertical-align: top;\n  }\n\n  .status-action {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  }\n\n  .status-icon {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n  }\n\n  .status-icon-error {\n    background: url('https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*SEISQ6My-HoAAAAAAAAAAAAAARQnAQ')\n      no-repeat center center / 100% 100%;\n  }\n\n  .status-icon-success {\n    background: url('https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*6l60T6h8TTQAAAAAAAAAAAAAARQnAQ')\n      no-repeat center center / 100% 100%;\n  }\n\n  .more-action-container {\n    margin-left: 12px;\n    width: 15px;\n    height: 15px;\n    text-align: center;\n    cursor: pointer;\n  }\n\n  .more-action {\n    display: inline-block;\n    width: 3px;\n    height: 15px;\n    background: url('https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*tFw7SIy-ttQAAAAAAAAAAAAADtOHAQ/original')\n      no-repeat center center / 100% 100%;\n  }\n\n  .plus-dag {\n    visibility: hidden;\n    position: relative;\n    margin-left: 12px;\n    height: 48px;\n  }\n\n  .plus-action {\n    position: absolute;\n    top: calc(50% - 8px);\n    left: 0;\n    width: 16px;\n    height: 16px;\n    background: url('https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*ScX2R4ODfokAAAAAAAAAAAAADtOHAQ/original')\n      no-repeat center center / 100% 100%;\n    cursor: pointer;\n  }\n  .plus-action:hover {\n    background-image: url('https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*tRaoS5XhsuQAAAAAAAAAAAAADtOHAQ/original');\n  }\n\n  .plus-action:active,\n  .plus-action-selected {\n    background-image: url('https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*k9cnSaSmlw4AAAAAAAAAAAAADtOHAQ/original');\n  }\n\n  .x6-node-selected .main-area {\n    border-color: #3471f9;\n  }\n\n  .x6-node-selected .plus-dag {\n    visibility: visible;\n  }\n\n  .processing-node-menu {\n    padding: 2px 0;\n    width: 105px;\n    background-color: #fff;\n    box-shadow: 0 9px 28px 8px rgba(0, 0, 0, 5%), 0 6px 16px 0 rgba(0, 0, 0, 8%),\n      0 3px 6px -4px rgba(0, 0, 0, 12%);\n    border-radius: 2px;\n  }\n  .processing-node-menu ul {\n    margin: 0;\n    padding: 0;\n  }\n  .processing-node-menu li {\n    list-style:none;\n  }\n\n  .each-sub-menu {\n    padding: 6px 12px;\n    width: 100%;\n  }\n\n  .each-sub-menu:hover {\n    background-color: rgba(0, 0, 0, 4%);\n  }\n\n  .each-sub-menu a {\n    display: inline-block;\n    width: 100%;\n    height: 16px;\n    font-family: PingFangSC;\n    font-weight: 400;\n    font-size: 12px;\n    color: rgba(0, 0, 0, 65%);\n  }\n\n  .each-sub-menu span {\n    margin-left: 8px;\n    vertical-align: top;\n  }\n\n  .each-disabled-sub-menu a {\n    cursor: not-allowed;\n      color: rgba(0, 0, 0, 35%);\n  }\n\n  .node-mini-logo {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 100%;\n    vertical-align: top;\n  }\n\n  @keyframes running-line {\n    to {\n      stroke-dashoffset: -1000;\n    }\n  }\n`)\n",title:{zh:"数据加工 DAG 图",en:"DAG for Data Processing"},filename:"dataProcessingDag.tsx",isNew:!1},{id:"er",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*v60ER6NVzCQAAAAAT1AAAAgAemJ7AQ/original",source:"import React from 'react'\nimport { Graph, Node, Edge } from '@antv/x6'\nimport insertCss from 'insert-css'\nimport { register } from '@antv/x6-react-shape'\n\n// 类型定义\ninterface TableField {\n  name: string\n  type: string\n  keyType?: 'primary' | 'foreign' | 'unique'\n  ref?: { table: string; field: string }\n  defaultValue?: string\n}\n\ninterface TableNodeData {\n  id: string\n  name: string\n  fields: TableField[]\n}\n\ninterface RelationshipData {\n  type: '1:1' | '1:N' | 'N:N'\n}\n\n// 图标映射\nconst ICONS: Record<NonNullable<TableField['keyType']>, string> = {\n  primary: '🔑',\n  foreign: '🔗',\n  unique: '⭐',\n}\n\n// React节点组件\nconst ERTableNode = React.memo(({ node }: { node: Node }) => {\n  const { name, fields = [] } = node.getData<TableNodeData>()\n  const height = 36 + fields.length * 24 + 12\n\n  return (\n    <div className=\"er-table\" style={{ height }}>\n      <div className=\"er-table-header\">{name}</div>\n      <div className=\"er-table-fields\">\n        {fields.length === 0 ? (\n          <div className=\"er-table-empty\">No fields</div>\n        ) : (\n          fields.map((field, i) => (\n            <div\n              key={field.name}\n              className={`er-table-field ${i % 2 === 0 ? 'even' : 'odd'} ${\n                field.keyType || ''\n              }`}\n            >\n              <span className=\"er-field-icon\">\n                {field.keyType ? ICONS[field.keyType] : ''}\n              </span>\n              <span className=\"er-field-name\">{field.name}</span>\n              <span className=\"er-field-type\">{field.type}</span>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  )\n})\n\n// 注册节点\nregister({\n  shape: 'er-table',\n  width: 240,\n  height: 300,\n  component: ERTableNode,\n  effect: ['data'],\n  ports: {\n    // 连接点配置\n    groups: {\n      top: {\n        position: 'top',\n        attrs: {\n          circle: { r: 4, magnet: true, stroke: '#1890ff', fill: '#fff' },\n        },\n      },\n      right: {\n        position: 'right',\n        attrs: {\n          circle: { r: 4, magnet: true, stroke: '#1890ff', fill: '#fff' },\n        },\n      },\n      bottom: {\n        position: 'bottom',\n        attrs: {\n          circle: { r: 4, magnet: true, stroke: '#1890ff', fill: '#fff' },\n        },\n      },\n      left: {\n        position: 'left',\n        attrs: {\n          circle: { r: 4, magnet: true, stroke: '#1890ff', fill: '#fff' },\n        },\n      },\n    },\n    items: [\n      { id: 'top', group: 'top' },\n      { id: 'right', group: 'right' },\n      { id: 'bottom', group: 'bottom' },\n      { id: 'left', group: 'left' },\n    ],\n  },\n})\n\n// 注销边，防止重复注册报错\nGraph.unregisterEdge('er-relationship')\n// 注册边\nGraph.registerEdge('er-relationship', {\n  inherit: 'edge',\n  attrs: {\n    line: {\n      stroke: '#666',\n      strokeWidth: 2,\n      targetMarker: { name: 'classic', size: 8 },\n    },\n  },\n  labels: [\n    {\n      attrs: {\n        text: { text: '1:1', fill: '#666', fontSize: 12, fontWeight: 'bold' },\n        rect: { fill: '#fff', stroke: '#666', rx: 3, ry: 3 },\n      },\n    },\n  ],\n})\n\n// 图配置\nconst graph: Graph = new Graph({\n  container: document.getElementById('container')!,\n  background: { color: '#f8f9fa' },\n  grid: { visible: true, type: 'dot', args: { color: '#e0e0e0' } },\n  mousewheel: { enabled: true, modifiers: 'ctrl', minScale: 0.3, maxScale: 2 },\n  panning: { enabled: true, eventTypes: ['leftMouseDown', 'rightMouseDown'] },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    allowMulti: false,\n    highlight: true,\n    router: { name: 'manhattan' },\n    connector: { name: 'rounded', args: { radius: 8 } },\n    createEdge: (): Edge =>\n      graph.createEdge({\n        shape: 'er-relationship',\n        data: { type: '1:1' } as RelationshipData,\n        labels: [{ attrs: { text: { text: '1:1' } } }],\n      }),\n    validateMagnet: ({ magnet }) => magnet.getAttribute('port-group') !== null,\n  },\n})\n\n// 工具函数\nconst transformToGraphData = (tables: TableNodeData[]) => {\n  const layout = { cols: 2, nodeWidth: 240, spacing: 100 }\n  return tables.reduce(\n    (acc, table, index) => {\n      const row = Math.floor(index / layout.cols)\n      const col = index % layout.cols\n      const height = 36 + table.fields.length * 24 + 12\n\n      acc.nodes.push({\n        id: table.id,\n        shape: 'er-table',\n        x: col * (layout.nodeWidth + layout.spacing),\n        y: row * (height + layout.spacing),\n        width: layout.nodeWidth,\n        height,\n        data: table,\n      })\n\n      table.fields.forEach((field) => {\n        if (field.keyType === 'foreign' && field.ref) {\n          acc.edges.push({\n            id: `${table.id}-${field.ref.table}-${field.name}`,\n            shape: 'er-relationship',\n            source: { cell: table.id, port: 'right' },\n            target: { cell: field.ref.table, port: 'left' },\n            data: { type: '1:N' } as RelationshipData,\n            labels: [{ attrs: { text: { text: '1:N' } } }],\n          })\n        }\n      })\n\n      return acc\n    },\n    { nodes: [] as Node[], edges: [] as any[] },\n  )\n}\n\nconst toggleRelationshipType = (edge: Edge) => {\n  const types: RelationshipData['type'][] = ['1:1', '1:N', 'N:N']\n  const current = edge.getData<RelationshipData>()?.type || '1:1'\n  const next = types[(types.indexOf(current) + 1) % types.length]\n\n  edge.setData({ ...edge.getData(), type: next })\n  edge.setLabels([\n    {\n      attrs: {\n        text: { text: next, fill: '#666', fontSize: 12, fontWeight: 'bold' },\n        rect: { fill: '#fff', stroke: '#666', rx: 3, ry: 3 },\n      },\n      position: 0.5,\n    },\n  ])\n}\n\n// 事件绑定\ngraph.on('edge:click', ({ edge, e }) => {\n  if (edge.shape === 'er-relationship') {\n    e.stopPropagation()\n    toggleRelationshipType(edge)\n  }\n})\n\ngraph.on('edge:mouseenter', ({ edge }) => {\n  if (edge.shape === 'er-relationship') {\n    edge.attr('line/stroke', '#1890ff')\n    edge.addTools([\n      {\n        name: 'button-remove',\n        args: {\n          distance: -40,\n          markup: [\n            {\n              tagName: 'circle',\n              selector: 'button',\n              attrs: {\n                r: 8,\n                fill: '#ff4d4f',\n                stroke: '#fff',\n                strokeWidth: 2,\n                cursor: 'pointer',\n              },\n            },\n            {\n              tagName: 'text',\n              selector: 'icon',\n              textContent: '×',\n              attrs: {\n                fill: '#fff',\n                fontSize: 12,\n                fontWeight: 'bold',\n                textAnchor: 'middle',\n                dominantBaseline: 'central',\n              },\n            },\n          ],\n        },\n      },\n    ])\n  }\n})\n\ngraph.on('edge:mouseleave', ({ edge }) => {\n  edge.attr('line/stroke', '#666')\n  edge.removeTools()\n})\n\n// 初始化\nconst initializeGraph = async () => {\n  const response = await fetch('/data/er.json')\n  const { nodes, edges } = transformToGraphData(await response.json())\n  graph.addNodes(nodes)\n  graph.addEdges(edges)\n\n  graph.centerContent()\n}\n\ninitializeGraph()\n\nexport default function ERDiagram() {\n  return <div id=\"container\" style={{ width: '100%', height: '100vh' }} />\n}\n\n// 样式\ninsertCss(`\n  .er-table {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n    border: 2px solid #1890ff;\n    border-radius: 8px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    transition: all 0.3s ease;\n  }\n\n  .er-table:hover {\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n  }\n\n  .er-table-header {\n    background: linear-gradient(135deg, #1890ff 0%, #096dd9 100%);\n    color: white;\n    padding: 8px 12px;\n    font-weight: 600;\n    font-size: 13px;\n    text-align: center;\n    border-radius: 6px 6px 0 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 6px;\n  }\n\n  .er-table-fields {\n    flex: 1;\n    overflow: hidden;\n    border-radius: 0 0 6px 6px;\n  }\n  .er-table-empty { padding: 20px; text-align: center; color: #999; font-style: italic; }\n\n  .er-table-field {\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    font-size: 11px;\n    border-bottom: 1px solid #e8e8e8;\n    transition: background-color 0.2s ease;\n  }\n\n  .er-table-field:hover { background-color: #f5f5f5; }\n  .er-table-field.even { background-color: #fafafa; }\n  .er-table-field:last-child {\n    border-bottom: none;\n    border-radius: 0 0 6px 6px;\n  }\n  .er-table-field.primary { background-color: #e6f7ff; }\n  .er-table-field.foreign { background-color: #fff7e6; }\n  .er-table-field.unique { background-color: #f6ffed; }\n\n  .er-field-icon { margin-right: 4px; font-size: 10px; }\n  .er-field-name { flex: 1; font-weight: 500; color: #262626; }\n  .er-field-type { color: #666; font-family: 'Monaco', 'Menlo', monospace; font-size: 10px; }\n  .er-field-not-null { color: #ff4d4f; font-size: 9px; font-weight: bold; margin-left: 4px; }\n\n  .x6-port-body { opacity: 0; transition: opacity 0.2s ease; }\n  .x6-node:hover .x6-port-body { opacity: 1; }\n  .x6-port-body circle { fill: #fff; stroke: #1890ff; stroke-width: 2; cursor: crosshair; r: 8; }\n  .x6-port:hover .x6-port-body circle { fill: #e6f7ff; stroke: #40a9ff; stroke-width: 3; r: 10; }\n  .x6-port-available .x6-port-body circle { fill: #f6ffed; stroke: #52c41a; stroke-width: 3; r: 10; }\n  .x6-edge:hover path:nth-child(2) { stroke: #1890ff; }\n`)\n",title:{zh:"ER 图",en:"ER"},filename:"er.tsx",isNew:!1},{id:"mindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*GsEGSaBkc84AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Cell, Node, Path, Keyboard, Selection } from '@antv/x6'\nimport Hierarchy from '@antv/hierarchy'\nimport insertCss from 'insert-css'\n\n// 中心主题或分支主题\nGraph.registerNode(\n  'topic',\n  {\n    inherit: 'rect',\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n        selector: 'img',\n      },\n      {\n        tagName: 'text',\n        selector: 'label',\n      },\n    ],\n    attrs: {\n      body: {\n        rx: 6,\n        ry: 6,\n        stroke: '#5F95FF',\n        fill: '#EFF4FF',\n        strokeWidth: 1,\n      },\n      img: {\n        ref: 'body',\n        refX: '100%',\n        refY: '50%',\n        refY2: -8,\n        width: 16,\n        height: 16,\n        'xlink:href':\n          'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*SYCuQ6HHs5cAAAAAAAAAAAAAARQnAQ',\n        event: 'add:topic',\n        class: 'topic-image',\n      },\n      label: {\n        fontSize: 14,\n        fill: '#262626',\n      },\n    },\n  },\n  true,\n)\n\n// 子主题\nGraph.registerNode(\n  'topic-child',\n  {\n    inherit: 'rect',\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'text',\n        selector: 'label',\n      },\n      {\n        tagName: 'path',\n        selector: 'line',\n      },\n    ],\n    attrs: {\n      body: {\n        fill: '#ffffff',\n        strokeWidth: 0,\n        stroke: '#5F95FF',\n      },\n      label: {\n        fontSize: 14,\n        fill: '#262626',\n        textVerticalAnchor: 'bottom',\n      },\n      line: {\n        stroke: '#5F95FF',\n        strokeWidth: 2,\n        d: 'M 0 15 L 60 15',\n      },\n    },\n  },\n  true,\n)\n\n// 连接器\nGraph.registerConnector(\n  'mindmap',\n  (sourcePoint, targetPoint, routerPoints, options) => {\n    const midX = sourcePoint.x + 10\n    const midY = sourcePoint.y\n    const ctrX = (targetPoint.x - midX) / 5 + midX\n    const ctrY = targetPoint.y\n    const pathData = `\n     M ${sourcePoint.x} ${sourcePoint.y}\n     L ${midX} ${midY}\n     Q ${ctrX} ${ctrY} ${targetPoint.x} ${targetPoint.y}\n    `\n    return options.raw ? Path.parse(pathData) : pathData\n  },\n  true,\n)\n\n// 边\nGraph.registerEdge(\n  'mindmap-edge',\n  {\n    inherit: 'edge',\n    connector: {\n      name: 'mindmap',\n    },\n    attrs: {\n      line: {\n        targetMarker: '',\n        stroke: '#A2B1C3',\n        strokeWidth: 2,\n      },\n    },\n    zIndex: 0,\n  },\n  true,\n)\n\ninterface MindMapData {\n  id: string\n  type: 'topic' | 'topic-branch' | 'topic-child'\n  label: string\n  width: number\n  height: number\n  children?: MindMapData[]\n}\n\ninterface HierarchyResult {\n  id: string\n  x: number\n  y: number\n  data: MindMapData\n  children?: HierarchyResult[]\n}\n\nconst data: MindMapData = {\n  id: '1',\n  type: 'topic',\n  label: '中心主题',\n  width: 160,\n  height: 50,\n  children: [\n    {\n      id: '1-1',\n      type: 'topic-branch',\n      label: '分支主题1',\n      width: 100,\n      height: 40,\n      children: [\n        {\n          id: '1-1-1',\n          type: 'topic-child',\n          label: '子主题1',\n          width: 60,\n          height: 30,\n        },\n        {\n          id: '1-1-2',\n          type: 'topic-child',\n          label: '子主题2',\n          width: 60,\n          height: 30,\n        },\n      ],\n    },\n    {\n      id: '1-2',\n      type: 'topic-branch',\n      label: '分支主题2',\n      width: 100,\n      height: 40,\n    },\n  ],\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  connecting: {\n    connectionPoint: 'anchor',\n  },\n})\n\ngraph.use(new Selection())\ngraph.use(new Keyboard())\n\nconst render = () => {\n  const result: HierarchyResult = Hierarchy.mindmap(data, {\n    direction: 'H',\n    getHeight(d: MindMapData) {\n      return d.height\n    },\n    getWidth(d: MindMapData) {\n      return d.width\n    },\n    getHGap() {\n      return 40\n    },\n    getVGap() {\n      return 20\n    },\n    getSide: () => {\n      return 'right'\n    },\n  })\n  const cells: Cell[] = []\n  const traverse = (hierarchyItem: HierarchyResult) => {\n    if (hierarchyItem) {\n      const { data, children } = hierarchyItem\n      cells.push(\n        graph.createNode({\n          id: data.id,\n          shape: data.type === 'topic-child' ? 'topic-child' : 'topic',\n          x: hierarchyItem.x,\n          y: hierarchyItem.y,\n          width: data.width,\n          height: data.height,\n          label: data.label,\n          type: data.type,\n        }),\n      )\n      if (children) {\n        children.forEach((item: HierarchyResult) => {\n          const { id, data } = item\n          cells.push(\n            graph.createEdge({\n              shape: 'mindmap-edge',\n              source: {\n                cell: hierarchyItem.id,\n                anchor:\n                  data.type === 'topic-child'\n                    ? {\n                        name: 'right',\n                        args: {\n                          dx: -16,\n                        },\n                      }\n                    : {\n                        name: 'center',\n                        args: {\n                          dx: '25%',\n                        },\n                      },\n              },\n              target: {\n                cell: id,\n                anchor: {\n                  name: 'left',\n                },\n              },\n            }),\n          )\n          traverse(item)\n        })\n      }\n    }\n  }\n  traverse(result)\n  graph.resetCells(cells)\n  graph.centerContent()\n}\n\nconst findItem = (\n  obj: MindMapData,\n  id: string,\n): {\n  parent: MindMapData | null\n  node: MindMapData | null\n} | null => {\n  if (obj.id === id) {\n    return {\n      parent: null,\n      node: obj,\n    }\n  }\n  const { children } = obj\n  if (children) {\n    for (let i = 0, len = children.length; i < len; i += 1) {\n      const res = findItem(children[i], id)\n      if (res) {\n        return {\n          parent: res.parent || obj,\n          node: res.node,\n        }\n      }\n    }\n  }\n  return null\n}\n\nconst addChildNode = (id: string, type: NodeType) => {\n  const res = findItem(data, id)\n  const dataItem = res?.node\n  if (dataItem) {\n    let item: MindMapData | null = null\n    const length = dataItem.children ? dataItem.children.length : 0\n    if (type === 'topic') {\n      item = {\n        id: `${id}-${length + 1}`,\n        type: 'topic-branch',\n        label: `分支主题${length + 1}`,\n        width: 100,\n        height: 40,\n      }\n    } else if (type === 'topic-branch') {\n      item = {\n        id: `${id}-${length + 1}`,\n        type: 'topic-child',\n        label: `子主题${length + 1}`,\n        width: 60,\n        height: 30,\n      }\n    }\n    if (item) {\n      if (dataItem.children) {\n        dataItem.children.push(item)\n      } else {\n        dataItem.children = [item]\n      }\n      return item\n    }\n  }\n  return null\n}\n\nconst removeNode = (id: string) => {\n  const res = findItem(data, id)\n  const dataItem = res?.parent\n  if (dataItem && dataItem.children) {\n    const { children } = dataItem\n    const index = children.findIndex((item) => item.id === id)\n    return children.splice(index, 1)\n  }\n  return null\n}\n\ngraph.on('add:topic', ({ node }: { node: Node }) => {\n  const { id } = node\n  const type = node.prop('type')\n  if (addChildNode(id, type)) {\n    render()\n  }\n})\ngraph.bindKey(['backspace', 'delete'], () => {\n  const selectedNodes = graph.getSelectedCells().filter((item) => item.isNode())\n  if (selectedNodes.length) {\n    const { id } = selectedNodes[0]\n    if (removeNode(id)) {\n      render()\n    }\n  }\n})\n\ngraph.bindKey('tab', (e) => {\n  e.preventDefault()\n  const selectedNodes = graph.getSelectedCells().filter((item) => item.isNode())\n  if (selectedNodes.length) {\n    const node = selectedNodes[0]\n    const type = node.prop('type')\n    if (addChildNode(node.id, type)) {\n      render()\n    }\n  }\n})\n\nrender()\n\ninsertCss(`\n  .topic-image {\n    visibility: hidden;\n    cursor: pointer;\n  }\n  .x6-node:hover .topic-image {\n    visibility: visible;\n  }\n  .x6-node-selected rect {\n    stroke-width: 2px;\n  }\n`)\n",title:{zh:"思维导图",en:"MindMap"},filename:"mindmap.ts",isNew:!1},{id:"bpmn",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*q6X4RbYDXpAAAAAAUNAAAAgAemJ7AQ/original",source:"import { type Cell, type CellView, Graph, type Node } from '@antv/x6'\n\nfunction registerGateway(name: string, symbol: string) {\n  Graph.registerNode(\n    name,\n    {\n      inherit: 'polygon',\n      attrs: {\n        body: {\n          refPoints: '0,10 10,0 20,10 10,20',\n          strokeWidth: 2,\n          stroke: '#5F95FF',\n          fill: '#EFF4FF',\n        },\n        label: {\n          text: symbol,\n          fontSize: 32,\n          fontWeight: 'bold',\n          fill: '#5F95FF',\n        },\n      },\n    },\n    true,\n  )\n}\n\nGraph.registerNode(\n  'event',\n  {\n    inherit: 'circle',\n    attrs: {\n      body: {\n        strokeWidth: 2,\n        stroke: '#5F95FF',\n        fill: '#FFF',\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'start-event',\n  {\n    inherit: 'circle',\n    attrs: {\n      body: {\n        strokeWidth: 2,\n        stroke: '#52C41A',\n        fill: '#FFF',\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'end-event',\n  {\n    inherit: 'circle',\n    attrs: {\n      body: {\n        strokeWidth: 4,\n        stroke: '#FF4D4F',\n        fill: '#FFF',\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'activity',\n  {\n    inherit: 'rect',\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n        selector: 'img',\n      },\n      {\n        tagName: 'text',\n        selector: 'label',\n      },\n    ],\n    attrs: {\n      body: {\n        rx: 6,\n        ry: 6,\n        stroke: '#5F95FF',\n        fill: '#EFF4FF',\n        strokeWidth: 1,\n      },\n      img: {\n        x: 6,\n        y: 6,\n        width: 16,\n        height: 16,\n        'xlink:href':\n          'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ',\n      },\n      label: {\n        fontSize: 12,\n        fill: '#262626',\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'subprocess',\n  {\n    inherit: 'rect',\n    markup: [\n      { tagName: 'rect', selector: 'body' },\n      { tagName: 'text', selector: 'label' },\n      { tagName: 'image', selector: 'badge' },\n      { tagName: 'text', selector: 'expand' },\n      { tagName: 'text', selector: 'details' },\n    ],\n    attrs: {\n      body: {\n        rx: 6,\n        ry: 6,\n        stroke: '#5F95FF',\n        fill: '#FAFBFF',\n        strokeWidth: 1,\n      },\n      label: {\n        ref: 'body',\n        refX: '50%',\n        refY: '50%',\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontSize: 12,\n        fill: '#262626',\n      },\n      badge: {\n        ref: 'body',\n        refX: 0,\n        refY: 0,\n        x: 6,\n        y: 6,\n        width: 16,\n        height: 16,\n        'xlink:href':\n          'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pwLpRr7QPGwAAAAAAAAAAAAAARQnAQ',\n      },\n      expand: {\n        ref: 'body',\n        refX: '100%',\n        refY: '100%',\n        x: -8,\n        y: -8,\n        textVerticalAnchor: 'bottom',\n        textAnchor: 'end',\n        fontSize: 16,\n        fontWeight: 'bold',\n        fill: '#5F95FF',\n        cursor: 'pointer',\n        text: '+',\n        event: 'subproc:toggle',\n      },\n      details: {\n        ref: 'body',\n        refX: '50%',\n        refY: 44,\n        y: 0,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'top',\n        fontSize: 12,\n        fill: '#8C8C8C',\n        display: 'none',\n        textWrap: {\n          width: -24,\n        },\n        text: '',\n      },\n    },\n  },\n  true,\n)\n\nregisterGateway('gateway-parallel', '⨁')\nregisterGateway('gateway-exclusive', '×')\n\nGraph.registerNode(\n  'lane',\n  {\n    inherit: 'rect',\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'rect',\n        selector: 'name-rect',\n      },\n      {\n        tagName: 'text',\n        selector: 'name-text',\n      },\n    ],\n    attrs: {\n      body: {\n        fill: '#FFF',\n        stroke: '#5F95FF',\n        strokeWidth: 1,\n      },\n      'name-rect': {\n        width: 240,\n        height: 30,\n        fill: '#5F95FF',\n        stroke: '#fff',\n        strokeWidth: 0,\n      },\n      'name-text': {\n        ref: 'name-rect',\n        refY: 0.5,\n        refX: 0.5,\n        textAnchor: 'middle',\n        fontWeight: 'bold',\n        fill: '#fff',\n        fontSize: 12,\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerEdge(\n  'bpmn-edge',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        stroke: '#A2B1C3',\n        strokeWidth: 2,\n        targetMarker: 'classic',\n      },\n    },\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container') as HTMLElement,\n  grid: true,\n  connecting: {\n    router: 'orth',\n  },\n  mousewheel: true,\n  translating: {\n    restrict(this: Graph, cellView: CellView | null) {\n      if (cellView?.cell?.isNode()) {\n        const cell = cellView.cell as Node\n        if (cell.shape === 'lane') {\n          return this.transform.getGraphArea()\n        }\n        const parentId = cell.prop('parent')\n        if (parentId) {\n          const parentNode = this.getCellById(parentId)\n          if (parentNode?.isNode()) {\n            return parentNode.getBBox().moveAndExpand({\n              x: 0,\n              y: 30,\n              width: 0,\n              height: -30,\n            })\n          }\n        }\n        return this.transform.getGraphArea()\n      }\n      return this.transform.getGraphArea()\n    },\n  },\n})\n\ngraph.on('subproc:toggle', ({ node }: { node: Node }) => {\n  if (!node || node.shape !== 'subprocess') return\n\n  const data = node.getData() || {}\n  const expanded = !!data.expanded\n  const next = !expanded\n\n  node.attr('expand/text', next ? '-' : '+')\n  node.attr('details/display', next ? 'block' : 'none')\n\n  const defaultDetails = '1、病例证明（如有）\\n2、工作 backup'\n  const rawDetails = data.details\n  const detailsText = rawDetails\n    ? Array.isArray(rawDetails)\n      ? rawDetails.join('\\n')\n      : String(rawDetails)\n    : defaultDetails\n  if (next) {\n    node.attr('details/text', detailsText)\n  }\n\n  const lines = String(detailsText).split(/\\n/).length\n  const size = node.getSize()\n  const expandedHeight = Math.max(70, 40 + lines * 18 + 24)\n  node.size(size.width, next ? expandedHeight : 70)\n\n  if (next) {\n    node.attr({\n      label: { textVerticalAnchor: 'top', refY: 18, refX: '50%', ref: 'body' },\n      details: {\n        textVerticalAnchor: 'top',\n        refY: 40,\n        refX: '50%',\n        ref: 'body',\n      },\n    })\n  } else {\n    node.attr('label', {\n      textVerticalAnchor: 'middle',\n      refY: '50%',\n      refX: '50%',\n      ref: 'body',\n    })\n  }\n\n  node.setData({ ...data, expanded: next })\n})\n\nfetch('/data/bpmn.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const cells: Cell[] = []\n    const nodeMap: Record<string, Node> = {}\n\n    data.forEach((item: any) => {\n      if (item.shape !== 'bpmn-edge') {\n        const node = graph.createNode(item)\n        nodeMap[item.id] = node as Node\n        cells.push(node)\n      }\n    })\n\n    data.forEach((item: any) => {\n      if (item.shape === 'bpmn-edge') {\n        const edge = graph.createEdge(item)\n        if (item.label) {\n          edge.setLabels([\n            {\n              attrs: {\n                label: {\n                  text: item.label,\n                  fill: '#8C8C8C',\n                  fontSize: 11,\n                },\n              },\n            },\n          ])\n        }\n        const sourceId = edge.getSourceCellId()\n        const targetId = edge.getTargetCellId()\n        const sParent = nodeMap[sourceId]?.prop('parent')\n        const tParent = nodeMap[targetId]?.prop('parent')\n        if (sParent && tParent && sParent !== tParent) {\n          edge.attr('line/strokeDasharray', '5,5')\n        }\n        cells.push(edge)\n      }\n    })\n    graph.resetCells(cells)\n\n    Object.values(nodeMap).forEach((node) => {\n      const parentId = node.prop('parent') as string | undefined\n      if (parentId) {\n        const parentNode = nodeMap[parentId]\n        if (parentNode) {\n          parentNode.addChild(node)\n        }\n      }\n    })\n\n    Object.values(nodeMap).forEach((node) => {\n      if (node.shape === 'activity' && node.prop('parent') === 'lane-system') {\n        node.attr(\n          'img/xlink:href',\n          'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*mUotQqntWJQAAAAAF_AAAAgAemJ7AQ/original',\n        )\n      }\n    })\n\n    graph.zoomToFit({ padding: 10, maxScale: 1 })\n  })\n",title:{zh:"BPMN",en:"BPMN"},filename:"bpmn.ts",isNew:!1},{id:"elk",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*Z3ebTKy0w9cAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Cell } from '@antv/x6'\nimport ELK, { ElkNode, ElkEdge, ElkExtendedEdge } from 'elkjs'\n\nGraph.registerNode(\n  'elk-node',\n  {\n    inherit: 'rect',\n    attrs: {\n      body: {\n        fill: '#EFF4FF',\n        stroke: '#5F95FF',\n        strokeWidth: 1,\n      },\n      label: {\n        refX: 0,\n        refY: -4,\n        textAnchor: 'start',\n        textVerticalAnchor: 'bottom',\n        fontSize: 10,\n      },\n    },\n    ports: {\n      groups: {\n        port: {\n          position: {\n            name: 'absolute',\n          },\n          attrs: {\n            portBody: {\n              magnet: 'passive',\n              fill: '#5F95FF',\n              refWidth: '100%',\n              refHeight: '100%',\n            },\n          },\n          markup: [\n            {\n              tagName: 'rect',\n              selector: 'portBody',\n            },\n          ],\n        },\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerEdge(\n  'elk-edge',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        stroke: '#A2B1C3',\n        strokeWidth: 1,\n        targetMarker: {\n          name: 'block',\n          width: 4,\n          height: 4,\n        },\n      },\n    },\n  },\n  true,\n)\n\ninterface Position {\n  x: number\n  y: number\n}\n\nconst portIdToNodeIdMap: Record<string, string> = {}\nconst cells: Cell[] = []\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  interacting: false,\n})\n\nconst elk = new ELK()\n\nconst addChildren = (children: ElkNode[], pos?: Position) => {\n  children.forEach((child) => {\n    const position = {\n      x: (child.x || 0) + (pos ? pos.x : 0),\n      y: (child.y || 0) + (pos ? pos.y : 0),\n    }\n    let label: string = ''\n    if (typeof child.labels === 'string') {\n      label = child.labels\n    } else if (Array.isArray(child.labels) && child.labels[0]) {\n      label = child.labels[0].text\n    }\n    const node = graph.createNode({\n      shape: 'elk-node',\n      id: child.id,\n      position,\n      label,\n      size: {\n        width: child.width || 0,\n        height: child.height || 0,\n      },\n      ports: {\n        items: (child.ports || []).map((item) => {\n          portIdToNodeIdMap[item.id] = child.id\n          return {\n            id: item.id,\n            group: 'port',\n            args: {\n              x: item.x,\n              y: item.y,\n            },\n            size: {\n              width: item.width || 0,\n              height: item.height || 0,\n            },\n          }\n        }),\n      },\n    })\n\n    cells.push(node)\n\n    if (child.children) {\n      addChildren(child.children, position)\n    }\n\n    if (child.edges) {\n      addEdges(child.edges, position)\n    }\n  })\n}\n\nconst addEdges = (edges: ElkEdge[], pos?: Position) => {\n  edges.forEach((edge: ElkExtendedEdge) => {\n    const { bendPoints = [] } = edge.sections[0]\n\n    if (pos) {\n      bendPoints.map((bendPoint: Position) => {\n        bendPoint.x += pos.x\n        bendPoint.y += pos.y\n      })\n    }\n\n    const sourcePortId = edge.sources[0]\n    const targetPortId = edge.targets[0]\n    const sourceNodeId = portIdToNodeIdMap[sourcePortId]\n    const targetNodeId = portIdToNodeIdMap[targetPortId]\n\n    cells.push(\n      graph.createEdge({\n        shape: 'elk-edge',\n        source: {\n          cell: sourceNodeId,\n          port: sourcePortId,\n        },\n        target: {\n          cell: targetNodeId,\n          port: targetPortId,\n        },\n        vertices: bendPoints,\n      }),\n    )\n  })\n}\n\nfetch('/data/elkdata.json')\n  .then((response) => response.json())\n  .then((data) => {\n    elk.layout(data).then((res) => {\n      addChildren(res.children || [])\n      addEdges(res.edges || [])\n      graph.resetCells(cells)\n      graph.zoomToFit({\n        padding: 20,\n        maxScale: 1,\n      })\n    })\n  })\n",title:{zh:"ELK",en:"ELK"},filename:"elk.ts",isNew:!1},{id:"org",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*FWx5SYDzLw4AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node, Point } from '@antv/x6'\n\nGraph.registerNode(\n  'org-node',\n  {\n    width: 180,\n    height: 60,\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n        selector: 'avatar',\n      },\n      {\n        tagName: 'text',\n        selector: 'rank',\n      },\n      {\n        tagName: 'text',\n        selector: 'name',\n      },\n    ],\n    attrs: {\n      body: {\n        refWidth: '100%',\n        refHeight: '100%',\n        fill: '#5F95FF',\n        stroke: '#5F95FF',\n        strokeWidth: 1,\n        rx: 10,\n        ry: 10,\n        pointerEvents: 'visiblePainted',\n      },\n      avatar: {\n        width: 48,\n        height: 48,\n        refX: 8,\n        refY: 6,\n      },\n      rank: {\n        refX: 0.9,\n        refY: 0.2,\n        fill: '#fff',\n        fontFamily: 'Courier New',\n        fontSize: 14,\n        textAnchor: 'end',\n        textDecoration: 'underline',\n      },\n      name: {\n        refX: 0.9,\n        refY: 0.6,\n        fill: '#fff',\n        fontFamily: 'Courier New',\n        fontSize: 14,\n        fontWeight: '800',\n        textAnchor: 'end',\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerEdge(\n  'org-edge',\n  {\n    zIndex: -1,\n    attrs: {\n      line: {\n        fill: 'none',\n        strokeLinejoin: 'round',\n        strokeWidth: 2,\n        stroke: '#A2B1C3',\n        sourceMarker: null,\n        targetMarker: null,\n      },\n    },\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  connecting: {\n    anchor: 'orth',\n  },\n})\n\nfunction member(\n  x: number,\n  y: number,\n  rank: string,\n  name: string,\n  image: string,\n) {\n  return graph.addNode({\n    x,\n    y,\n    shape: 'org-node',\n    attrs: {\n      avatar: {\n        opacity: 0.7,\n        'xlink:href': image,\n      },\n      rank: {\n        text: rank,\n        wordSpacing: '-5px',\n        letterSpacing: 0,\n      },\n      name: {\n        text: name,\n        fontSize: 13,\n        fontFamily: 'Arial',\n        letterSpacing: 0,\n      },\n    },\n  })\n}\n\nfunction link(source: Node, target: Node, vertices: Point.PointLike[]) {\n  return graph.addEdge({\n    vertices,\n    source: {\n      cell: source,\n    },\n    target: {\n      cell: target,\n    },\n    shape: 'org-edge',\n  })\n}\n\nconst male =\n  'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*kUy8SrEDp6YAAAAAAAAAAAAAARQnAQ'\nconst female =\n  'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*f6hhT75YjkIAAAAAAAAAAAAAARQnAQ'\n\nconst bart = member(300, 70, 'CEO', 'Bart Simpson', male)\nconst homer = member(90, 200, 'VP Marketing', 'Homer Simpson', male)\nconst marge = member(300, 200, 'VP Sales', 'Marge Simpson', female)\nconst lisa = member(500, 200, 'VP Production', 'Lisa Simpson', female)\nconst maggie = member(400, 350, 'Manager', 'Maggie Simpson', female)\nconst lenny = member(190, 350, 'Manager', 'Lenny Leonard', male)\nconst carl = member(190, 500, 'Manager', 'Carl Carlson', male)\n\nlink(bart, marge, [\n  {\n    x: 385,\n    y: 180,\n  },\n])\nlink(bart, homer, [\n  {\n    x: 385,\n    y: 180,\n  },\n  {\n    x: 175,\n    y: 180,\n  },\n])\nlink(bart, lisa, [\n  {\n    x: 385,\n    y: 180,\n  },\n  {\n    x: 585,\n    y: 180,\n  },\n])\nlink(homer, lenny, [\n  {\n    x: 175,\n    y: 380,\n  },\n])\nlink(homer, carl, [\n  {\n    x: 175,\n    y: 530,\n  },\n])\nlink(marge, maggie, [\n  {\n    x: 385,\n    y: 380,\n  },\n])\n\ngraph.zoomToFit({ padding: 20, maxScale: 1 })\n",title:{zh:"组织架构图",en:"Organizational Charts"},filename:"org.ts",isNew:!1},{id:"orgchart",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*-1_wQ6zLmMYAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Cell, Node, Dom } from '@antv/x6'\nimport dagre from 'dagre'\nimport insertCss from 'insert-css'\n\n// 定义样式\ninsertCss(`\n  .x6-cell {\n    cursor: default;\n  }\n  .x6-node .btn {\n    cursor: pointer;\n  }\n`)\n\n// 自定义节点\nGraph.registerNode(\n  'org-node',\n  {\n    width: 260,\n    height: 88,\n    markup: [\n      {\n        tagName: 'rect',\n        attrs: {\n          class: 'card',\n        },\n      },\n      {\n        tagName: 'image',\n        attrs: {\n          class: 'image',\n        },\n      },\n      {\n        tagName: 'text',\n        attrs: {\n          class: 'rank',\n        },\n      },\n      {\n        tagName: 'text',\n        attrs: {\n          class: 'name',\n        },\n      },\n      {\n        tagName: 'g',\n        attrs: {\n          class: 'btn add',\n        },\n        children: [\n          {\n            tagName: 'circle',\n            attrs: {\n              class: 'add',\n            },\n          },\n          {\n            tagName: 'text',\n            attrs: {\n              class: 'add',\n            },\n          },\n        ],\n      },\n      {\n        tagName: 'g',\n        attrs: {\n          class: 'btn del',\n        },\n        children: [\n          {\n            tagName: 'circle',\n            attrs: {\n              class: 'del',\n            },\n          },\n          {\n            tagName: 'text',\n            attrs: {\n              class: 'del',\n            },\n          },\n        ],\n      },\n    ],\n    attrs: {\n      '.card': {\n        rx: 10,\n        ry: 10,\n        refWidth: '100%',\n        refHeight: '100%',\n        fill: '#5F95FF',\n        stroke: '#5F95FF',\n        strokeWidth: 1,\n        pointerEvents: 'visiblePainted',\n      },\n      '.image': {\n        x: 16,\n        y: 16,\n        width: 56,\n        height: 56,\n        opacity: 0.7,\n      },\n      '.rank': {\n        refX: 0.95,\n        refY: 0.5,\n        fill: '#fff',\n        fontFamily: 'Courier New',\n        fontSize: 13,\n        textAnchor: 'end',\n        textVerticalAnchor: 'middle',\n      },\n      '.name': {\n        refX: 0.95,\n        refY: 0.7,\n        fill: '#fff',\n        fontFamily: 'Arial',\n        fontSize: 14,\n        fontWeight: '600',\n        textAnchor: 'end',\n      },\n      '.btn.add': {\n        refDx: -16,\n        refY: 16,\n        event: 'node:add',\n      },\n      '.btn.del': {\n        refDx: -44,\n        refY: 16,\n        event: 'node:delete',\n      },\n      '.btn > circle': {\n        r: 10,\n        fill: 'transparent',\n        stroke: '#fff',\n        strokeWidth: 1,\n      },\n      '.btn.add > text': {\n        fontSize: 20,\n        fontWeight: 800,\n        fill: '#fff',\n        x: -5.5,\n        y: 7,\n        fontFamily: 'Times New Roman',\n        text: '+',\n      },\n      '.btn.del > text': {\n        fontSize: 28,\n        fontWeight: 500,\n        fill: '#fff',\n        x: -4.5,\n        y: 6,\n        fontFamily: 'Times New Roman',\n        text: '-',\n      },\n    },\n  },\n  true,\n)\n\n// 自定义边\nGraph.registerEdge(\n  'org-edge',\n  {\n    zIndex: -1,\n    attrs: {\n      line: {\n        strokeWidth: 2,\n        stroke: '#A2B1C3',\n        sourceMarker: null,\n        targetMarker: null,\n      },\n    },\n  },\n  true,\n)\n\nconst male =\n  'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*kUy8SrEDp6YAAAAAAAAAAAAAARQnAQ'\nconst female =\n  'https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*f6hhT75YjkIAAAAAAAAAAAAAARQnAQ'\n// 布局方向\nconst dir = 'LR' // LR RL TB BT\n\n// 创建画布\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  scroller: true,\n  interacting: false,\n})\n\n// 监听自定义事件\nfunction setup() {\n  graph.on('node:add', ({ e, node }) => {\n    e.stopPropagation()\n    const member = createNode(\n      'Employee',\n      'New Employee',\n      Math.random() < 0.5 ? male : female,\n    )\n    graph.addCell([member, createEdge(node, member)])\n    layout()\n  })\n\n  graph.on('node:delete', ({ e, node }) => {\n    e.stopPropagation()\n    graph.removeCell(node)\n    layout()\n  })\n}\n\n// 自动布局\nfunction layout() {\n  const nodes = graph.getNodes()\n  const edges = graph.getEdges()\n  const g = new dagre.graphlib.Graph()\n  g.setGraph({ rankdir: dir, nodesep: 16, ranksep: 16 })\n  g.setDefaultEdgeLabel(() => ({}))\n\n  const width = 260\n  const height = 90\n  nodes.forEach((node) => {\n    g.setNode(node.id, { width, height })\n  })\n\n  edges.forEach((edge) => {\n    const source = edge.getSource()\n    const target = edge.getTarget()\n    g.setEdge(source.cell, target.cell)\n  })\n\n  dagre.layout(g)\n\n  g.nodes().forEach((id) => {\n    const node = graph.getCellById(id) as Node\n    if (node) {\n      const pos = g.node(id)\n      node.position(pos.x, pos.y)\n    }\n  })\n\n  edges.forEach((edge) => {\n    const source = edge.getSourceNode()!\n    const target = edge.getTargetNode()!\n    const sourceBBox = source.getBBox()\n    const targetBBox = target.getBBox()\n\n    if ((dir === 'LR' || dir === 'RL') && sourceBBox.y !== targetBBox.y) {\n      const gap =\n        dir === 'LR'\n          ? targetBBox.x - sourceBBox.x - sourceBBox.width\n          : -sourceBBox.x + targetBBox.x + targetBBox.width\n      const fix = dir === 'LR' ? sourceBBox.width : 0\n      const x = sourceBBox.x + fix + gap / 2\n      edge.setVertices([\n        { x, y: sourceBBox.center.y },\n        { x, y: targetBBox.center.y },\n      ])\n    } else if (\n      (dir === 'TB' || dir === 'BT') &&\n      sourceBBox.x !== targetBBox.x\n    ) {\n      const gap =\n        dir === 'TB'\n          ? targetBBox.y - sourceBBox.y - sourceBBox.height\n          : -sourceBBox.y + targetBBox.y + targetBBox.height\n      const fix = dir === 'TB' ? sourceBBox.height : 0\n      const y = sourceBBox.y + fix + gap / 2\n      edge.setVertices([\n        { x: sourceBBox.center.x, y },\n        { x: targetBBox.center.x, y },\n      ])\n    } else {\n      edge.setVertices([])\n    }\n  })\n}\n\nfunction createNode(rank: string, name: string, image: string) {\n  return graph.createNode({\n    shape: 'org-node',\n    attrs: {\n      '.image': { xlinkHref: image },\n      '.rank': {\n        text: Dom.breakText(rank, { width: 160, height: 45 }),\n      },\n      '.name': {\n        text: Dom.breakText(name, { width: 160, height: 45 }),\n      },\n    },\n  })\n}\n\nfunction createEdge(source: Cell, target: Cell) {\n  return graph.createEdge({\n    shape: 'org-edge',\n    source: { cell: source.id },\n    target: { cell: target.id },\n  })\n}\n\nconst nodes = [\n  createNode('Founder & Chairman', 'Pierre Omidyar', male),\n  createNode('President & CEO', 'Margaret C. Whitman', female),\n  createNode('President, PayPal', 'Scott Thompson', male),\n  createNode('President, Ebay Global Marketplaces', 'Devin Wenig', male),\n  createNode('Senior Vice President Human Resources', 'Jeffrey S. Skoll', male),\n  createNode('Senior Vice President Controller', 'Steven P. Westly', male),\n]\n\nconst edges = [\n  createEdge(nodes[0], nodes[1]),\n  createEdge(nodes[1], nodes[2]),\n  createEdge(nodes[1], nodes[3]),\n  createEdge(nodes[1], nodes[4]),\n  createEdge(nodes[1], nodes[5]),\n]\n\ngraph.resetCells([...nodes, ...edges])\nlayout()\ngraph.zoomTo(0.8)\ngraph.centerContent()\nsetup()\n",title:{zh:"组织架构图（自动布局）",en:"Organizational Charts"},filename:"orgchart.ts",isNew:!1},{id:"class",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*OaCpR7t_mVoAAAAAAAAAAAAAARQnAQ",source:"import { Graph, ObjectExt, Cell } from '@antv/x6'\n\n// #region 注册基础图形\nGraph.registerNode(\n  'class',\n  {\n    inherit: 'rect',\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'rect',\n        selector: 'name-rect',\n      },\n      {\n        tagName: 'rect',\n        selector: 'attrs-rect',\n      },\n      {\n        tagName: 'rect',\n        selector: 'methods-rect',\n      },\n      {\n        tagName: 'text',\n        selector: 'name-text',\n      },\n      {\n        tagName: 'text',\n        selector: 'attrs-text',\n      },\n      {\n        tagName: 'text',\n        selector: 'methods-text',\n      },\n    ],\n    attrs: {\n      rect: {\n        width: 160,\n      },\n      body: {\n        stroke: '#fff',\n      },\n      'name-rect': {\n        fill: '#5f95ff',\n        stroke: '#fff',\n        strokeWidth: 0.5,\n      },\n      'attrs-rect': {\n        fill: '#eff4ff',\n        stroke: '#fff',\n        strokeWidth: 0.5,\n      },\n      'methods-rect': {\n        fill: '#eff4ff',\n        stroke: '#fff',\n        strokeWidth: 0.5,\n      },\n      'name-text': {\n        ref: 'name-rect',\n        refY: 0.5,\n        refX: 0.5,\n        textAnchor: 'middle',\n        fontWeight: 'bold',\n        fill: '#fff',\n        fontSize: 12,\n      },\n      'attrs-text': {\n        ref: 'attrs-rect',\n        refY: 0.5,\n        refX: 5,\n        textAnchor: 'left',\n        fill: 'black',\n        fontSize: 10,\n      },\n      'methods-text': {\n        ref: 'methods-rect',\n        refY: 0.5,\n        refX: 5,\n        textAnchor: 'left',\n        fill: 'black',\n        fontSize: 10,\n      },\n    },\n    propHooks(meta) {\n      const { name, attributes, methods, ...others } = meta\n\n      if (!(name && attributes && methods)) {\n        return meta\n      }\n\n      const rects = [\n        { type: 'name', text: name },\n        { type: 'attrs', text: attributes },\n        { type: 'methods', text: methods },\n      ]\n\n      let offsetY = 0\n      rects.forEach((rect) => {\n        const height = rect.text.length * 12 + 16\n        ObjectExt.setByPath(\n          others,\n          `attrs/${rect.type}-text/text`,\n          rect.text.join('\\n'),\n        )\n        ObjectExt.setByPath(others, `attrs/${rect.type}-rect/height`, height)\n        ObjectExt.setByPath(\n          others,\n          `attrs/${rect.type}-rect/transform`,\n          'translate(0,' + offsetY + ')',\n        )\n        offsetY += height\n      })\n\n      others.size = { width: 160, height: offsetY }\n\n      return others\n    },\n  },\n  true,\n)\n\n// 继承\nGraph.registerEdge(\n  'extends',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        strokeWidth: 1,\n        targetMarker: {\n          name: 'path',\n          d: 'M 20 0 L 0 10 L 20 20 z',\n          fill: 'white',\n          offsetX: -10,\n        },\n      },\n    },\n  },\n  true,\n)\n\n// 实现\nGraph.registerEdge(\n  'implement',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        strokeWidth: 1,\n        strokeDasharray: '3,3',\n        targetMarker: {\n          name: 'path',\n          d: 'M 20 0 L 0 10 L 20 20 z',\n          fill: 'white',\n          offsetX: -10,\n        },\n      },\n    },\n  },\n  true,\n)\n\n// 组合\nGraph.registerEdge(\n  'composition',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        strokeWidth: 1,\n        sourceMarker: {\n          name: 'path',\n          d: 'M 30 10 L 20 16 L 10 10 L 20 4 z',\n          fill: 'black',\n          offsetX: -10,\n        },\n        targetMarker: {\n          name: 'path',\n          d: 'M 6 10 L 18 4 C 14.3333 6 10.6667 8 7 10 L 18 16 z',\n          fill: 'black',\n          offsetX: -5,\n        },\n      },\n    },\n  },\n  true,\n)\n\n// 聚合\nGraph.registerEdge(\n  'aggregation',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        strokeWidth: 1,\n        sourceMarker: {\n          name: 'path',\n          d: 'M 30 10 L 20 16 L 10 10 L 20 4 z',\n          fill: 'white',\n          offsetX: -10,\n        },\n        targetMarker: {\n          name: 'path',\n          d: 'M 6 10 L 18 4 C 14.3333 6 10.6667 8 7 10 L 18 16 z',\n          fill: 'black',\n          offsetX: -5,\n        },\n      },\n    },\n  },\n  true,\n)\n\n// 关联\nGraph.registerEdge(\n  'association',\n  {\n    inherit: 'edge',\n    attrs: {\n      line: {\n        strokeWidth: 1,\n        targetMarker: {\n          name: 'path',\n          d: 'M 6 10 L 18 4 C 14.3333 6 10.6667 8 7 10 L 18 16 z',\n          fill: 'black',\n          offsetX: -5,\n        },\n      },\n    },\n  },\n  true,\n)\n// #endregion\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\nfetch('/data/class.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const cells: Cell[] = []\n    const edgeShapes = [\n      'extends',\n      'composition',\n      'implement',\n      'aggregation',\n      'association',\n    ]\n    data.forEach((item: any) => {\n      if (edgeShapes.includes(item.shape)) {\n        cells.push(graph.createEdge(item))\n      } else {\n        cells.push(graph.createNode(item))\n      }\n    })\n    graph.resetCells(cells)\n    graph.zoomToFit({ padding: 10, maxScale: 1 })\n  })\n",title:{zh:"UML 类图",en:"UML Class"},filename:"class.ts",isNew:!1},{id:"tree",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*XDnNRqnj4WkAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node, Edge, Shape } from '@antv/x6'\n\n// 定义节点\nclass TreeNode extends Node {\n  private collapsed: boolean = false\n\n  protected postprocess() {\n    this.toggleCollapse(false)\n  }\n\n  isCollapsed() {\n    return this.collapsed\n  }\n\n  toggleButtonVisibility(visible: boolean) {\n    this.attr('buttonGroup', {\n      display: visible ? 'block' : 'none',\n    })\n  }\n\n  toggleCollapse(collapsed?: boolean) {\n    const target = collapsed == null ? !this.collapsed : collapsed\n    if (!target) {\n      this.attr('buttonSign', {\n        d: 'M 1 5 9 5 M 5 1 5 9',\n        strokeWidth: 1.6,\n      })\n    } else {\n      this.attr('buttonSign', {\n        d: 'M 2 5 8 5',\n        strokeWidth: 1.8,\n      })\n    }\n    this.collapsed = target\n  }\n}\n\nTreeNode.config({\n  zIndex: 2,\n  markup: [\n    {\n      tagName: 'g',\n      selector: 'buttonGroup',\n      children: [\n        {\n          tagName: 'rect',\n          selector: 'button',\n          attrs: {\n            'pointer-events': 'visiblePainted',\n          },\n        },\n        {\n          tagName: 'path',\n          selector: 'buttonSign',\n          attrs: {\n            fill: 'none',\n            'pointer-events': 'none',\n          },\n        },\n      ],\n    },\n    {\n      tagName: 'rect',\n      selector: 'body',\n    },\n    {\n      tagName: 'text',\n      selector: 'label',\n    },\n  ],\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      strokeWidth: 1,\n      fill: '#EFF4FF',\n      stroke: '#5F95FF',\n    },\n    label: {\n      textWrap: {\n        ellipsis: true,\n        width: -10,\n      },\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n      refX: '50%',\n      refY: '50%',\n      fontSize: 12,\n    },\n    buttonGroup: {\n      refX: '100%',\n      refY: '50%',\n    },\n    button: {\n      fill: '#5F95FF',\n      stroke: 'none',\n      x: -10,\n      y: -10,\n      height: 20,\n      width: 30,\n      rx: 10,\n      ry: 10,\n      cursor: 'pointer',\n      event: 'node:collapse',\n    },\n    buttonSign: {\n      refX: 5,\n      refY: -5,\n      stroke: '#FFFFFF',\n      strokeWidth: 1.6,\n    },\n  },\n})\n\n// 定义边\nclass TreeEdge extends Shape.Edge {\n  isHidden() {\n    const node = this.getTargetNode() as TreeNode\n    return !node || !node.isVisible()\n  }\n}\n\nTreeEdge.config({\n  zIndex: 1,\n  attrs: {\n    line: {\n      stroke: '#A2B1C3',\n      strokeWidth: 1,\n      targetMarker: null,\n    },\n  },\n})\n\n// 注册\nNode.registry.register('tree-node', TreeNode, true)\nEdge.registry.register('tree-edge', TreeEdge, true)\n\n// 初始化画布\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  panning: true,\n  interacting: false,\n  connecting: {\n    anchor: 'orth',\n    connector: 'rounded',\n    connectionPoint: 'boundary',\n    router: {\n      name: 'er',\n      args: {\n        offset: 24,\n        direction: 'H',\n      },\n    },\n  },\n})\n\ngraph.on('node:collapse', ({ node }: { node: TreeNode }) => {\n  node.toggleCollapse()\n  const collapsed = node.isCollapsed()\n  const run = (pre: TreeNode) => {\n    const succ = graph.getSuccessors(pre, { distance: 1 })\n    if (succ) {\n      succ.forEach((node: TreeNode) => {\n        node.toggleVisible(!collapsed)\n        if (!node.isCollapsed()) {\n          run(node)\n        }\n      })\n    }\n  }\n  run(node)\n})\n\nfetch('/data/mindmap.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const nodes = data.nodes.map(({ leaf, ...metadata }: any) => {\n      const node = new TreeNode(metadata)\n      if (leaf) {\n        node.toggleButtonVisibility(leaf === false)\n      }\n      return node\n    })\n    const edges = data.edges.map(\n      (edge: any) =>\n        new TreeEdge({\n          source: edge.source,\n          target: edge.target,\n        }),\n    )\n\n    graph.resetCells([...nodes, ...edges])\n    graph.zoomToFit({ padding: 24 })\n  })\n",title:{zh:"展开/折叠树",en:"Expand/Collapse the Tree"},filename:"tree.ts",isNew:!1},{id:"virtualRender",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*dXlKS5AyvRYAAAAAYjAAAAgAemJ7AQ/original",source:"import { Graph, type Node, Scroller } from '@antv/x6'\nimport insertCss from 'insert-css'\n\nconst host = document.getElementById('container')!\nhost.classList.add('virtual-render')\n\nconst graph = new Graph({\n  container: host,\n  mousewheel: true,\n  // 开启虚拟渲染\n  virtual: true,\n  grid: true,\n})\n\ngraph.use(new Scroller({ enabled: true, pannable: true }))\n\nconst nodes: Node[] = []\nconst nodeWidth = 80\nconst nodeHeight = 30\nconst cols = 20\nconst spacingX = 120\nconst spacingY = 50\nconst count = 1000\nconst statuses = ['加载中…', '同步中…', '处理任务…', '拉取数据…', '发布中…']\nconst loaderVariants = [\n  'loader-dots',\n  'loader-bar',\n  'loader-wave',\n  'loader-glow',\n  'loader-ants',\n]\n\nfor (let i = 0; i < count; i++) {\n  const row = Math.floor(i / cols)\n  const col = i % cols\n  const x = 50 + col * spacingX\n  const y = 50 + row * spacingY\n\n  const node = graph.addNode({\n    x,\n    y,\n    width: nodeWidth,\n    height: nodeHeight,\n    position: { x, y },\n    attrs: {\n      label: {\n        text: statuses[i % statuses.length],\n        fill: '#0958D9',\n        fontSize: 12,\n      },\n      body: {\n        fill: i % 2 === 0 ? '#E6F4FF' : '#FFFFFF',\n        stroke: '#5f95ff',\n        strokeWidth: 1,\n        rx: 4,\n        ry: 4,\n        class: loaderVariants[i % loaderVariants.length],\n      },\n    },\n  })\n  nodes.push(node)\n}\n\nfor (let i = 0; i < count; i++) {\n  const col = i % cols\n  if (col < cols - 1 && i + 1 < nodes.length) {\n    graph.addEdge({\n      source: nodes[i],\n      target: nodes[i + 1],\n      attrs: {\n        line: {\n          stroke: '#91CAFF',\n          strokeWidth: 1,\n          strokeDasharray: '6 4',\n          class: 'marching-line',\n        },\n      },\n    })\n  }\n\n  const bottomIndex = i + cols\n  if (bottomIndex < nodes.length) {\n    graph.addEdge({\n      source: nodes[i],\n      target: nodes[bottomIndex],\n      attrs: {\n        line: {\n          stroke: '#91CAFF',\n          strokeWidth: 1,\n          strokeDasharray: '6 4',\n          class: 'marching-line',\n        },\n      },\n    })\n  }\n}\n\ninsertCss(`\n@keyframes ants { to { stroke-dashoffset: -100; } }\n@keyframes dotsFlow { to { stroke-dashoffset: -24; } }\n@keyframes progressSweep { to { stroke-dashoffset: -220; } }\n@keyframes waveWidth {\n  0%, 100% { stroke-width: 1; }\n  50% { stroke-width: 2.2; }\n}\n@keyframes glowFade {\n  0%, 100% { stroke-opacity: 0.8; }\n  50% { stroke-opacity: 0.45; }\n}\n\n.virtual-render .x6-edge path.marching-line {\n  animation: ants 6s linear infinite;\n}\n.virtual-render .x6-edge:hover path.marching-line {\n  stroke: #5f95ff;\n  stroke-width: 1.3px;\n}\n.virtual-render .x6-edge-selected path.marching-line {\n  stroke: #5f95ff;\n  stroke-width: 1.8px !important;\n}\n\n.virtual-render .x6-node rect.loader-dots {\n  transform-box: fill-box;\n  transform-origin: center;\n  stroke-dasharray: 2 6;\n  animation: dotsFlow 2.4s linear infinite;\n}\n.virtual-render .x6-node rect.loader-bar {\n  transform-box: fill-box;\n  transform-origin: center;\n  stroke-dasharray: 80 140;\n  animation: progressSweep 4.8s linear infinite;\n}\n.virtual-render .x6-node rect.loader-wave {\n  transform-box: fill-box;\n  transform-origin: center;\n  animation: waveWidth 3s ease-in-out infinite;\n}\n.virtual-render .x6-node rect.loader-glow {\n  transform-box: fill-box;\n  transform-origin: center;\n  animation: glowFade 2.8s ease-in-out infinite;\n}\n.virtual-render .x6-node rect.loader-ants {\n  transform-box: fill-box;\n  transform-origin: center;\n  stroke-dasharray: 6 4;\n  animation: ants 6s linear infinite;\n}\n\n.virtual-render .x6-node-selected rect {\n  stroke: #5f95ff;\n  stroke-width: 2px;\n}\n`)\n",title:{zh:"多节点虚拟渲染",en:"Virtual Rendering for Multiple Nodes"},filename:"virtualRender.ts",isNew:!1},{id:"selectionDrag",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kxWSSLKG_tIAAAAAbkAAAAgAemJ7AQ/original",source:"import { Graph, type Node, Selection } from '@antv/x6'\nimport insertCss from 'insert-css'\n\nconst host = document.getElementById('container')!\nhost.classList.add('selection-drag')\n\nconst graph = new Graph({\n  container: host,\n  grid: true,\n  mousewheel: {\n    enabled: true,\n    factor: 1.1,\n    minScale: 0.1,\n    maxScale: 2,\n  },\n  panning: false,\n})\n\ngraph.use(\n  new Selection({\n    rubberband: true,\n    multiple: true,\n    strict: true,\n    // 展示框选节点边框\n    showNodeSelectionBox: true,\n  }),\n)\n\nconst nodes: Node[] = []\nconst nodeWidth = 60\nconst nodeHeight = 30\nconst cols = 10\nconst spacingX = 90\nconst spacingY = 50\nconst count = 120\n\nfor (let i = 0; i < count; i++) {\n  const row = Math.floor(i / cols)\n  const col = i % cols\n  const x = 50 + col * spacingX\n  const y = 50 + row * spacingY\n\n  const node = graph.addNode({\n    x,\n    y,\n    width: nodeWidth,\n    height: nodeHeight,\n    attrs: {\n      label: {\n        text: `Node ${i + 1}`,\n        fontSize: 12,\n        fill: '#0958D9',\n      },\n      body: {\n        fill: i % 2 === 0 ? '#E6F4FF' : '#FFFFFF',\n        stroke: '#1677ff',\n        strokeWidth: 1,\n        rx: 4,\n        ry: 4,\n      },\n    },\n  })\n  nodes.push(node)\n}\n\nfor (let i = 0; i < count; i++) {\n  const col = i % cols\n\n  if (col < cols - 1) {\n    const rightIndex = i + 1\n    if (rightIndex < nodes.length) {\n      graph.addEdge({\n        source: nodes[i],\n        target: nodes[rightIndex],\n        attrs: {\n          line: {\n            stroke: '#91d5ff',\n            strokeWidth: 1,\n          },\n        },\n      })\n    }\n  }\n\n  const bottomIndex = i + cols\n  if (bottomIndex < nodes.length) {\n    graph.addEdge({\n      source: nodes[i],\n      target: nodes[bottomIndex],\n      attrs: {\n        line: {\n          stroke: '#91d5ff',\n          strokeWidth: 1,\n        },\n      },\n    })\n  }\n}\n\ninsertCss(`\n.selection-drag .x6-widget-selection-rubberband {\n  background-color: rgba(22, 119, 255, 0.12);\n  border: 1.5px solid #1677ff;\n  opacity: 1;\n}\n.selection-drag .x6-widget-selection-inner {\n  border: 2px solid #1677ff;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.06);\n}\n.selection-drag .x6-widget-selection-box {\n  border: 2px dashed #1677ff;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.06);\n}\n.selection-drag .x6-node-selected rect {\n  stroke: #1677ff;\n  stroke-width: 1.8px;\n}\n.selection-drag .x6-edge:hover path:nth-child(2){\n  stroke: #1677ff;\n}\n.selection-drag .x6-edge-selected path:nth-child(2){\n  stroke: #1677ff !important;\n  stroke-width: 1.8px !important;\n}\n`)\n",title:{zh:"框选批量拖拽多节点",en:"Batch Dragging Multiple Nodes with Selection"},filename:"selectionDrag.ts",isNew:!1},{id:"timeline",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*r57tRIroEtIAAAAARoAAAAgAemJ7AQ/original",source:"import { Graph, type Cell } from '@antv/x6'\nimport insertCss from 'insert-css'\n\npreWork()\n\n// 类型定义\ninterface TimelineEvent {\n  id: string\n  title: string\n  content: string\n  date: string\n  color: string\n  lightColor: string\n  type: 'normal' | 'milestone'\n}\n\n// 常量配置\nconst CONFIG = {\n  card: { width: 100, height: 80 },\n  marker: { diameter: 12 },\n  diamond: { size: 80 },\n  layout: { timelineY: 400, cardsY: 250, tipsGap: 160 },\n  timeline: { startX: 250, endX: 1850 },\n  text: { fontFamily: 'Inter, Helvetica, Arial, sans-serif' },\n}\n\nconst PORTS = {\n  groups: {\n    top: {\n      position: 'top',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#31d0c6',\n          fill: '#fff',\n          strokeWidth: 2,\n        },\n      },\n    },\n    bottom: {\n      position: 'bottom',\n      attrs: {\n        circle: {\n          r: 4,\n          magnet: true,\n          stroke: '#31d0c6',\n          fill: '#fff',\n          strokeWidth: 2,\n        },\n      },\n    },\n  },\n}\n\n// 滤镜配置\nconst FILTERS = {\n  card: [\n    'drop-shadow(0 6px 16px rgba(0,0,0,0.12))',\n    'drop-shadow(0 3px 6px rgba(0,0,0,0.06))',\n  ],\n  tips: [\n    'drop-shadow(0 6px 20px rgba(0,0,0,0.25))',\n    'drop-shadow(0 4px 12px rgba(0,0,0,0.15))',\n  ],\n  diamond: [\n    'drop-shadow(0 6px 20px rgba(65,105,225,0.5))',\n    'drop-shadow(0 4px 12px rgba(65,105,225,0.3))',\n  ],\n}\n\n// 注册节点\nGraph.registerNode(\n  'tips-node',\n  {\n    inherit: 'rect',\n    width: 200,\n    height: 140,\n    markup: [\n      { tagName: 'rect', selector: 'body' },\n      { tagName: 'rect', selector: 'header' },\n      { tagName: 'text', selector: 'headerText' },\n      { tagName: 'text', selector: 'line1' },\n      { tagName: 'text', selector: 'line2' },\n      { tagName: 'text', selector: 'line3' },\n      { tagName: 'text', selector: 'line4' },\n    ],\n    attrs: {\n      body: {\n        width: 200,\n        height: 140,\n        fill: '#FFFFFF',\n        stroke: 'none',\n        rx: 6,\n        ry: 6,\n        filter: FILTERS.tips[1],\n      },\n      header: {\n        width: 200,\n        height: 40,\n        fill: '#1a1a1a',\n        stroke: 'none',\n        rx: 6,\n        ry: 6,\n      },\n      headerText: {\n        refX: 100,\n        refY: 20,\n        text: 'Timeline',\n        fill: '#FFFFFF',\n        fontSize: 18,\n        fontWeight: 'bold',\n        textAnchor: 'middle',\n        dominantBaseline: 'middle',\n        ...CONFIG.text,\n      },\n      line1: {\n        refX: 16,\n        refY: 60,\n        text: 'A simple linear',\n        fill: '#666',\n        fontSize: 12,\n        textAnchor: 'start',\n        ...CONFIG.text,\n      },\n      line2: {\n        refX: 16,\n        refY: 78,\n        text: 'timeline showing',\n        fill: '#666',\n        fontSize: 12,\n        textAnchor: 'start',\n        ...CONFIG.text,\n      },\n      line3: {\n        refX: 16,\n        refY: 96,\n        text: 'events connected',\n        fill: '#666',\n        fontSize: 12,\n        textAnchor: 'start',\n        ...CONFIG.text,\n      },\n      line4: {\n        refX: 16,\n        refY: 114,\n        text: 'to horizontal axis.',\n        fill: '#666',\n        fontSize: 12,\n        textAnchor: 'start',\n        ...CONFIG.text,\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'event-card',\n  {\n    inherit: 'rect',\n    width: CONFIG.card.width,\n    height: CONFIG.card.height,\n    markup: [\n      { tagName: 'rect', selector: 'body' },\n      { tagName: 'text', selector: 'title' },\n      { tagName: 'text', selector: 'content' },\n    ],\n    attrs: {\n      body: {\n        width: CONFIG.card.width,\n        height: CONFIG.card.height,\n        fill: '#EFF4FF',\n        stroke: 'none',\n        rx: 4,\n        ry: 4,\n        filter: FILTERS.card[1],\n        cursor: 'move',\n      },\n      title: {\n        refX: '50%',\n        refY: 30,\n        fill: '#333',\n        fontSize: 14,\n        fontWeight: '600',\n        textAnchor: 'middle',\n        dominantBaseline: 'middle',\n        ...CONFIG.text,\n      },\n      content: {\n        refX: '50%',\n        refY: 50,\n        fill: '#666',\n        fontSize: 11,\n        textAnchor: 'middle',\n        dominantBaseline: 'middle',\n        ...CONFIG.text,\n      },\n    },\n    ports: PORTS,\n  },\n  true,\n)\n\nGraph.registerNode(\n  'diamond-milestone',\n  {\n    inherit: 'rect',\n    width: CONFIG.diamond.size,\n    height: CONFIG.diamond.size,\n    markup: [\n      { tagName: 'path', selector: 'body' },\n      { tagName: 'text', selector: 'label' },\n    ],\n    attrs: {\n      body: {\n        refD: 'M 40 0 L 80 40 L 40 80 L 0 40 Z',\n        fill: '#4169E1',\n        stroke: 'none',\n        filter: FILTERS.diamond[1],\n        cursor: 'move',\n      },\n      label: {\n        refX: '50%',\n        refY: '50%',\n        fill: '#FFF',\n        fontSize: 12,\n        fontWeight: '600',\n        textAnchor: 'middle',\n        dominantBaseline: 'middle',\n        ...CONFIG.text,\n      },\n    },\n    ports: {\n      groups: {\n        top: {\n          position: { name: 'absolute', args: { x: '50%', y: '0%' } },\n          attrs: PORTS.groups.top.attrs,\n        },\n        bottom: {\n          position: { name: 'absolute', args: { x: '50%', y: '100%' } },\n          attrs: PORTS.groups.bottom.attrs,\n        },\n      },\n    },\n  },\n  true,\n)\n\nGraph.registerNode(\n  'endpoint-label',\n  {\n    inherit: 'rect',\n    width: 100,\n    height: 40,\n    markup: [\n      { tagName: 'rect', selector: 'body' },\n      { tagName: 'text', selector: 'label' },\n    ],\n    attrs: {\n      body: {\n        width: 100,\n        height: 40,\n        fill: '#FFF',\n        stroke: '#555',\n        strokeWidth: 1,\n        rx: 4,\n        ry: 4,\n      },\n      label: {\n        refX: '50%',\n        refY: '50%',\n        fill: '#333',\n        fontSize: 14,\n        textAnchor: 'middle',\n        dominantBaseline: 'middle',\n        ...CONFIG.text,\n      },\n    },\n    ports: { groups: { top: PORTS.groups.top } },\n  },\n  true,\n)\n\n// 创建画布\nconst graph = new Graph({\n  container: document.getElementById('graph-container')!,\n  background: { color: '#FFF' },\n  grid: { size: 24, visible: true, args: { color: '#E0E0E0', thickness: 2 } },\n  panning: { enabled: true, eventTypes: ['leftMouseDown', 'mouseWheel'] },\n  mousewheel: {\n    enabled: true,\n    modifiers: 'ctrl',\n    factor: 1.1,\n    maxScale: 3,\n    minScale: 0.1,\n  },\n  connecting: {\n    anchor: 'center',\n    connectionPoint: 'anchor',\n    router: {\n      name: 'metro',\n      args: { startDirections: ['bottom'], endDirections: ['top'] },\n    },\n    connector: { name: 'rounded', args: { radius: 10 } },\n  },\n  interacting: { nodeMovable: true, edgeMovable: false },\n})\n\n// 工具函数\nconst createPorts = (id: string) => [\n  { id: `${id}-top`, group: 'top' },\n  { id: `${id}-bottom`, group: 'bottom' },\n]\n\nconst createEndpoint = (\n  id: string,\n  x: number,\n  label: string,\n  y = CONFIG.layout.timelineY,\n) => [\n  graph.createNode({\n    id: `${id}-anchor`,\n    shape: 'circle',\n    x: x - 8,\n    y: y - 8,\n    width: 16,\n    height: 16,\n    attrs: { body: { fill: '#000', stroke: 'none' } },\n    zIndex: 10,\n  }),\n  graph.createNode({\n    id: `${id}-label`,\n    shape: 'endpoint-label',\n    x: x - 50,\n    y: y + 20,\n    attrs: { label: { text: label } },\n    ports: [{ id: `${id}-label-top`, group: 'top' }],\n    zIndex: 2,\n  }),\n  graph.createEdge({\n    id: `${id}-connector`,\n    source: `${id}-anchor`,\n    target: { cell: `${id}-label`, port: `${id}-label-top` },\n    attrs: { line: { stroke: '#555', strokeWidth: 1.5, targetMarker: null } },\n    router: { name: 'orth', args: { padding: 1 } },\n    zIndex: 3,\n  }),\n]\n\n// 数据转换\nfunction transformTimelineData(data: TimelineEvent[]): Cell[] {\n  const cells: Cell[] = []\n  const { timeline, layout, card, marker, diamond } = CONFIG\n  const spacing = (timeline.endX - timeline.startX) / (data.length + 1)\n\n  // 时间轴主线\n  cells.push(\n    graph.createEdge({\n      id: 'timeline-main-axis',\n      source: { x: timeline.startX, y: layout.timelineY },\n      target: { x: timeline.endX, y: layout.timelineY },\n      attrs: { line: { stroke: '#AAA', strokeWidth: 2, targetMarker: null } },\n      zIndex: 5,\n    }),\n  )\n\n  // 端点\n  cells.push(...createEndpoint('start', timeline.startX, 'Start Point'))\n  cells.push(...createEndpoint('end', timeline.endX, 'End Point'))\n\n  // Tips\n  cells.push(\n    graph.createNode({\n      id: 'tips-node',\n      shape: 'tips-node',\n      x: timeline.startX - 100,\n      y: layout.timelineY - layout.tipsGap - 80,\n      zIndex: 20,\n    }),\n  )\n\n  // 事件\n  data.forEach((event, i) => {\n    const x = timeline.startX + (i + 1) * spacing\n\n    if (event.type === 'milestone') {\n      const dY = layout.cardsY - diamond.size - 20\n      const diamondId = `${event.id}-diamond`\n\n      cells.push(\n        graph.createNode({\n          id: diamondId,\n          shape: 'diamond-milestone',\n          x: x - diamond.size / 2,\n          y: dY,\n          attrs: {\n            body: { fill: event.color },\n            label: { text: event.title },\n          },\n          ports: createPorts(diamondId),\n          zIndex: 25,\n        }),\n        graph.createEdge({\n          id: `${event.id}-diamond-to-card`,\n          source: { cell: diamondId, port: `${diamondId}-bottom` },\n          target: { cell: `${event.id}-card`, port: `${event.id}-card-top` },\n          attrs: {\n            line: {\n              stroke: event.color,\n              strokeWidth: 2,\n              strokeDasharray: '4 4',\n              targetMarker: null,\n            },\n          },\n          router: { name: 'orth', args: { padding: 1 } },\n          connector: { name: 'rounded', args: { radius: 8 } },\n          zIndex: 20,\n        }),\n      )\n    }\n\n    cells.push(\n      graph.createNode({\n        id: `${event.id}-card`,\n        shape: 'event-card',\n        x: x - card.width / 2,\n        y: layout.cardsY,\n        attrs: {\n          body: { fill: event.lightColor },\n          title: { text: event.title },\n          content: { text: event.content },\n        },\n        ports: createPorts(`${event.id}-card`),\n        zIndex: 15,\n      }),\n      graph.createNode({\n        id: `${event.id}-marker`,\n        shape: 'circle',\n        x: x - marker.diameter / 2,\n        y: layout.timelineY - marker.diameter / 2,\n        width: marker.diameter,\n        height: marker.diameter,\n        attrs: { body: { fill: event.color, stroke: 'none' } },\n        zIndex: 8,\n      }),\n      graph.createEdge({\n        id: `${event.id}-card-to-marker`,\n        source: { cell: `${event.id}-card`, port: `${event.id}-card-bottom` },\n        target: { cell: `${event.id}-marker`, anchor: 'top' },\n        attrs: {\n          line: { stroke: '#888', strokeWidth: 1.5, targetMarker: null },\n        },\n        router: { name: 'orth', args: { padding: 1 } },\n        connector: { name: 'rounded', args: { radius: 8 } },\n        zIndex: 3,\n      }),\n    )\n  })\n\n  return cells\n}\n\n// 交互\ngraph.on('node:mouseenter', ({ node }) => {\n  const shape = node.shape\n  const id = node.id\n  if (shape === 'event-card') node.attr('body/filter', FILTERS.card[0])\n  else if (id === 'tips-node')\n    node.attr({ 'body/cursor': 'move', 'body/filter': FILTERS.tips[0] })\n  else if (shape === 'diamond-milestone')\n    node.attr('body/filter', FILTERS.diamond[0])\n  else if (id?.includes('-marker'))\n    node.attr('body/filter', `drop-shadow(0 0 8px ${node.attr('body/fill')})`)\n})\n\ngraph.on('node:mouseleave', ({ node }) => {\n  const shape = node.shape\n  const id = node.id\n  if (shape === 'event-card') node.attr('body/filter', FILTERS.card[1])\n  else if (id === 'tips-node') node.attr('body/filter', FILTERS.tips[1])\n  else if (shape === 'diamond-milestone')\n    node.attr('body/filter', FILTERS.diamond[1])\n  else if (id?.includes('-marker')) node.attr('body/filter', '')\n})\n\ngraph.on('edge:mouseenter', ({ edge }) => {\n  const id = edge.id\n  if (id?.includes('diamond-to-card')) edge.attr('line/strokeWidth', 3)\n  else if (\n    id?.includes('-connector') &&\n    !id.includes('start') &&\n    !id.includes('end')\n  )\n    edge.attr({ 'line/stroke': '#555', 'line/strokeWidth': 2 })\n})\n\ngraph.on('edge:mouseleave', ({ edge }) => {\n  const id = edge.id\n  if (id?.includes('diamond-to-card')) edge.attr('line/strokeWidth', 2)\n  else if (\n    id?.includes('-connector') &&\n    !id.includes('start') &&\n    !id.includes('end')\n  )\n    edge.attr({ 'line/stroke': '#888', 'line/strokeWidth': 1.5 })\n})\n\n// 自动缩放居中\nlet isFirstRender = true\ngraph.on('render:done', () => {\n  if (!isFirstRender) return\n  isFirstRender = false\n\n  graph.zoomToFit({ padding: 20, maxScale: 1 })\n  showGraph()\n})\n\nfunction showGraph() {\n  document.getElementById('graph-container')?.classList.add('graph-visible')\n}\n\n// 加载数据\nfetch('/data/timeline.json')\n  .then((r) => r.json())\n  .then((d) => graph.resetCells(transformTimelineData(d)))\n  .catch(() => console.error('数据加载失败'))\n\n// 预处理\nfunction preWork() {\n  const container = document.getElementById('container')\n  if (!container) return\n  const graphContainer = document.createElement('div')\n  graphContainer.id = 'graph-container'\n  container.appendChild(graphContainer)\n  insertCss(`\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    html, body { width: 100%; height: 100%; overflow: hidden; }\n    #container { width: 100vw; height: 100vh; background: #FFF; }\n    #graph-container { width: 100%; height: 100%; opacity: 0; transition: opacity 0.3s; }\n    #graph-container.graph-visible { opacity: 1; }\n  `)\n}\n",title:{zh:"简单时间轴",en:"timeline"},filename:"timeline.ts",isNew:!1},{id:"complexTimeline",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*MWQlQ5eCfq4AAAAASCAAAAgAemJ7AQ/original",source:"import { Graph, type Node, type Cell } from '@antv/x6'\nimport { register } from '@antv/x6-react-shape'\nimport insertCss from 'insert-css'\nimport React from 'react'\n\npreWork()\n\n// 类型定义\ninterface EventCard {\n  id: string\n  title: string\n  content: string\n}\n\ninterface Milestone {\n  id: string\n  headline: string\n  subtitle: string\n  date: string\n  color: string\n  lightColor: string\n  events: EventCard[]\n}\n\ninterface PyramidPosition {\n  x: number\n  y: number\n  row: number\n}\n\ninterface MilestoneColumnData {\n  headline: string\n  date: string\n  color: string\n  lineHeight: number\n}\n\n// 常量配置\nconst CONFIG = {\n  card: { width: 80, height: 104, gap: 16 },\n  layout: { columnSpacing: 40, cardsBottomOffset: 68, milestoneSpacing: 500 },\n  timeline: { y: 750, startX: 200, endX: 2200, height: 16 },\n  gradient: 'timeline-gradient',\n}\n\n// React 组件（使用 memo 优化）\nconst MilestoneColumn = React.memo(({ node }: { node: Node }) => {\n  const { headline, date, color, lineHeight } =\n    node.getData() as MilestoneColumnData\n\n  return React.createElement('div', { className: 'milestone-column' }, [\n    React.createElement('div', { className: 'milestone-top', key: 'top' }, [\n      React.createElement('div', {\n        className: 'milestone-big-dot',\n        key: 'dot',\n        style: { backgroundColor: color },\n      }),\n      React.createElement(\n        'div',\n        {\n          className: 'milestone-headline',\n          key: 'headline',\n          style: { color },\n        },\n        headline,\n      ),\n    ]),\n    React.createElement('div', {\n      className: 'milestone-spine',\n      key: 'spine',\n      style: { backgroundColor: color, height: `${lineHeight}px` },\n    }),\n    React.createElement(\n      'div',\n      { className: 'milestone-date', key: 'date' },\n      date,\n    ),\n  ])\n})\n\nconst SubtitleNode = React.memo(({ node }: { node: Node }) => {\n  const { subtitle } = node.getData() as { subtitle: string }\n  return React.createElement('div', { className: 'subtitle-text' }, subtitle)\n})\n\nconst EventCardNode = React.memo(({ node }: { node: Node }) => {\n  const { title, bgColor } = node.getData() as {\n    title: string\n    bgColor: string\n  }\n  return React.createElement(\n    'div',\n    { className: 'event-card-vertical', style: { backgroundColor: bgColor } },\n    React.createElement('div', { className: 'event-card-title' }, title),\n  )\n})\n\n// 注册节点\nregister({\n  shape: 'milestone-column-node',\n  width: 250,\n  height: 800,\n  effect: ['data'],\n  component: MilestoneColumn,\n})\n\nregister({\n  shape: 'subtitle-node',\n  width: 150,\n  height: 20,\n  effect: ['data'],\n  component: SubtitleNode,\n})\n\nregister({\n  shape: 'event-card-node',\n  width: CONFIG.card.width,\n  height: CONFIG.card.height,\n  effect: ['data'],\n  component: EventCardNode,\n})\n\n// 创建画布\nconst graph = new Graph({\n  container: document.getElementById('graph-container')!,\n  background: { color: '#FFFFFF' },\n  grid: { size: 24, visible: true, args: { color: '#E0E0E0', thickness: 2 } },\n  panning: { enabled: true, eventTypes: ['leftMouseDown', 'mouseWheel'] },\n  mousewheel: {\n    enabled: true,\n    modifiers: 'ctrl',\n    factor: 1.1,\n    maxScale: 3,\n    minScale: 0.1,\n  },\n  interacting: {\n    nodeMovable: (view) => view.cell.shape === 'event-card-node',\n    edgeMovable: false,\n  },\n})\n\n// 定义渐变色\ngraph.defineGradient({\n  type: 'linearGradient',\n  id: CONFIG.gradient,\n  attrs: { x1: '0%', y1: '0%', x2: '100%', y2: '0%' },\n  stops: [\n    { offset: '0%', color: '#8A2BE2' },\n    { offset: '33%', color: '#4169E1' },\n    { offset: '66%', color: '#FFD700' },\n    { offset: '100%', color: '#2E8B57' },\n  ],\n})\n\n// 工具函数：计算金字塔布局\nfunction calculatePyramidLayout(\n  totalCards: number,\n  startX: number,\n  timelineY: number,\n): { positions: PyramidPosition[]; topY: number } {\n  let totalRows = 0\n  let tempCount = 0\n  while (tempCount < totalCards) {\n    totalRows++\n    tempCount += totalRows\n  }\n\n  const rows: Array<{ y: number; count: number }> = []\n  let currentY = timelineY - CONFIG.layout.cardsBottomOffset\n  let cardIndex = 0\n\n  for (let row = totalRows; row >= 1; row--) {\n    const count = Math.min(row, totalCards - cardIndex)\n    if (count <= 0) break\n    const y = currentY - CONFIG.card.height\n    rows.push({ y, count })\n    cardIndex += count\n    currentY = y - CONFIG.card.gap\n  }\n\n  rows.reverse()\n\n  const positions: PyramidPosition[] = []\n  rows.forEach((row, rowIndex) => {\n    for (let col = 0; col < row.count; col++) {\n      positions.push({\n        x: startX + col * (CONFIG.card.width + CONFIG.card.gap),\n        y: row.y,\n        row: rowIndex + 1,\n      })\n    }\n  })\n\n  return {\n    positions,\n    topY:\n      rows.length > 0 ? rows[0].y : timelineY - CONFIG.layout.cardsBottomOffset,\n  }\n}\n\n// 工具函数：数据转换\nfunction transformTimelineData(data: Milestone[]): Cell[] {\n  const cells: Cell[] = []\n  const { timeline, layout } = CONFIG\n\n  // 时间轴主体\n  cells.push(\n    graph.createNode({\n      shape: 'rect',\n      x: timeline.startX,\n      y: timeline.y - timeline.height / 2,\n      width: timeline.endX - timeline.startX,\n      height: timeline.height,\n      attrs: {\n        body: {\n          fill: `url(#${CONFIG.gradient})`,\n          stroke: 'none',\n          rx: 8,\n          ry: 8,\n        },\n      },\n      zIndex: 5,\n    }),\n  )\n\n  // 时间轴端点\n  ;[timeline.startX, timeline.endX].forEach((x) => {\n    cells.push(\n      graph.createNode({\n        shape: 'circle',\n        x: x - 10,\n        y: timeline.y - 10,\n        width: 20,\n        height: 20,\n        attrs: { body: { fill: '#333333', stroke: 'none' } },\n        zIndex: 10,\n      }),\n    )\n  })\n\n  // 遍历里程碑\n  data.forEach((milestone, index) => {\n    const baseX = timeline.startX + 100 + index * layout.milestoneSpacing\n    const leftX = baseX\n    const rightX = baseX + layout.columnSpacing\n\n    const { positions, topY } = calculatePyramidLayout(\n      milestone.events.length,\n      rightX,\n      timeline.y,\n    )\n\n    const subtitleY = topY - 35\n    const headlineY = subtitleY - 45\n    const spineHeight = timeline.y - (headlineY + 34)\n    const columnHeight = timeline.y - headlineY + 40\n\n    // 里程碑列\n    cells.push(\n      graph.createNode({\n        id: `${milestone.id}-column`,\n        shape: 'milestone-column-node',\n        x: leftX - 125,\n        y: headlineY,\n        width: 250,\n        height: columnHeight,\n        data: {\n          headline: milestone.headline,\n          date: milestone.date,\n          color: milestone.color,\n          lineHeight: spineHeight,\n        },\n        zIndex: 3,\n      }),\n    )\n\n    // 时间轴圆点\n    cells.push(\n      graph.createNode({\n        id: `${milestone.id}-timeline-dot`,\n        shape: 'circle',\n        x: leftX - 9,\n        y: timeline.y - 9,\n        width: 18,\n        height: 18,\n        attrs: {\n          body: { fill: milestone.color, stroke: '#FFFFFF', strokeWidth: 2 },\n        },\n        zIndex: 15,\n      }),\n    )\n\n    // 副标题\n    cells.push(\n      graph.createNode({\n        shape: 'subtitle-node',\n        x: rightX,\n        y: subtitleY,\n        data: { subtitle: milestone.subtitle },\n        zIndex: 7,\n      }),\n    )\n\n    // 事件卡片\n    milestone.events.forEach((event, eventIndex) => {\n      const pos = positions[eventIndex]\n      cells.push(\n        graph.createNode({\n          id: event.id,\n          shape: 'event-card-node',\n          x: pos.x,\n          y: pos.y,\n          data: { title: event.title, bgColor: milestone.lightColor },\n          zIndex: 8,\n        }),\n      )\n    })\n  })\n\n  return cells\n}\n\n// 交互效果\ngraph.on('node:mouseenter', ({ node }) => {\n  if (node.shape === 'event-card-node') node.setZIndex(100)\n})\n\ngraph.on('node:mouseleave', ({ node }) => {\n  if (node.shape === 'event-card-node') node.setZIndex(8)\n})\n\n// 使用 render:done 钩子\nlet isFirstRender = true\ngraph.on('render:done', () => {\n  if (!isFirstRender) return\n  isFirstRender = false\n\n  graph.zoomToFit({ padding: 20, maxScale: 1 })\n  showGraph()\n})\n\nfunction showGraph() {\n  document.getElementById('graph-container')?.classList.add('graph-visible')\n}\n\n// 数据加载与渲染\nfetch('/data/complex-timeline.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const cells = transformTimelineData(data)\n    graph.resetCells(cells)\n  })\n  .catch(() => {\n    console.error('数据加载失败')\n  })\n\n// 预处理\nfunction preWork() {\n  const container = document.getElementById('container') as HTMLElement\n  if (!container) return\n\n  const graphContainer = document.createElement('div')\n  graphContainer.id = 'graph-container'\n  container.appendChild(graphContainer)\n\n  insertCss(`\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    html, body { width: 100%; height: 100%; overflow: hidden; }\n    #container { width: 100vw; height: 100vh; overflow: hidden; background: #FFFFFF; }\n    #graph-container {\n      width: 100%; height: 100%; background: #FFFFFF;\n      opacity: 0; transition: opacity 0.3s ease-in-out;\n      position: absolute; top: 0; left: 0;\n    }\n    #graph-container.graph-visible { opacity: 1; }\n\n    .milestone-column {\n      display: flex; flex-direction: column; align-items: center;\n      font-family: Inter, Helvetica, Arial, sans-serif;\n      width: 100%; height: 100%;\n    }\n    .milestone-top { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }\n    .milestone-big-dot { width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0; }\n    .milestone-headline { font-size: 18px; font-weight: 700; line-height: 1.2; white-space: nowrap; }\n    .milestone-spine { width: 2px; flex-shrink: 0; }\n    .milestone-date { font-size: 12px; color: #888888; text-align: center; margin-top: 30px; }\n\n    .subtitle-text { font-size: 13px; font-weight: 400; color: #888888; font-family: Inter, Helvetica, Arial, sans-serif; }\n\n    .event-card-vertical {\n      width: 100%; height: 100%; border-radius: 4px;\n      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.06);\n      display: flex; align-items: center; justify-content: center;\n      padding: 14px 8px; font-family: Inter, Helvetica, Arial, sans-serif;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      cursor: move;\n    }\n    .event-card-vertical:hover { box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12); }\n    .event-card-title {\n      font-size: 11px; color: #333333; text-align: center;\n      line-height: 1.4; word-break: break-word; pointer-events: none;\n    }\n  `)\n}\n",title:{zh:"复杂时间轴",en:"complexTimeline"},filename:"complexTimeline.ts",isNew:!1}],icon:"",id:"practices",title:{en:"Practices",zh:"使用场景"},api:null,childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"node",title:{zh:"节点",en:"Node"},icon:"shape",examples:[{demos:[{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*vCTjSJ41rnIAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// row 1\n// -----\ngraph.addNode({\n  x: 40,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'rect',\n})\n\ngraph.addNode({\n  x: 200,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 360,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n      rx: 10,\n      ry: 10,\n    },\n  },\n})\n\ngraph.addNode({\n  x: 520,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n      rx: 10,\n      ry: 10,\n    },\n  },\n})\n\n// row 2\n// -----\n\ngraph.addNode({\n  x: 40,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    label: {\n      refX: 8,\n      refY: 8,\n      textAnchor: 'start',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 200,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 8,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 360,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: 8,\n      refY: '100%',\n      refY2: -8,\n      textAnchor: 'start',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 520,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: 0.5,\n      refY: -4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\n// row 3\n// -----\n\ngraph.addNode({\n  x: 40,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    label: {\n      refX: 0.5,\n      refY: 8,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 200,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 0.5,\n      refY: 0.5,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 360,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: -8,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 520,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: '100%',\n      refX2: 4,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\n// row 4\n// -----\n\ngraph.addNode({\n  x: 40,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    label: {\n      refX: '100%',\n      refX2: -8,\n      refY: 8,\n      textAnchor: 'end',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 200,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: '100%',\n      refX2: -8,\n      refY: 0.5,\n      textAnchor: 'end',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 360,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: '100%',\n      refX2: -8,\n      refY: '100%',\n      refY2: -8,\n      textAnchor: 'end',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  x: 520,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'rect',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n      rx: 10,\n      ry: 10,\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: 4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n",title:{zh:"Rectangle",en:"Rectangle"},filename:"rect.ts",isNew:!1},{id:"ellipse",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*4d5lT5DQzgkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// row 1\n// -----\ngraph.addNode({\n  shape: 'ellipse',\n  x: 40,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 200,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 360,\n  y: 40,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 520,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n  },\n})\n\n// row 2\n// -----\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 40,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    label: {\n      refX: 16,\n      refY: 16,\n      textAnchor: 'start',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 200,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 16,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 360,\n  y: 140,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: 16,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'start',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 520,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: 0.5,\n      refY: -4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\n// row 3\n// -----\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 40,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    label: {\n      refX: 0.5,\n      refY: 16,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 200,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 0.5,\n      refY: 0.5,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 360,\n  y: 240,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 520,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: '100%',\n      refX2: 4,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\n// row 4\n// -----\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 40,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: 16,\n      textAnchor: 'end',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 200,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: 0.5,\n      textAnchor: 'end',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 360,\n  y: 340,\n  width: 120,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'end',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'ellipse',\n  x: 520,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'ellipse',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: 4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n",title:{zh:"Ellipse",en:"Ellipse"},filename:"ellipse.ts",isNew:!1},{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*tWKuQaqsaUgAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// row 1\n// -----\ngraph.addNode({\n  shape: 'circle',\n  x: 40,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'circle',\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 200,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 360,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 520,\n  y: 40,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n  },\n})\n\n// row 2\n// -----\n\ngraph.addNode({\n  shape: 'circle',\n  x: 40,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    label: {\n      refX: 16,\n      refY: 16,\n      textAnchor: 'start',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 200,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 16,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 360,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: 16,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'start',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 520,\n  y: 140,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: 0.5,\n      refY: -4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\n// row 3\n// -----\n\ngraph.addNode({\n  shape: 'circle',\n  x: 40,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    label: {\n      refX: 0.5,\n      refY: 16,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 200,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: 0.5,\n      refY: 0.5,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 360,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 520,\n  y: 240,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: '100%',\n      refX2: 4,\n      refY: 0.5,\n      textAnchor: 'start',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\n// row 4\n// -----\n\ngraph.addNode({\n  shape: 'circle',\n  x: 40,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: 16,\n      textAnchor: 'end',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 200,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: 0.5,\n      textAnchor: 'end',\n      textVerticalAnchor: 'middle',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 360,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#237804',\n      fill: '#73d13d',\n    },\n    label: {\n      refX: '100%',\n      refX2: -16,\n      refY: '100%',\n      refY2: -16,\n      textAnchor: 'end',\n      textVerticalAnchor: 'bottom',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'circle',\n  x: 520,\n  y: 340,\n  width: 60,\n  height: 60,\n  label: 'circle',\n  attrs: {\n    body: {\n      stroke: '#ffa940',\n      fill: '#ffd591',\n    },\n    label: {\n      refX: 0.5,\n      refY: '100%',\n      refY2: 4,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'top',\n    },\n  },\n})\n",title:{zh:"Circle",en:"Circle"},filename:"circle.ts",isNew:!1},{id:"path",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*RebUQ5ze_PkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 80,\n  label: 'path',\n  // 使用 path 属性指定路径的 pathData，相当于指定路径的 refD 属性\n  // https://x6.antv.antgroup.com/api/registry/attr#refdresetoffset\n  path: 'M 0 5 10 0 C 20 0 20 20 10 20 L 0 15 Z',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 200,\n  y: 40,\n  width: 100,\n  height: 80,\n  label: 'path',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 指定 refD 属性，pathData 随图形大小自动缩放\n      // https://x6.antv.antgroup.com/api/registry/attr#refdresetoffset\n      refD: 'M 0 5 10 0 C 20 0 20 20 10 20 L 0 15 Z',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 360,\n  y: 70,\n  width: 100,\n  height: 80,\n  label: 'path',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 指定 d 属性，pathData 不随图形的大小缩放\n      d: 'M 0 5 10 0 C 20 0 20 20 10 20 L 0 15 Z',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 50,\n  y: 180,\n  width: 80,\n  height: 80,\n  // https://www.svgrepo.com/svg/13653/like\n  path: 'M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z',\n  attrs: {\n    body: {\n      fill: '#D75A4A',\n      stroke: 'none',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 210,\n  y: 180,\n  width: 80,\n  height: 80,\n  // https://www.svgrepo.com/svg/13695/star\n  path: 'M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956C22.602,0.567,25.338,0.567,26.285,2.486z',\n  attrs: {\n    body: {\n      fill: '#ED8A19',\n      stroke: 'none',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 370,\n  y: 180,\n  width: 80,\n  height: 80,\n  // https://www.svgrepo.com/svg/13692/music-player\n  path: 'M52.104,0.249c-0.216-0.189-0.501-0.275-0.789-0.241l-31,4.011c-0.499,0.065-0.872,0.489-0.872,0.992v6.017v4.212v26.035C17.706,39.285,14.997,38,11.944,38c-5.247,0-9.5,3.781-9.5,8.444s4.253,8.444,9.5,8.444s9.5-3.781,9.5-8.444c0-0.332-0.027-0.658-0.069-0.981c0.04-0.108,0.069-0.221,0.069-0.343V16.118l29-3.753v18.909C48.706,29.285,45.997,28,42.944,28c-5.247,0-9.5,3.781-9.5,8.444s4.253,8.444,9.5,8.444s9.5-3.781,9.5-8.444c0-0.092-0.012-0.181-0.015-0.272c0.002-0.027,0.015-0.05,0.015-0.077V11.227V7.016V1C52.444,0.712,52.32,0.438,52.104,0.249z',\n  attrs: {\n    body: {\n      fill: '#eb2f96',\n      stroke: 'none',\n    },\n  },\n})\n",title:{zh:"Path",en:"Path"},filename:"path.ts",isNew:!1},{id:"polygon",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*LZepTKoZtRkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 40,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polygon',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 指定 refPoints 属性，多边形顶点随图形大小自动缩放\n      // https://x6.antv.antgroup.com/api/registry/attr#refpointsresetoffset\n      refPoints: '0,10 10,0 20,10 10,20',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 180,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polygon',\n  // 使用 points 属性指定多边形的顶点，相当于指定多边形的 refPoints 属性\n  // https://x6.antv.antgroup.com/api/registry/attr#refpointsresetoffset\n  points: '0,10 10,0 20,10 10,20',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 320,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polygon',\n  // 使用 points 属性指定多边形的顶点数组\n  points: [\n    [0, 10],\n    [10, 0],\n    [20, 10],\n    [10, 20],\n  ],\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 460,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polygon',\n  // 使用 points 属性指定多边形的顶点数组\n  points: [\n    { x: 0, y: 10 },\n    { x: 10, y: 0 },\n    { x: 20, y: 10 },\n    { x: 10, y: 20 },\n  ],\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 600,\n  y: 70,\n  width: 80,\n  height: 80,\n  label: 'polygon',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 直接指定 points 属性，多边形顶点不随随图形大小自动缩放\n      points: '0,10 10,0 20,10 10,20',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 40,\n  y: 180,\n  width: 80,\n  height: 80,\n  attrs: {\n    body: {\n      fill: '#73d13d',\n      stroke: '#237804',\n      refPoints: '0,100 50,25 50,75 100,0',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 180,\n  y: 180,\n  width: 80,\n  height: 80,\n  points: '100,10 40,198 190,78 10,78 160,198',\n  attrs: {\n    body: {\n      fill: '#ffd591',\n      stroke: '#ffa940',\n      strokeWidth: 2,\n      fillRule: 'evenodd',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 320,\n  y: 180,\n  width: 80,\n  height: 80,\n  points: '100,10 40,198 190,78 10,78 160,198',\n  attrs: {\n    body: {\n      fill: '#ffd591',\n      stroke: '#ffa940',\n      strokeWidth: 2,\n      fillRule: 'nonzero',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polygon',\n  x: 460,\n  y: 180,\n  width: 80,\n  height: 80,\n  points:\n    '26.934,1.318 35.256,18.182 53.867,20.887 40.4,34.013 43.579,52.549 26.934,43.798 10.288,52.549 13.467,34.013 0,20.887 18.611,18.182',\n  attrs: {\n    body: {\n      fill: '#ED8A19',\n      stroke: 'none',\n    },\n  },\n})\n",title:{zh:"Polygon",en:"Polygon"},filename:"polygon.ts",isNew:!1},{id:"polyline",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*t6wZQarashoAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 40,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polyline',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 指定 refPoints 属性，顶点随图形大小自动缩放\n      // https://x6.antv.antgroup.com/api/registry/attr#refpointsresetoffset\n      refPoints: '0,0 0,10 10,10 10,0',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 180,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polyline',\n  // 使用 points 属性指定顶点，相当于指定 refPoints 属性\n  // https://x6.antv.antgroup.com/api/registry/attr#refpointsresetoffset\n  points: '0,0 0,10 10,10 10,0',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 320,\n  y: 40,\n  width: 80,\n  height: 80,\n  label: 'polyline',\n  // 使用 points 属性指定顶点数组\n  points: [\n    [0, 0],\n    [0, 10],\n    [10, 10],\n    [10, 0],\n  ],\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 40,\n  y: 180,\n  width: 80,\n  height: 80,\n  label: 'polyline',\n  // 使用 points 属性指定顶点数组\n  points: [\n    { x: 0, y: 0 },\n    { x: 0, y: 10 },\n    { x: 10, y: 10 },\n    { x: 10, y: 0 },\n  ],\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 180,\n  y: 210,\n  width: 80,\n  height: 80,\n  label: 'polyline',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      // 直接指定 points 属性，多边形顶点不随随图形大小自动缩放\n      points: '0,10 10,0 20,10 10,20',\n    },\n  },\n})\n\ngraph.addNode({\n  shape: 'polyline',\n  x: 320,\n  y: 180,\n  width: 80,\n  height: 80,\n  attrs: {\n    body: {\n      fill: 'none',\n      stroke: '#ffa940',\n      refPoints: '0,40 40,40 40,80 80,80 80,120 120,120 120,160',\n    },\n  },\n})\n",title:{zh:"Polyline",en:"Polyline"},filename:"polyline.ts",isNew:!1},{id:"image",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*tIReSJNChdkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'image',\n  x: 320,\n  y: 120,\n  width: 94,\n  height: 28,\n  imageUrl:\n    'https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg',\n})\n",title:{zh:"Image",en:"Image"},filename:"image.ts",isNew:!1},{id:"text-block",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*3_yQTKv_lEsAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 160,\n  y: 120,\n  width: 360,\n  height: 120,\n  shape: 'text-block',\n  text: `There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.`,\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: '#9254de',\n      rx: 4,\n      ry: 4,\n    },\n  },\n})\n",title:{zh:"文本",en:"Text Block"},filename:"text-block.ts",isNew:!1}],icon:"",id:"native-node",title:{en:"Native Node",zh:"内置节点"},api:null,childrenKey:"demos",order:10},{demos:[{id:"custom-with-svg",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*PJn8T5hMua8AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nGraph.registerNode(\n  'custom-node',\n  {\n    width: 200,\n    height: 60,\n    attrs: {\n      body: {\n        stroke: '#5F95FF',\n        strokeWidth: 1,\n        fill: 'rgba(95,149,255,0.05)',\n        refWidth: 1,\n        refHeight: 1,\n      },\n      image: {\n        'xlink:href':\n          'https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png',\n        width: 16,\n        height: 16,\n        x: 12,\n        y: 12,\n      },\n      title: {\n        text: 'Node',\n        refX: 40,\n        refY: 14,\n        fill: 'rgba(0,0,0,0.85)',\n        fontSize: 12,\n        'text-anchor': 'start',\n      },\n      text: {\n        text: 'this is content text',\n        refX: 40,\n        refY: 38,\n        fontSize: 12,\n        fill: 'rgba(0,0,0,0.6)',\n        'text-anchor': 'start',\n      },\n    },\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n        selector: 'image',\n      },\n      {\n        tagName: 'text',\n        selector: 'title',\n      },\n      {\n        tagName: 'text',\n        selector: 'text',\n      },\n    ],\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  grid: true,\n})\n\ngraph.addNode({\n  x: 200,\n  y: 160,\n  shape: 'custom-node',\n})\n",title:{zh:"使用 SVG 自定义节点",en:"Custom Node with SVG"},filename:"custom-with-svg.ts",isNew:!1},{id:"cylinder",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*MkDMTaYuFAUAAAAAAAAAAAAAARQnAQ",source:"import { Graph, NumberExt } from '@antv/x6'\n\nGraph.registerNode('cylinder', {\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'body',\n    },\n    {\n      tagName: 'ellipse',\n      selector: 'top',\n    },\n    {\n      tagName: 'text',\n      selector: 'label',\n    },\n  ],\n  attrs: {\n    body: {\n      fill: '#ffffff',\n      stroke: '#333333',\n      strokeWidth: 2,\n      lateral: 10,\n    },\n    top: {\n      fill: '#ffffff',\n      stroke: '#333333',\n      strokeWidth: 2,\n      refCx: '50%',\n      refRx: '50%',\n      cy: 10,\n      ry: 10,\n    },\n  },\n  attrHooks: {\n    lateral: {\n      set(t: number | string, { refBBox }) {\n        const isPercentage = NumberExt.isPercentage(t)\n        if (isPercentage) {\n          // eslint-disable-next-line\n          t = parseFloat(t as string) / 100\n        }\n\n        const x = refBBox.x\n        const y = refBBox.y\n        const w = refBBox.width\n        const h = refBBox.height\n\n        // curve control point variables\n        const rx = w / 2\n        const ry = isPercentage ? h * (t as number) : (t as number)\n\n        const kappa = 0.551784\n        const cx = kappa * rx\n        const cy = kappa * ry\n\n        // shape variables\n        const xLeft = x\n        const xCenter = x + w / 2\n        const xRight = x + w\n\n        const ySideTop = y + ry\n        const yCurveTop = ySideTop - ry\n        const ySideBottom = y + h - ry\n        const yCurveBottom = y + h\n\n        // return calculated shape\n        const data = [\n          'M',\n          xLeft,\n          ySideTop,\n          'L',\n          xLeft,\n          ySideBottom,\n          'C',\n          x,\n          ySideBottom + cy,\n          xCenter - cx,\n          yCurveBottom,\n          xCenter,\n          yCurveBottom,\n          'C',\n          xCenter + cx,\n          yCurveBottom,\n          xRight,\n          ySideBottom + cy,\n          xRight,\n          ySideBottom,\n          'L',\n          xRight,\n          ySideTop,\n          'C',\n          xRight,\n          ySideTop - cy,\n          xCenter + cx,\n          yCurveTop,\n          xCenter,\n          yCurveTop,\n          'C',\n          xCenter - cx,\n          yCurveTop,\n          xLeft,\n          ySideTop - cy,\n          xLeft,\n          ySideTop,\n          'Z',\n        ]\n\n        return { d: data.join(' ') }\n      },\n    },\n  },\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'cylinder',\n  x: 320,\n  y: 120,\n  width: 80,\n  height: 120,\n  label: 'cylinder',\n  attrs: {\n    top: {\n      fill: '#fe854f',\n      fillOpacity: 0.5,\n    },\n    body: {\n      fill: '#ED8A19',\n      fillOpacity: 0.8,\n    },\n  },\n})\n",title:{zh:"Cylinder",en:"Cylinder"},filename:"cylinder.ts",isNew:!1},{id:"custom-icon-with-svg",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*jX20T6ewn_sAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 320,\n  y: 120,\n  width: 96,\n  height: 96,\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'eye1',\n      groupSelector: 'eye',\n      attrs: {\n        d: 'M24.82,48.678c5.422,0,9.832-6.644,9.832-14.811c0-8.165-4.41-14.809-9.832-14.809s-9.833,6.644-9.833,14.809C14.987,42.034,19.399,48.678,24.82,48.678z',\n      },\n    },\n    {\n      tagName: 'path',\n      selector: 'eye2',\n      groupSelector: 'eye',\n      attrs: {\n        d: 'M71.606,48.678c5.422,0,9.833-6.644,9.833-14.811c0-8.165-4.411-14.809-9.833-14.809c-5.421,0-9.831,6.644-9.831,14.809C61.775,42.034,66.186,48.678,71.606,48.678z',\n      },\n    },\n    {\n      tagName: 'path',\n      selector: 'lip',\n      attrs: {\n        d: 'M95.855,55.806c-0.6-0.605-1.516-0.77-2.285-0.4C81.232,61.29,65.125,64.53,48.214,64.53c-16.907,0-33.015-3.24-45.354-9.123c-0.77-0.367-1.688-0.205-2.284,0.4c-0.599,0.606-0.747,1.526-0.369,2.29c5.606,11.351,25.349,19.277,48.008,19.277c22.668,0,42.412-7.929,48.012-19.279C96.603,57.332,96.453,56.411,95.855,55.806z',\n      },\n    },\n  ],\n  attrs: {\n    lip: {\n      fill: '#E0A31A',\n    },\n    eye: {\n      fill: '#730000',\n    },\n  },\n})\n",title:{zh:"使用 SVG 自定义图标",en:"Custom Node with SVG"},filename:"custom-icon-with-svg.ts",isNew:!1},{id:"custom-with-react",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*_aX6Qb5gYz4AAAAAAAAAAAAAARQnAQ",source:"import React from 'react'\nimport { Graph, Color } from '@antv/x6'\nimport { register } from '@antv/x6-react-shape'\n\nconst MyComponent = ({ node }) => {\n  const color = node.prop('color')\n  return (\n    <div\n      style={{\n        color: '#fff',\n        width: '100%',\n        height: '100%',\n        textAlign: 'center',\n        lineHeight: '50px',\n        borderRadius: 4,\n        background: color,\n      }}\n    >\n      {color}\n    </div>\n  )\n}\n\nregister({\n  shape: 'custom-node',\n  width: 120,\n  height: 50,\n  effect: ['color'],\n  component: MyComponent,\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 50,\n  shape: 'custom-node',\n})\n\nconst target = graph.addNode({\n  x: 320,\n  y: 260,\n  shape: 'custom-node',\n})\n\ngraph.addEdge({\n  source,\n  target,\n})\n\nconst update = () => {\n  source.prop('color', Color.randomHex())\n  target.prop('color', Color.randomHex())\n  setTimeout(update, 1000)\n}\n\nupdate()\n",title:{zh:"使用 React 自定节点",en:"Custom Node with React"},filename:"custom-with-react.tsx",isNew:!1},{id:"switch",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*hC_CTIqqE5gAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\nimport insertCss from '../../edge/demo/node_modules/insert-css'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst switchCenter = {\n  x: 35,\n  y: -2,\n}\nconst switchOpen = `rotate(-30, ${switchCenter.x}, ${switchCenter.y})`\nconst switchClose = `rotate(-12, ${switchCenter.x}, ${switchCenter.y})`\n\ngraph.addNode({\n  x: 320,\n  y: 120,\n  markup: [\n    {\n      tagName: 'g',\n      selector: 'left-group',\n      children: [\n        {\n          tagName: 'rect',\n          selector: 'left',\n          groupSelector: 'line',\n          attrs: {\n            x: 0,\n            y: 0,\n          },\n        },\n        {\n          tagName: 'circle',\n          selector: 'lco',\n          groupSelector: 'co',\n          attrs: {\n            cx: 30,\n          },\n        },\n        {\n          tagName: 'circle',\n          selector: 'lci',\n          groupSelector: 'ci',\n          attrs: {\n            cx: 30,\n          },\n        },\n      ],\n    },\n    {\n      tagName: 'rect',\n      selector: 'switch',\n      groupSelector: 'line',\n    },\n    {\n      tagName: 'g',\n      selector: 'right-group',\n      children: [\n        {\n          tagName: 'rect',\n          selector: 'right',\n          groupSelector: 'line',\n          attrs: {\n            x: 70,\n            y: 0,\n          },\n        },\n        {\n          tagName: 'circle',\n          selector: 'rco',\n          groupSelector: 'co',\n          attrs: {\n            cx: 70,\n          },\n        },\n        {\n          tagName: 'circle',\n          selector: 'rci',\n          groupSelector: 'ci',\n          attrs: {\n            cx: 70,\n          },\n        },\n      ],\n    },\n  ],\n  attrs: {\n    line: {\n      width: 30,\n      height: 2,\n      fill: '#000',\n      stroke: '#000',\n    },\n    co: {\n      r: 8,\n      fill: '#000',\n    },\n    ci: {\n      r: 4,\n      fill: '#fff',\n    },\n    switch: {\n      ...switchCenter,\n      width: 35,\n      transform: switchOpen,\n    },\n  },\n})\n\ngraph.on('node:click', ({ node }) => {\n  const attrPath = 'attrs/switch/transform'\n  const current = node.prop(attrPath)\n\n  node.animate(\n    {\n      'attrs/switch/transform':\n        current === switchOpen ? switchClose : switchOpen,\n    },\n    {\n      duration: 100,\n      fill: 'forwards',\n    },\n  )\n})\n\n// 我们用 insert-css 插入自定义样式，实际使用时请使用自己的样式定义方式\ninsertCss(`\n  .x6-node {\n    cursor: pointer;\n  }\n`)\n",title:{zh:"自定义开关节点",en:"Custom Switch Node"},filename:"switch.ts",isNew:!1}],icon:"",id:"custom-node",title:{en:"Custom Node",zh:"自定义节点"},api:null,childrenKey:"demos",order:11},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*DYDDQLNARFYAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 文档：https://x6.antv.antgroup.com/tutorial/basic/port\n\nconst rect = graph.addNode({\n  x: 240,\n  y: 60,\n  width: 100,\n  height: 180,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: [\n    // 默认样式\n    { id: 'port1' },\n    // 自定义连接桩样式\n    {\n      id: 'port2',\n      attrs: {\n        circle: {\n          magnet: true,\n          r: 8,\n          stroke: '#31d0c6',\n          fill: '#fff',\n          strokeWidth: 2,\n        },\n      },\n    },\n  ],\n})\n\nrect.addPort({\n  id: 'port3',\n  attrs: {\n    circle: {\n      r: 6,\n      magnet: true,\n      stroke: '#31d0c6',\n      fill: '#fff',\n      strokeWidth: 2,\n    },\n  },\n})\n",title:{zh:"默认连接桩",en:"Default Port"},filename:"default.ts",isNew:!1},{id:"group",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*2xpxTbuyTngAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 文档：https://x6.antv.antgroup.com/tutorial/basic/port\n\nconst rect = graph.addNode({\n  x: 240,\n  y: 60,\n  width: 100,\n  height: 180,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: '#fff',\n            strokeWidth: 2,\n          },\n        },\n      },\n    },\n    items: [\n      { id: 'port1', group: 'group1' },\n      { id: 'port2', group: 'group1' },\n    ],\n  },\n})\n\nrect.addPort({ id: 'port3', group: 'group1' })\n",title:{zh:"使用 Group 定义连接桩样式",en:"Use Group to Custom Port Style"},filename:"group.ts",isNew:!1},{id:"dynamic",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*ABl7SrXZRQoAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 文档：https://x6.antv.antgroup.com/tutorial/basic/port\n\nconst rect = graph.addNode({\n  x: 240,\n  y: 60,\n  width: 100,\n  height: 180,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: '#fff',\n            strokeWidth: 2,\n          },\n        },\n      },\n    },\n    items: [{ group: 'group1' }, { group: 'group1' }],\n  },\n})\n\nconst addPort = () => {\n  rect.addPort({ group: 'group1' })\n}\n\nconst removePort = () => {\n  const ports = rect.getPorts()\n  if (ports.length) {\n    rect.removePortAt(ports.length - 1)\n  }\n}\n\nconst count = 5\nlet current = 0\nlet adding = true\n\nconst run = () => {\n  if (adding && current === count) {\n    adding = false\n  }\n\n  if (!adding && current === 0) {\n    adding = true\n  }\n\n  if (adding && current < count) {\n    addPort()\n    current += 1\n  }\n\n  if (!adding && current > 0) {\n    removePort()\n    current -= 1\n  }\n\n  setTimeout(run, 1000)\n}\n\nrun()\n",title:{zh:"添加或移除连接桩",en:"Add or Remove Port Dynamically"},filename:"dynamic.ts",isNew:!1},{id:"connect-to-port",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*6R08SbvgI6MAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 文档：https://x6.antv.antgroup.com/tutorial/basic/port\n\nconst rect = graph.addNode({\n  x: 240,\n  y: 60,\n  width: 100,\n  height: 180,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: '#fff',\n            strokeWidth: 2,\n          },\n        },\n      },\n    },\n    items: [\n      { id: 'port1', group: 'group1' },\n      { id: 'port2', group: 'group1' },\n      { id: 'port3', group: 'group1' },\n    ],\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 150 },\n  target: {\n    cell: rect,\n    port: 'port1', // 连接桩 ID\n  },\n  attrs: {\n    line: { stroke: '#d9d9d9' },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 150 },\n  target: {\n    cell: rect,\n    port: 'port2', // 连接桩 ID\n  },\n  attrs: {\n    line: { stroke: '#d9d9d9' },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 150 },\n  target: {\n    cell: rect,\n    port: 'port3', // 连接桩 ID\n  },\n  attrs: {\n    line: { stroke: '#d9d9d9' },\n  },\n})\n",title:{zh:"连接到连接桩",en:"Connect to Port"},filename:"connect-to-port.ts",isNew:!1},{id:"render-port-with-react",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*XWjES4Hv1HcAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Markup } from '@antv/x6'\nimport { Tooltip } from 'antd'\nimport insertCss from 'insert-css'\nimport React from 'react'\nimport { createRoot } from 'react-dom/client'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  onPortRendered(args) {\n    const selectors = args.contentSelectors\n    const container = selectors && selectors.foContent\n    if (container) {\n      createRoot(container as HTMLElement).render(\n        (\n          <Tooltip title=\"port\">\n            <div className=\"my-port\" />\n          </Tooltip>\n        ) as any,\n      )\n    }\n  },\n})\n\ngraph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  portMarkup: [Markup.getForeignObjectMarkup()],\n  ports: {\n    items: [\n      { group: 'in', id: 'in1' },\n      { group: 'in', id: 'in2' },\n      { group: 'out', id: 'out1' },\n      { group: 'out', id: 'out2' },\n    ],\n    groups: {\n      in: {\n        position: { name: 'top' },\n        attrs: {\n          fo: {\n            width: 12,\n            height: 12,\n            x: -6,\n            y: -6,\n            magnet: 'true',\n          },\n        },\n        zIndex: 1,\n      },\n      out: {\n        position: { name: 'bottom' },\n        attrs: {\n          fo: {\n            width: 12,\n            height: 12,\n            x: -6,\n            y: -6,\n            magnet: 'true',\n          },\n        },\n        zIndex: 1,\n      },\n    },\n  },\n})\n\ninsertCss(`\n  .my-port {\n    width: 100%;\n    height: 100%;\n    border: 2px solid #31d0c6;\n    border-radius: 100%;\n    background: #fff;\n  }\n`)\n",title:{zh:"使用 React 渲染连接桩",en:"Render Port with React"},filename:"render-port-with-react.tsx",isNew:!1},{id:"label",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*jxynTYy8bH8AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 文档：https://x6.antv.antgroup.com/tutorial/basic/port\n\nconst rect = graph.addNode({\n  x: 240,\n  y: 60,\n  width: 100,\n  height: 180,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: '#fff',\n            strokeWidth: 2,\n          },\n        },\n      },\n    },\n    items: [\n      {\n        id: 'port1',\n        group: 'group1',\n        attrs: {\n          text: {\n            // 标签选择器\n            text: 'port1', // 标签文本\n          },\n        },\n      },\n      {\n        id: 'port2',\n        group: 'group1',\n        attrs: {\n          text: {\n            // 标签选择器\n            text: 'port2', // 标签文本\n          },\n        },\n      },\n    ],\n  },\n})\n\nrect.addPort({\n  id: 'port3',\n  group: 'group1',\n  attrs: {\n    text: {\n      // 标签选择器\n      text: 'port3', // 标签文本\n    },\n  },\n})\n",title:{zh:"连接桩标签",en:"Label of Port"},filename:"label.ts",isNew:!1},{id:"port-position-absolute",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*mQfCQZhthxsAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            fill: '#fff',\n          },\n          text: {\n            fontSize: 12,\n            fill: '#888',\n          },\n        },\n        // 文档：https://x6.antv.antgroup.com/api/registry/port-layout#absolute\n        position: {\n          name: 'absolute',\n        },\n      },\n    },\n    items: [\n      {\n        id: 'port1',\n        group: 'group1',\n        // 通过 args 指定绝对位置\n        args: {\n          x: 0,\n          y: 60,\n        },\n        attrs: {\n          text: { text: '{ x: 0, y: 60 }' },\n        },\n      },\n      {\n        id: 'port2',\n        group: 'group1',\n        // 通过 args 指定绝对位置和连接桩的旋转角度\n        args: {\n          x: 0.6,\n          y: 32,\n          angle: 45,\n        },\n        // 自定义连接桩渲染的 SVG\n        markup: [\n          {\n            tagName: 'path',\n            selector: 'path',\n          },\n        ],\n        zIndex: 10,\n        attrs: {\n          path: {\n            d: 'M -6 -8 L 0 8 L 6 -8 Z',\n            magnet: true,\n            fill: 'red',\n          },\n          text: {\n            text: '{ x: 0.6, y: 32, angle: 45 }',\n            fill: 'red',\n          },\n        },\n      },\n      {\n        id: 'port3',\n        group: 'group1',\n        // 通过 args 指定绝对位置\n        args: {\n          x: '100%',\n          y: '100%',\n        },\n        attrs: {\n          text: { text: \"{ x: '100%', y: '100%' }\" },\n        },\n        label: {\n          position: {\n            name: 'right',\n          },\n        },\n      },\n    ],\n  },\n})\n",title:{zh:"绝对定位的连接桩",en:"Absolute Position of Ports"},filename:"port-position-absolute.ts",isNew:!1},{id:"port-position-side",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*iccNRLkBahEAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst rect = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    label: {\n      text: 'left',\n      fill: '#888',\n      fontSize: 12,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            fill: '#fff',\n          },\n          text: {\n            fontSize: 12,\n            fill: '#888',\n          },\n        },\n        // 文档：https://x6.antv.antgroup.com/api/registry/port-layout#left-right-top-bottom\n        position: {\n          name: 'left',\n        },\n      },\n    },\n    items: [\n      {\n        id: 'port1',\n        group: 'group1',\n      },\n      {\n        id: 'port2',\n        group: 'group1',\n        args: { angle: 45 },\n        markup: [\n          {\n            tagName: 'path',\n            selector: 'path',\n          },\n        ],\n        attrs: {\n          path: {\n            d: 'M -6 -8 L 0 8 L 6 -8 Z',\n            magnet: true,\n            fill: 'red',\n          },\n        },\n      },\n      {\n        id: 'port3',\n        group: 'group1',\n      },\n    ],\n  },\n})\n\nconst sides = ['left', 'top', 'right', 'bottom']\nlet index = 0\n\nfunction run() {\n  index += 1\n  if (index === sides.length) {\n    index = 0\n  }\n\n  rect.prop('ports/groups/group1/position', {\n    name: sides[index],\n  })\n  rect.attr('label/text', sides[index])\n\n  setTimeout(run, 1000)\n}\n\nrun()\n",title:{zh:"沿矩形边框均匀分布的连接桩",en:"Uniform Distributed Ports Along the Rectangle"},filename:"port-position-side.ts",isNew:!1},{id:"port-position-line",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*-EXyT5PxgdcAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  markup: [\n    {\n      tagName: 'rect',\n      selector: 'body',\n    },\n    {\n      tagName: 'path',\n      selector: 'line',\n    },\n  ],\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    line: {\n      d: 'M 0 0 280 120',\n      stroke: '#73d13d',\n      strokeWidth: 1,\n      strokeDasharray: '5 5',\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            fill: '#fff',\n          },\n        },\n        position: {\n          name: 'line',\n          args: {\n            start: { x: 0, y: 0 },\n            end: { x: 280, y: 120 },\n          },\n        },\n      },\n    },\n    items: [\n      {\n        id: 'port1',\n        group: 'group1',\n      },\n      {\n        id: 'port2',\n        group: 'group1',\n        args: { angle: 45 },\n        markup: [\n          {\n            tagName: 'path',\n            selector: 'path',\n          },\n        ],\n        attrs: {\n          path: { d: 'M -6 -8 L 0 8 L 6 -8 Z', magnet: true, fill: 'red' },\n        },\n      },\n      {\n        id: 'port3',\n        group: 'group1',\n      },\n    ],\n  },\n})\n",title:{zh:"沿任意直线均匀分布的连接桩",en:"Uniform Distributed Ports Along the Line"},filename:"port-position-line.ts",isNew:!1},{id:"port-position-ellipse-spread",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*WV01TIKfPmkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst node = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 400,\n  height: 200,\n  shape: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        markup: [\n          {\n            tagName: 'rect',\n            selector: 'rect',\n          },\n          {\n            tagName: 'circle',\n            selector: 'dot',\n          },\n        ],\n        attrs: {\n          rect: {\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: 'rgba(255,255,255,0.8)',\n            strokeWidth: 2,\n            width: 16,\n            height: 16,\n            x: -8,\n            y: -8,\n          },\n          dot: {\n            fill: '#fe854f',\n            r: 2,\n          },\n          text: {\n            fontSize: 12,\n            fill: '#6a6c8a',\n          },\n        },\n        // https://x6.antv.antgroup.com/api/registry/port-label-layout#radial\n        label: {\n          position: 'radial',\n        },\n        // https://x6.antv.antgroup.com/api/registry/port-layout#ellipsespread\n        position: {\n          name: 'ellipseSpread',\n          args: {\n            start: 45,\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 10 }).forEach((_, index) => {\n  node.addPort({\n    id: `${index}`,\n    group: 'group1',\n    attrs: { text: { text: index } },\n  })\n})\n\nnode.portProp('0', {\n  attrs: {\n    rect: { stroke: 'red' },\n    dot: { fill: '#31d0c6' },\n  },\n})\n",title:{zh:"沿椭圆均匀分布的连接桩",en:"Uniform Distributed Ports Along the Ellipse"},filename:"port-position-ellipse-spread.ts",isNew:!1},{id:"port-position-ellipse",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*roBwQYYlJjMAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Point } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nfunction getPathData(deg: number) {\n  const center = new Point(180, 100)\n  const start = new Point(180, 0)\n  const ratio = center.x / center.y\n  const p = start\n    .clone()\n    .rotate(90 - deg, center)\n    .scale(ratio, 1, center)\n  return `M ${center.x} ${center.y} ${p.x} ${p.y}`\n}\n\nconst node = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 400,\n  height: 200,\n  markup: [\n    { tagName: 'ellipse', selector: 'body' },\n    { tagName: 'path', selector: 'line' },\n  ],\n  attrs: {\n    body: {\n      refCx: '50%',\n      refCy: '50%',\n      refRx: '50%',\n      refRy: '50%',\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    line: {\n      d: getPathData(45),\n      stroke: '#73d13d',\n      strokeWidth: 1,\n      strokeDasharray: '5 5',\n    },\n  },\n  ports: {\n    groups: {\n      group1: {\n        markup: [\n          {\n            tagName: 'rect',\n            selector: 'rect',\n          },\n          {\n            tagName: 'circle',\n            selector: 'dot',\n          },\n        ],\n        attrs: {\n          rect: {\n            magnet: true,\n            stroke: '#31d0c6',\n            fill: 'rgba(255,255,255,0.8)',\n            strokeWidth: 2,\n            width: 16,\n            height: 16,\n            x: -8,\n            y: -8,\n          },\n          dot: {\n            fill: '#fe854f',\n            r: 2,\n          },\n          text: {\n            fontSize: 12,\n            fill: '#6a6c8a',\n          },\n        },\n        // https://x6.antv.antgroup.com/api/registry/port-label-layout#radial\n        label: {\n          position: 'radial',\n        },\n        // https://x6.antv.antgroup.com/api/registry/port-layout#ellipse\n        position: {\n          name: 'ellipse',\n          args: {\n            start: 45,\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 10 }).forEach((_, index) => {\n  node.addPort({\n    id: `${index}`,\n    group: 'group1',\n    attrs: { text: { text: index } },\n  })\n})\n\nnode.portProp('0', {\n  attrs: {\n    rect: { stroke: 'red' },\n    dot: { fill: '#31d0c6' },\n  },\n})\n",title:{zh:"沿椭圆分布的连接桩",en:"Ports Along the Ellipse"},filename:"port-position-ellipse.ts",isNew:!1},{id:"port-position-ellipse-compensation",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*HKxoQ6kpw4oAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst node = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 400,\n  height: 200,\n  shape: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    label: {\n      text: 'outside',\n      fill: '#888',\n      fontSize: 12,\n    },\n  },\n  ports: {\n    groups: {\n      a: {\n        markup: [\n          {\n            tagName: 'rect',\n            selector: 'rect',\n          },\n          {\n            tagName: 'circle',\n            selector: 'dot',\n          },\n        ],\n        position: {\n          name: 'ellipseSpread',\n          args: { start: 0, dr: 0, compensateRotate: true },\n        },\n        label: {\n          position: 'radial',\n        },\n        attrs: {\n          rect: {\n            stroke: '#31d0c6',\n            fill: '#ffffff',\n            strokeWidth: 2,\n            width: 20,\n            height: 20,\n            x: -10,\n            y: -10,\n          },\n          dot: {\n            fill: '#fe854f',\n            r: 2,\n          },\n          text: {\n            fill: '#6a6c8a',\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 24 }).forEach((_, index) => {\n  node.addPort({\n    group: 'a',\n    id: `${index}`,\n    attrs: { text: { text: index } },\n  })\n})\n\nfunction toggle() {\n  const path = 'ports/groups/a/position/args/compensateRotate'\n  const current = node.prop<boolean>(path)\n  node.prop('attrs/label/text', `compensateRotate: ${!current}`)\n  node.prop(path, !current)\n\n  setTimeout(toggle, 1000)\n}\n\ntoggle()\n",title:{zh:"沿圆弧自动旋转的连接桩",en:"Auto Rotate Ports Along the Arc"},filename:"port-position-ellipse-compensation.ts",isNew:!1},{id:"port-position-custom",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*8Cz3SKibsO4AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nGraph.registerPortLayout(\n  'sin',\n  (portsPositionArgs, elemBBox) => {\n    return portsPositionArgs.map((_, index) => {\n      const step = -Math.PI / 8\n      const y = Math.sin(index * step) * 50\n      return {\n        position: {\n          x: index * 12,\n          y: y + elemBBox.height,\n        },\n        angle: 0,\n      }\n    })\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst rect = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      sin: {\n        attrs: {\n          circle: {\n            r: 6,\n            magnet: true,\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            fill: '#fff',\n          },\n        },\n        position: 'sin',\n      },\n    },\n  },\n})\n\nArray.from({ length: 24 }).forEach(() => {\n  rect.addPort({ group: 'sin' })\n})\n",title:{zh:"自定义连接桩位置",en:"Custom the Position of Ports"},filename:"port-position-custom.ts",isNew:!1},{id:"port-label-position-side",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*XgvYSp7pggAAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst rect = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 280,\n  height: 120,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    label: {\n      text: 'left',\n      fill: '#888',\n      fontSize: 12,\n    },\n  },\n  ports: {\n    groups: {\n      a: {\n        position: {\n          name: 'top',\n        },\n        label: {\n          position: {\n            name: 'left',\n          },\n        },\n        attrs: {\n          circle: {\n            fill: '#fff',\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            r: 8,\n          },\n          text: {\n            fill: '#666',\n            fontSize: 12,\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 3 }).forEach((_, index) => {\n  const label =\n    index === 2\n      ? {\n          position: { args: { x: 20, y: -20 } },\n        }\n      : {}\n  const stroke = index === 2 ? { stroke: 'red' } : {}\n  const fill = index === 2 ? { fill: 'red' } : {}\n  rect.addPort({\n    label,\n    group: 'a',\n    attrs: {\n      circle: { magnet: true, ...stroke },\n      text: { text: `P${index}`, ...fill },\n    },\n  })\n})\n\nconst sides = ['left', 'top', 'right', 'bottom']\nlet index = 0\n\nfunction run() {\n  index += 1\n  if (index === sides.length) {\n    index = 0\n  }\n\n  rect.prop('ports/groups/a/label/position/name', sides[index])\n  rect.attr('label/text', sides[index])\n\n  setTimeout(run, 1000)\n}\n\nrun()\n",title:{zh:"位于连接桩一侧的标签",en:"Place Label On the Side of Port"},filename:"port-label-position-side.ts",isNew:!1},{id:"port-label-position-in-out",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*H-KnRZhXNckAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst node = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 400,\n  height: 200,\n  shape: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    label: {\n      text: 'outside',\n      fill: '#888',\n      fontSize: 12,\n    },\n  },\n  ports: {\n    groups: {\n      a: {\n        position: {\n          name: 'ellipseSpread',\n          args: {\n            compensateRotate: true,\n          },\n        },\n        label: {\n          position: {\n            name: 'outside',\n          },\n        },\n        attrs: {\n          circle: {\n            fill: '#ffffff',\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            r: 10,\n            magnet: true,\n          },\n          text: {\n            fill: '#6a6c8a',\n            fontSize: 12,\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 10 }).forEach((_, index) => {\n  node.addPort({ attrs: { text: { text: `P ${index}` } }, group: 'a' })\n})\n\nconst sides = ['inside', 'outside', 'insideOriented', 'outsideOriented']\nlet index = 1\n\nfunction toggle() {\n  index += 1\n  if (index === sides.length) {\n    index = 0\n  }\n\n  const position = sides[index]\n  node.prop('ports/groups/a/label/position', {\n    name: position,\n  })\n\n  node.attr('label/text', position)\n\n  setTimeout(toggle, 1000)\n}\n\ntoggle()\n",title:{zh:"位于节点内部或外部的标签",en:"Place Label Inside/Outside of Node"},filename:"port-label-position-in-out.ts",isNew:!1},{id:"port-label-position-radial",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*M-u1R4Tdu7kAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst node = graph.addNode({\n  x: 100,\n  y: 60,\n  width: 400,\n  height: 200,\n  shape: 'ellipse',\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n    label: {\n      text: 'radial',\n      fill: '#888',\n      fontSize: 12,\n    },\n  },\n  ports: {\n    groups: {\n      a: {\n        position: {\n          name: 'ellipseSpread',\n          args: {\n            compensateRotate: true,\n          },\n        },\n        label: {\n          position: {\n            name: 'radial',\n          },\n        },\n        attrs: {\n          circle: {\n            fill: '#ffffff',\n            stroke: '#31d0c6',\n            strokeWidth: 2,\n            r: 10,\n            magnet: true,\n          },\n          text: {\n            fill: '#6a6c8a',\n            fontSize: 12,\n          },\n        },\n      },\n    },\n  },\n})\n\nArray.from({ length: 10 }).forEach((_, index) => {\n  node.addPort({ attrs: { text: { text: `P ${index}` } }, group: 'a' })\n})\n\nconst prop = 'ports/groups/a/label/position'\nfunction toggle() {\n  const position = node.prop(prop) === 'radial' ? 'radialOriented' : 'radial'\n  node.prop(prop, position)\n  node.attr('label/text', position)\n\n  setTimeout(toggle, 1000)\n}\n\ntoggle()\n",title:{zh:"位于椭圆外围的标签",en:"Place Label Outside of Ellipse"},filename:"port-label-position-radial.ts",isNew:!1}],icon:"",id:"port",title:{en:"Port",zh:"连接桩"},api:null,childrenKey:"demos",order:20},{demos:[{id:"embedding-nodes",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*cUSYR4GD9TMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst parent = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 240,\n  height: 160,\n  zIndex: 1,\n  label: 'Parent\\n(try to move me)',\n  attrs: {\n    label: {\n      refY: 120,\n      fontSize: 12,\n    },\n    body: {\n      fill: '#fffbe6',\n      stroke: '#ffe7ba',\n    },\n  },\n})\n\nconst child1 = graph.addNode({\n  x: 110,\n  y: 80,\n  width: 100,\n  height: 50,\n  label: 'Child\\n(inside)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#3199FF',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst child2 = graph.createNode({\n  x: 360,\n  y: 80,\n  width: 100,\n  height: 50,\n  label: 'Child\\n(outside)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#47C769',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nparent.addChild(child1)\nparent.addChild(child2)\n",title:{zh:"嵌套节点",en:"Embedding Nodes"},filename:"embedding-nodes.ts",isNew:!1},{id:"embedding-edges",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*5wMTSKjHCysAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 80,\n  y: 100,\n  width: 80,\n  height: 40,\n  label: 'Child\\n(source)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#3199FF',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 280,\n  y: 80,\n  width: 80,\n  height: 40,\n  label: 'Child\\n(target)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#47C769',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst parent = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 360,\n  height: 160,\n  zIndex: 1,\n  label: 'Parent\\n(try to move me)',\n  attrs: {\n    label: {\n      refY: 140,\n      fontSize: 12,\n    },\n    body: {\n      fill: '#fffbe6',\n      stroke: '#ffe7ba',\n    },\n  },\n})\n\nparent.addChild(source)\nparent.addChild(target)\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 120, y: 60 },\n    { x: 200, y: 100 },\n  ],\n})\n",title:{zh:"自动更新边的父节点",en:"Auto Update Edge's Parent"},filename:"embedding-edges.ts",isNew:!1},{id:"embedding-by-dnd",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*MhYYRZnohv4AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  embedding: {\n    enabled: true,\n    findParent({ node }) {\n      const bbox = node.getBBox()\n      return this.getNodes().filter((node) => {\n        const data = node.getData<any>()\n        if (data && data.parent) {\n          const targetBBox = node.getBBox()\n          return bbox.isIntersectWithRect(targetBBox)\n        }\n        return false\n      })\n    },\n  },\n  highlighting: {\n    embedding: {\n      name: 'stroke',\n      args: {\n        padding: -1,\n        attrs: {\n          stroke: '#73d13d',\n        },\n      },\n    },\n  },\n})\n\ngraph.addNode({\n  x: 40,\n  y: 140,\n  width: 100,\n  height: 50,\n  label: 'Child\\n(unembed)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#3199FF',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\ngraph.addNode({\n  x: 500,\n  y: 100,\n  width: 100,\n  height: 50,\n  label: 'Child\\n(unembed)',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#47C769',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\ngraph.addNode({\n  x: 200,\n  y: 80,\n  width: 240,\n  height: 160,\n  zIndex: 1,\n  label: 'Parent',\n  attrs: {\n    body: {\n      fill: '#fffbe6',\n      stroke: '#ffe7ba',\n    },\n    label: {\n      fontSize: 12,\n    },\n  },\n  data: {\n    parent: true,\n  },\n})\n\ngraph.on('node:change:parent', ({ node }) => {\n  node.attr({\n    label: {\n      text: 'Child\\n(embed)',\n    },\n  })\n})\n",title:{zh:"拖入/拖出父节点",en:"Embedding by Drag and Drop"},filename:"embedding-by-dnd.ts",isNew:!1},{id:"restrict-movement",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*4YxDQ712eyEAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  translating: {\n    restrict(view) {\n      const cell = view.cell\n      if (cell.isNode()) {\n        const parent = cell.getParent()\n        if (parent) {\n          return parent.getBBox()\n        }\n      }\n\n      return null\n    },\n  },\n})\n\nconst child = graph.addNode({\n  x: 120,\n  y: 80,\n  width: 80,\n  height: 40,\n  label: 'Child',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#3199FF',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst parent = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 240,\n  height: 160,\n  zIndex: 1,\n  label: 'Parent\\n(try to move me)',\n  attrs: {\n    label: {\n      refY: 120,\n      fontSize: 12,\n    },\n    body: {\n      fill: '#fffbe6',\n      stroke: '#ffe7ba',\n    },\n  },\n})\n\nparent.addChild(child)\n",title:{zh:"限制子节点的移动范围",en:"Restrict the Movement of Child Nodes"},filename:"restrict-movement.ts",isNew:!1},{id:"expand-shrink",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*92fsRq_2YV0AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  embedding: {\n    enabled: true,\n  },\n  highlighting: {\n    embedding: {\n      name: 'stroke',\n      args: {\n        padding: -1,\n        attrs: {\n          stroke: '#73d13d',\n        },\n      },\n    },\n  },\n})\n\nconst source = graph.addNode({\n  x: 80,\n  y: 100,\n  width: 80,\n  height: 40,\n  label: 'Child',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#3199FF',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 280,\n  y: 80,\n  width: 80,\n  height: 40,\n  label: 'Child',\n  zIndex: 10,\n  attrs: {\n    body: {\n      stroke: 'none',\n      fill: '#47C769',\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 12,\n    },\n  },\n})\n\nconst parent = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 360,\n  height: 160,\n  zIndex: 1,\n  label: 'Parent',\n  attrs: {\n    body: {\n      fill: '#fffbe6',\n      stroke: '#ffe7ba',\n    },\n    label: {\n      fontSize: 12,\n    },\n  },\n})\n\nparent.addChild(source)\nparent.addChild(target)\n\nlet ctrlPressed = false\nconst embedPadding = 20\n\ngraph.on('node:embedding', ({ e }: { e: JQuery.MouseMoveEvent }) => {\n  ctrlPressed = e.metaKey || e.ctrlKey\n})\n\ngraph.on('node:embedded', () => {\n  ctrlPressed = false\n})\n\ngraph.on('node:change:size', ({ node, options }) => {\n  if (options.skipParentHandler) {\n    return\n  }\n\n  const children = node.getChildren()\n  if (children && children.length) {\n    node.prop('originSize', node.getSize())\n  }\n})\n\ngraph.on('node:change:position', ({ node, options }) => {\n  if (options.skipParentHandler || ctrlPressed) {\n    return\n  }\n\n  const children = node.getChildren()\n  if (children && children.length) {\n    node.prop('originPosition', node.getPosition())\n  }\n\n  const parent = node.getParent()\n  if (parent && parent.isNode()) {\n    let originSize = parent.prop('originSize')\n    if (originSize == null) {\n      originSize = parent.getSize()\n      parent.prop('originSize', originSize)\n    }\n\n    let originPosition = parent.prop('originPosition')\n    if (originPosition == null) {\n      originPosition = parent.getPosition()\n      parent.prop('originPosition', originPosition)\n    }\n\n    let x = originPosition.x\n    let y = originPosition.y\n    let cornerX = originPosition.x + originSize.width\n    let cornerY = originPosition.y + originSize.height\n    let hasChange = false\n\n    const children = parent.getChildren()\n    if (children) {\n      children.forEach((child) => {\n        const bbox = child.getBBox().inflate(embedPadding)\n        const corner = bbox.getCorner()\n\n        if (bbox.x < x) {\n          x = bbox.x\n          hasChange = true\n        }\n\n        if (bbox.y < y) {\n          y = bbox.y\n          hasChange = true\n        }\n\n        if (corner.x > cornerX) {\n          cornerX = corner.x\n          hasChange = true\n        }\n\n        if (corner.y > cornerY) {\n          cornerY = corner.y\n          hasChange = true\n        }\n      })\n    }\n\n    if (hasChange) {\n      parent.prop(\n        {\n          position: { x, y },\n          size: { width: cornerX - x, height: cornerY - y },\n        },\n        { skipParentHandler: true },\n      )\n    }\n  }\n})\n",title:{zh:"自动扩展/收缩父节点",en:"Auto Expand/Shrink the Parent Node"},filename:"expand-shrink.ts",isNew:!1},{id:"collapsable",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*-HGVS6LIcEMAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node } from '@antv/x6'\n\nclass Group extends Node {\n  private collapsed = false\n  private expandSize: { width: number; height: number }\n\n  protected postprocess() {\n    this.toggleCollapse(false)\n  }\n\n  isCollapsed() {\n    return this.collapsed\n  }\n\n  toggleCollapse(collapsed?: boolean) {\n    const target = collapsed == null ? !this.collapsed : collapsed\n    if (target) {\n      this.attr('buttonSign', { d: 'M 1 5 9 5 M 5 1 5 9' })\n      this.expandSize = this.getSize()\n      this.resize(100, 32)\n    } else {\n      this.attr('buttonSign', { d: 'M 2 5 8 5' })\n      if (this.expandSize) {\n        this.resize(this.expandSize.width, this.expandSize.height)\n      }\n    }\n    this.collapsed = target\n  }\n}\n\nGroup.config({\n  markup: [\n    {\n      tagName: 'rect',\n      selector: 'body',\n    },\n    {\n      tagName: 'text',\n      selector: 'label',\n    },\n    {\n      tagName: 'g',\n      selector: 'buttonGroup',\n      children: [\n        {\n          tagName: 'rect',\n          selector: 'button',\n          attrs: {\n            'pointer-events': 'visiblePainted',\n          },\n        },\n        {\n          tagName: 'path',\n          selector: 'buttonSign',\n          attrs: {\n            fill: 'none',\n            'pointer-events': 'none',\n          },\n        },\n      ],\n    },\n  ],\n  attrs: {\n    body: {\n      refWidth: '100%',\n      refHeight: '100%',\n      strokeWidth: 1,\n      fill: '#ffffff',\n      stroke: 'none',\n    },\n    buttonGroup: {\n      refX: 8,\n      refY: 8,\n    },\n    button: {\n      height: 14,\n      width: 16,\n      rx: 2,\n      ry: 2,\n      fill: '#f5f5f5',\n      stroke: '#ccc',\n      cursor: 'pointer',\n      event: 'node:collapse',\n    },\n    buttonSign: {\n      refX: 3,\n      refY: 2,\n      stroke: '#808080',\n    },\n    label: {\n      fontSize: 12,\n      fill: '#fff',\n      refX: 32,\n      refY: 10,\n    },\n  },\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nfunction createGroup(\n  id: string,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  fill: string,\n  stroke: string,\n) {\n  const group = new Group({\n    id,\n    x,\n    y,\n    width,\n    height,\n    attrs: {\n      body: { fill, stroke },\n      label: { text: id },\n    },\n  })\n  graph.addNode(group)\n  return group\n}\n\nfunction createNode(\n  id: string,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  fill: string,\n) {\n  return graph.addNode({\n    id,\n    x,\n    y,\n    width,\n    height,\n    attrs: {\n      body: {\n        fill: fill || 'blue',\n        stroke: 'none',\n      },\n      label: {\n        text: id,\n        fill: '#fff',\n        fontSize: 12,\n      },\n    },\n  })\n}\n\nfunction createEdge(\n  id: string,\n  source: string,\n  target: string,\n  vertices?: { x: number; y: number }[],\n) {\n  return graph.addEdge({\n    id,\n    source,\n    target,\n    vertices,\n    label: id,\n    attrs: {\n      label: {\n        fontSize: 12,\n      },\n    },\n  })\n}\n\nconst a = createGroup('a', 100, 40, 420, 240, '#fffbe6', '#ffe7ba')\nconst aa = createGroup('aa', 150, 100, 160, 120, '#47C769', 'none')\nconst aaa = createGroup('aaa', 180, 150, 100, 50, '#3199FF', 'none')\nconst c = createNode('c', 400, 180, 60, 40, 'orange')\n\na.addChild(aa)\naa.addChild(aaa)\na.addChild(c)\n\ncreateNode('d', 580, 140, 60, 40, '#000')\n\ncreateEdge('edge1', 'aa', 'c')\ncreateEdge('edge3', 'c', 'd')\naa.addChild(\n  createEdge('edge2', 'aa', 'aaa', [\n    { x: 60, y: 140 },\n    { x: 60, y: 220 },\n  ]),\n)\n\ngraph.on('node:collapse', ({ node }: { node: Group }) => {\n  node.toggleCollapse()\n  const collapsed = node.isCollapsed()\n  const collapse = (parent: Group) => {\n    const cells = parent.getChildren()\n    if (cells) {\n      cells.forEach((cell) => {\n        if (collapsed) {\n          cell.hide()\n        } else {\n          cell.show()\n        }\n\n        if (cell instanceof Group) {\n          if (!cell.isCollapsed()) {\n            collapse(cell)\n          }\n        }\n      })\n    }\n  }\n\n  collapse(node)\n})\n",title:{zh:"折叠/展开父节点",en:"Collapse/Expand the Parent Node"},filename:"collapsable.ts",isNew:!1}],icon:"",id:"group",title:{en:"Group",zh:"群组"},api:null,childrenKey:"demos",order:30},{demos:[{id:"button",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*CrBoSbn-b84AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Cell, Color } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 180,\n  y: 60,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  tools: [\n    {\n      name: 'button',\n      args: {\n        markup: [\n          {\n            tagName: 'circle',\n            selector: 'button',\n            attrs: {\n              r: 14,\n              stroke: '#fe854f',\n              strokeWidth: 2,\n              fill: 'white',\n              cursor: 'pointer',\n            },\n          },\n          {\n            tagName: 'text',\n            textContent: 'Btn',\n            selector: 'icon',\n            attrs: {\n              fill: '#fe854f',\n              fontSize: 10,\n              textAnchor: 'middle',\n              pointerEvents: 'none',\n              y: '0.3em',\n            },\n          },\n        ],\n        x: '100%',\n        y: '100%',\n        offset: { x: -20, y: -20 },\n        onClick({ cell }: { cell: Cell }) {\n          const fill = Color.randomHex()\n          cell.attr({\n            body: {\n              fill,\n            },\n            label: {\n              fill: Color.invert(fill, true),\n            },\n          })\n        },\n      },\n    },\n  ],\n})\n\nconst target = graph.addNode({\n  x: 320,\n  y: 250,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  attrs: {\n    line: {\n      stroke: '#a0a0a0',\n      strokeWidth: 1,\n      targetMarker: {\n        name: 'classic',\n        size: 7,\n      },\n    },\n  },\n})\n\ngraph.on('node:mouseenter', ({ node }) => {\n  if (node === target) {\n    node.addTools({\n      name: 'button',\n      args: {\n        markup: [\n          {\n            tagName: 'circle',\n            selector: 'button',\n            attrs: {\n              r: 14,\n              stroke: '#fe854f',\n              strokeWidth: 2,\n              fill: 'white',\n              cursor: 'pointer',\n            },\n          },\n          {\n            tagName: 'text',\n            textContent: 'Btn',\n            selector: 'icon',\n            attrs: {\n              fill: '#fe854f',\n              fontSize: 10,\n              textAnchor: 'middle',\n              pointerEvents: 'none',\n              y: '0.3em',\n            },\n          },\n        ],\n        x: 0,\n        y: 0,\n        offset: { x: 20, y: 20 },\n        onClick({ cell }: { cell: Cell }) {\n          cell.attr({\n            body: {\n              stroke: Color.randomHex(),\n              strokeDasharray: '5, 1',\n              strokeDashoffset:\n                (cell.attr<number>('line/strokeDashoffset') | 0) + 20,\n            },\n          })\n        },\n      },\n    })\n  }\n})\n\ngraph.on('node:mouseleave', ({ cell }) => {\n  if (cell === target) {\n    cell.removeTools()\n  }\n})\n",title:{zh:"自定义按钮",en:"Custom Button"},filename:"button.ts",isNew:!1},{id:"button-remove",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*EkLwQKIR81MAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 180,\n  y: 60,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  tools: [\n    {\n      name: 'button-remove',\n      args: {\n        x: '100%',\n        y: 0,\n        offset: { x: -10, y: 10 },\n      },\n    },\n  ],\n})\n\nconst target = graph.addNode({\n  x: 320,\n  y: 250,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  attrs: {\n    line: {\n      stroke: '#a0a0a0',\n      strokeWidth: 1,\n      targetMarker: {\n        name: 'classic',\n        size: 7,\n      },\n    },\n  },\n})\n\ngraph.on('node:mouseenter', ({ node }) => {\n  if (node === target) {\n    node.addTools({\n      name: 'button-remove',\n      args: {\n        x: 0,\n        y: 0,\n        offset: { x: 10, y: 10 },\n      },\n    })\n  }\n})\n\ngraph.on('node:mouseleave', ({ node }) => {\n  if (node === target) {\n    node.removeTools()\n  }\n})\n",title:{zh:"删除按钮",en:"Delete Button"},filename:"button-remove.ts",isNew:!1},{id:"boundary",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*9jEGTak16UEAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 180,\n  y: 60,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  tools: [\n    {\n      name: 'boundary',\n      args: {\n        padding: 5,\n        attrs: {\n          fill: '#7c68fc',\n          stroke: '#9254de',\n          strokeWidth: 1,\n          fillOpacity: 0.2,\n        },\n      },\n    },\n  ],\n})\n\nconst target = graph.addNode({\n  x: 320,\n  y: 250,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  attrs: {\n    line: {\n      stroke: '#a0a0a0',\n      strokeWidth: 1,\n      targetMarker: {\n        name: 'classic',\n        size: 7,\n      },\n    },\n  },\n})\n\ngraph.on('node:mouseenter', ({ node }) => {\n  if (node === target) {\n    node.addTools({\n      name: 'boundary',\n      args: {\n        attrs: {\n          fill: '#7c68fc',\n          stroke: '#9254de',\n          strokeWidth: 1,\n          fillOpacity: 0.2,\n        },\n      },\n    })\n  }\n})\n\ngraph.on('node:mouseleave', ({ node }) => {\n  if (node === target) {\n    node.removeTools()\n  }\n})\n",title:{zh:"包围框",en:"Boundary Box"},filename:"boundary.ts",isNew:!1},{id:"editable",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*hf4qR7MuOToAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\nimport '../index.less'\n\nconst container = document.getElementById('container')!\nconst graph = new Graph({\n  container,\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 180,\n  y: 60,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      stroke: '#5F95FF',\n      fill: '#EFF4FF',\n      strokeWidth: 1,\n    },\n  },\n  tools: [\n    {\n      name: 'node-editor',\n      args: {\n        attrs: {\n          backgroundColor: '#EFF4FF',\n        },\n      },\n    },\n  ],\n})\n\nconst target = graph.addNode({\n  x: 320,\n  y: 250,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      stroke: '#5F95FF',\n      fill: '#EFF4FF',\n      strokeWidth: 1,\n    },\n  },\n  tools: [\n    {\n      name: 'node-editor',\n      args: {\n        attrs: {\n          backgroundColor: '#EFF4FF',\n        },\n      },\n    },\n  ],\n})\n\ngraph.addEdge({\n  source,\n  target,\n  attrs: {\n    line: {\n      stroke: '#A2B1C3',\n      strokeWidth: 2,\n    },\n  },\n  tools: [\n    {\n      name: 'edge-editor',\n      args: {\n        attrs: {\n          backgroundColor: '#fff',\n        },\n      },\n    },\n  ],\n})\n",title:{zh:"文本编辑",en:"Text Editor"},filename:"editable.ts",isNew:!1},{id:"port-tooltip",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*r2LgQINPEd8AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\nimport { Tooltip } from 'antd'\nimport React from 'react'\nimport { createRoot } from 'react-dom/client'\n\nconst registerPortTooltip = (container: Element, text: string) => {\n  container.addEventListener('mouseenter', (e: MouseEvent) => {\n    const tooltip = document.querySelector('.x6-tooltip') as HTMLElement\n    const content = tooltip?.querySelector('.ant-tooltip-inner') as HTMLElement\n    if (content) {\n      content.innerText = text\n      tooltip.style.left = `${e.clientX - content.offsetWidth / 2}px`\n      tooltip.style.top = `${e.clientY - 50}px`\n    }\n  })\n  container.addEventListener('mouseleave', () => {\n    const tooltip = document.querySelector('.x6-tooltip') as HTMLElement\n    tooltip.style.left = '-1000px'\n    tooltip.style.top = '-1000px'\n  })\n}\n\nclass Example extends React.Component {\n  private container!: HTMLDivElement\n\n  componentDidMount() {\n    const graph = new Graph({\n      container: this.container,\n      width: 800,\n      height: 600,\n      grid: true,\n      onPortRendered({ contentContainer, port, node }) {\n        const text = node.portProp(port.id, 'tip') as string\n        registerPortTooltip(contentContainer, text)\n      },\n    })\n\n    const source = graph.addNode({\n      x: 180,\n      y: 60,\n      width: 100,\n      height: 40,\n      attrs: {\n        body: {\n          stroke: '#5F95FF',\n          fill: '#EFF4FF',\n          strokeWidth: 1,\n        },\n      },\n      ports: {\n        groups: {\n          bottom: {\n            position: 'bottom',\n            attrs: {\n              circle: {\n                stroke: '#5F95FF',\n                strokeWidth: 1,\n                r: 4,\n                magnet: true,\n              },\n            },\n          },\n        },\n        items: [\n          {\n            id: 'port-1',\n            group: 'bottom',\n            tip: 'port-1-tip',\n          },\n        ],\n      },\n    })\n\n    const target = graph.addNode({\n      x: 320,\n      y: 250,\n      width: 100,\n      height: 40,\n      attrs: {\n        body: {\n          stroke: '#5F95FF',\n          fill: '#EFF4FF',\n          strokeWidth: 1,\n        },\n      },\n      ports: {\n        groups: {\n          top: {\n            position: 'top',\n            attrs: {\n              circle: {\n                stroke: '#5F95FF',\n                strokeWidth: 1,\n                r: 4,\n              },\n            },\n          },\n        },\n        items: [\n          {\n            id: 'port-2',\n            group: 'top',\n            tip: 'port-2-tip',\n          },\n        ],\n      },\n    })\n\n    graph.addEdge({\n      source: { cell: source, port: 'port-1' },\n      target: { cell: target, port: 'port-2' },\n      attrs: {\n        line: {\n          stroke: '#A2B1C3',\n          strokeWidth: 2,\n        },\n      },\n      zIndex: -1,\n    })\n  }\n\n  refContainer = (container: HTMLDivElement) => {\n    this.container = container\n  }\n\n  render() {\n    return (\n      <div className=\"x6-graph-wrap\">\n        <div ref={this.refContainer} className=\"x6-graph\" />\n        <Tooltip title=\"content\" overlayClassName=\"x6-tooltip\" visible={true}>\n          <span style={{ position: 'relative', left: -1000, top: -1000 }} />\n        </Tooltip>\n      </div>\n    )\n  }\n}\n\nconst container = document.getElementById('container')\nconst root = createRoot(container)\nroot.render(<Example />)\n\n// ReactDOM.render(<Example />, document.getElementById('container'))\n",title:{zh:"连接桩 ToolTip",en:"ToolTip For Port"},filename:"port-tooltip.tsx",isNew:!1}],icon:"",id:"tool",title:{en:"Node Tools",zh:"节点工具"},api:null,childrenKey:"demos",order:100}],childrenKey:"examples"},{id:"edge",title:{zh:"边",en:"Edge"},icon:"link",examples:[{demos:[{id:"edge",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*6UGgRb4EkuMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\nimport insertCss from 'insert-css'\n\nconst container = document.getElementById('container')\nconst graph = new Graph({\n  container,\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 240, y: 40 },\n  target: { x: 280, y: 180 },\n  vertices: [{ x: 240, y: 140 }],\n})\n\ngraph.addEdge({\n  source: { x: 340, y: 40 },\n  target: { x: 380, y: 180 },\n  vertices: [{ x: 340, y: 140 }],\n  connector: {\n    name: 'rounded',\n    args: { radius: 10 },\n  },\n  attrs: {\n    line: {\n      targetMarker: 'classic',\n      stroke: '#f5222d',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 440, y: 40 },\n  target: { x: 480, y: 180 },\n  vertices: [{ x: 440, y: 140 }],\n  connector: { name: 'smooth' },\n  attrs: {\n    line: {\n      stroke: '#faad14',\n      targetMarker: 'classic',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 540, y: 40 },\n  target: { x: 580, y: 180 },\n  vertices: [{ x: 540, y: 140 }],\n  connector: { name: 'smooth' },\n  attrs: {\n    line: {\n      stroke: '#1890ff',\n      strokeDasharray: 5,\n      targetMarker: 'classic',\n      style: {\n        animation: 'ant-line 30s infinite linear',\n      },\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 240, y: 240 },\n  target: { x: 280, y: 380 },\n  vertices: [{ x: 240, y: 340 }],\n  router: { name: 'er' },\n})\n\ngraph.addEdge({\n  source: { x: 340, y: 240 },\n  target: { x: 380, y: 380 },\n  vertices: [{ x: 340, y: 340 }],\n  router: { name: 'orth' },\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      targetMarker: 'classic',\n      stroke: '#f5222d',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 440, y: 240 },\n  target: { x: 480, y: 380 },\n  vertices: [{ x: 440, y: 340 }],\n  router: { name: 'manhattan' },\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      stroke: '#faad14',\n      targetMarker: 'classic',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 540, y: 240 },\n  target: { x: 580, y: 380 },\n  vertices: [{ x: 540, y: 360 }],\n  router: { name: 'metro' },\n  attrs: {\n    line: {\n      stroke: '#1890ff',\n      strokeDasharray: 5,\n      targetMarker: 'classic',\n    },\n  },\n})\n\n// 我们用 insert-css 协助demo演示\n// 实际项目中只要将下面样式添加到样式文件中\ninsertCss(`\n  @keyframes ant-line {\n    to {\n        stroke-dashoffset: -1000\n    }\n  }\n`)\n",title:{zh:"默认边",en:"Default Edge"},filename:"edge.ts",isNew:!1},{id:"gradient",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*ZwHVS56I4-oAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 320, y: 100 },\n  target: { x: 380, y: 260 },\n  vertices: [{ x: 320, y: 200 }],\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'stroke',\n    },\n    {\n      tagName: 'path',\n      selector: 'fill',\n    },\n  ],\n  connector: { name: 'rounded' },\n  attrs: {\n    fill: {\n      connection: true,\n      strokeWidth: 12,\n      strokeLinecap: 'round',\n      fill: 'none',\n      // 渐变使用教程：https://x6.antv.vision/zh/docs/api/registry/attr#fill\n      stroke: {\n        type: 'linearGradient',\n        stops: [\n          { offset: '0%', color: '#ccc' },\n          { offset: '50%', color: '#73d13d' },\n          { offset: '100%', color: '#ccc' },\n        ],\n      },\n    },\n    stroke: {\n      fill: 'none',\n      stroke: '#237804',\n      connection: true,\n      strokeWidth: 14,\n      strokeLinecap: 'round',\n    },\n  },\n})\n",title:{zh:"渐变背景色",en:"Gradient Edge"},filename:"gradient.ts",isNew:!1},{id:"cross-fill",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*e_nGTKT-IvwAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 320, y: 100 },\n  target: { x: 380, y: 260 },\n  vertices: [{ x: 320, y: 200 }],\n  connector: { name: 'rounded' },\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'wrap',\n      groupSelector: 'lines',\n    },\n    {\n      tagName: 'path',\n      selector: 'line1',\n      groupSelector: 'lines',\n    },\n    {\n      tagName: 'path',\n      selector: 'line2',\n      groupSelector: 'lines',\n    },\n    {\n      tagName: 'path',\n      selector: 'line3',\n      groupSelector: 'lines',\n    },\n  ],\n  attrs: {\n    lines: {\n      connection: true,\n      strokeDasharray: '10,20',\n      strokeLinejoin: 'round',\n      fill: 'none',\n    },\n    line1: {\n      stroke: '#fe854f',\n      strokeWidth: 8,\n    },\n    line2: {\n      stroke: '#7c68fc',\n      strokeDashoffset: 10,\n      strokeWidth: 8,\n    },\n    line3: {\n      strokeWidth: 8,\n      strokeDashoffset: 20,\n      stroke: '#73d13d',\n      targetMarker: {\n        tagName: 'path',\n        stroke: '#73d13d',\n        strokeWidth: 2,\n        d: 'M 0 -4 0 -10 -12 0 0 10 0 4',\n      },\n    },\n  },\n})\n",title:{zh:"交错背景色",en:"Cross Filled Edge"},filename:"cross-fill.ts",isNew:!1},{id:"shape-on-edge",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*-Fx8R7nNZuMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nGraph.registerEdge(\n  'arrow',\n  {\n    markup: [\n      {\n        tagName: 'path',\n        selector: 'wrap',\n        attrs: {\n          fill: 'none',\n          cursor: 'pointer',\n          stroke: 'transparent',\n        },\n      },\n      {\n        tagName: 'path',\n        selector: 'line',\n        attrs: {\n          fill: 'none',\n          'pointer-events': 'none',\n        },\n      },\n      {\n        tagName: 'path',\n        groupSelector: 'arrow',\n        selector: 'arrow1',\n      },\n      {\n        tagName: 'path',\n        groupSelector: 'arrow',\n        selector: 'arrow2',\n      },\n      {\n        tagName: 'path',\n        groupSelector: 'arrow',\n        selector: 'arrow3',\n      },\n    ],\n    attrs: {\n      wrap: {\n        connection: true,\n        strokeWidth: 10,\n        strokeLinejoin: 'round',\n      },\n      line: {\n        connection: true,\n        stroke: '#333333',\n        strokeWidth: 2,\n        strokeLinejoin: 'round',\n        targetMarker: 'classic',\n      },\n      arrow: {\n        d: 'M 0 -10 10 0 0 10 z',\n        fill: '#ffffff',\n        stroke: '#333333',\n        pointerEvents: 'none',\n      },\n      arrow1: {\n        // atConnectionRatio: 将边中的指定元素移动到指定比例 [0, 1] 位置处，并自动旋转元素，\n        // 使其方向与所在位置边的斜率保持一致。教程 https://x6.antv.vision/zh/docs/api/registry/attr#atconnectionratiokeepgradient\n        atConnectionRatio: 0.25,\n      },\n      arrow2: {\n        atConnectionRatio: 0.5,\n      },\n      arrow3: {\n        atConnectionRatio: 0.75,\n      },\n    },\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 320, y: 100 },\n  target: { x: 380, y: 260 },\n  vertices: [{ x: 320, y: 200 }],\n  shape: 'arrow',\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      stroke: '#73d13d',\n      strokeWidth: 3,\n    },\n    arrow: {\n      d: 'M 0 -6 8 0 0 6 z',\n      fill: '#ED8A19',\n      stroke: '#ED8A19',\n    },\n  },\n})\n",title:{zh:"沿边长度方向上的图形",en:"Custom Shape On the Edge"},filename:"shape-on-edge.ts",isNew:!1},{id:"custom-click-event",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*ZmhTRaPgOQgAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.on('edge:customevent', ({ name, e, edge }) => {\n  if (name === 'click:circle' || name === 'click:rect') {\n    e.stopPropagation()\n    const t = edge.attr<number>('c1/atConnectionRatio') > 0.3 ? 0.3 : 0.9\n    edge.animate(\n      {\n        'attrs/c1/atConnectionRatio': t,\n        'attrs/c2/atConnectionRatio': t,\n      },\n      {\n        delay: 100,\n        duration: 1000,\n        easing: 'ease-in-out-back',\n        fill: 'forwards',\n      },\n    )\n  }\n})\n\ngraph.addEdge({\n  source: { x: 320, y: 60 },\n  target: { x: 380, y: 300 },\n  vertices: [{ x: 320, y: 200 }],\n  connector: { name: 'rounded' },\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'p1',\n    },\n    {\n      tagName: 'path',\n      selector: 'p2',\n    },\n    {\n      tagName: 'rect',\n      selector: 'sign',\n    },\n    {\n      tagName: 'circle',\n      selector: 'c1',\n    },\n    {\n      tagName: 'circle',\n      selector: 'c2',\n    },\n    {\n      tagName: 'text',\n      selector: 'signText',\n    },\n  ],\n  attrs: {\n    p1: {\n      connection: true,\n      fill: 'none',\n      stroke: '#237804',\n      strokeWidth: 6,\n      strokeLinejoin: 'round',\n    },\n    p2: {\n      connection: true,\n      fill: 'none',\n      stroke: '#73d13d',\n      strokeWidth: 4,\n      pointerEvents: 'none',\n      strokeLinejoin: 'round',\n      targetMarker: {\n        tagName: 'path',\n        fill: '#73d13d',\n        stroke: '#237804',\n        strokeWidth: 1,\n        d: 'M 10 -3 10 -10 -2 0 10 10 10 3',\n      },\n    },\n    sign: {\n      x: -20,\n      y: -10,\n      width: 50,\n      height: 20,\n      stroke: '#237804',\n      fill: '#73d13d',\n      atConnectionLength: 30,\n      strokeWidth: 1,\n      event: 'click:rect',\n      cursor: 'pointer',\n    },\n    signText: {\n      atConnectionLength: 34,\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n      text: 'Token',\n      event: 'click:rect',\n      cursor: 'pointer',\n    },\n    c1: {\n      r: 10,\n      stroke: '#f5222d',\n      fill: '#fe854f',\n      atConnectionRatio: 0.68,\n      strokeWidth: 1,\n      event: 'click:circle',\n      cursor: 'pointer',\n    },\n    c2: {\n      r: 5,\n      stroke: '#f5222d',\n      fill: 'white',\n      atConnectionRatio: 0.68,\n      strokeWidth: 1,\n      pointerEvents: 'none',\n    },\n  },\n})\n",title:{zh:"自定义点击事件",en:"Custom Click Event"},filename:"custom-click-event.ts",isNew:!1}],icon:"",id:"edge",title:{en:"Style",zh:"样式"},api:null,childrenKey:"demos",order:10},{demos:[{id:"native-markers",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*qAg2R6KwA3wAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// 内置箭头：https://x6.antv.vision/zh/docs/tutorial/intermediate/marker#%E5%86%85%E7%BD%AE%E7%AE%AD%E5%A4%B4\n\nconst markers = [\n  ['block', { size: 6 }],\n  ['classic', { size: 6 }],\n  ['diamond', { size: 8 }],\n  ['circle', { size: 6 }],\n  ['circlePlus', { size: 6 }],\n  ['ellipse', { rx: 6, ry: 4 }],\n  ['cross', { size: 8, offset: 1 }],\n  ['async', { size: 8, offset: 1 }],\n]\n\nmarkers.forEach(([marker, args], i) => {\n  graph.addEdge({\n    sourcePoint: [220, 30 + i * 40],\n    targetPoint: [500, 30 + i * 40],\n    label: marker,\n    attrs: {\n      line: {\n        sourceMarker: {\n          args,\n          name: marker,\n        },\n        targetMarker: {\n          args,\n          name: marker,\n        },\n        strokeWidth: 1,\n      },\n    },\n  })\n})\n",title:{zh:"内置箭头",en:"Native Markers"},filename:"native-markers.ts",isNew:!1},{id:"path-marker",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*pgIDSbj95uQAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 240, y: 120 },\n  target: { x: 420, y: 80 },\n  vertices: [{ x: 320, y: 170 }],\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      sourceMarker: {\n        tagName: 'path',\n        d: 'M 20 -10 0 0 20 10 Z',\n      },\n      targetMarker: {\n        tagName: 'path',\n        d: 'M 20 -10 0 0 20 10 Z',\n        strokeWidth: 2,\n        fill: '#73d13d',\n        stroke: '#237804',\n      },\n    },\n  },\n})\n",title:{zh:"使用 path 自定义箭头",en:"Custom Marker with Path"},filename:"path-marker.ts",isNew:!1},{id:"shape-marker",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*Ng-CRKYxOVgAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 240, y: 120 },\n  target: { x: 420, y: 80 },\n  vertices: [{ x: 320, y: 170 }],\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      sourceMarker: {\n        tagName: 'circle',\n        r: 12,\n        cx: 12,\n        fill: '#ffd591',\n        stroke: '#ffa940',\n      },\n      targetMarker: {\n        tagName: 'ellipse',\n        rx: 20,\n        ry: 10,\n        cx: 20,\n        fill: '#73d13d',\n        stroke: '#237804',\n      },\n    },\n  },\n})\n",title:{zh:"使用图形元素自定义箭头",en:"Custom Marker with Base Shapes"},filename:"shape-marker.ts",isNew:!1},{id:"image-marker",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*9CphTZypdpkAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst marker = {\n  tagName: 'image',\n  // https://www.iconfinder.com/icons/15539/arrow_left_previos_icon\n  'xlink:href':\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFMklEQVRYR+2WaWxUVRiGnzt3lntnptPOdGba6ZRS7ALUsFY2g7SyhKWA0ALKHrBgWBRqQioQKJZdVpHdH5jKokGBgopoBCpbIkvYJIoIspUudGEYmHY6c8eMLCHIojVATLjJ+XfP9z75znve7wg84094xvo8B/jfd8AsQZMq2AP4a+On/9KBZqmyvPpnj+enUhhTG/HgnloB6GFU/8YJM40Gg/mjA0dHK7DiaQHEN0CYkzmke8ao+SOYmTk/MGvrj12A7540gDEE+neJi80ZO/0tZ7v+rwOVZMSkuTddvNIKOPWkAV4a1jBu/3sLummi6xmpqizh/O8VZI3e8UeB60ZroPhJAOiA6juFW5vlrV99k9lDY5BAFDm2+wyjx205dNLnG2AymRJdLtevwJl7QGQguEyACqgCKgDPvbAPMqEzCkY6NdpOB2u8fYHLgKZnXJ19+Wc+bQFBLpk9679k8rsfX7e+3MZrMBrD9+Xnr/W4XMcjjVJilD08tq4zMiY03GTTaWVtQPELJUVlyuWzhZeOFhYVXERZDRy5/xY0jYIBHRvEDewz/NWoUJuRqZPW7T10pXRzS4u5w8ylmd3a9G8D1X7Qacib9AknTonkfr6OJYsXUT/iJimpzTHHRgABwAWuIryuMnzVHnw1ApWlHvZvP8GGlQWVWyuuDQG2CREwPNFoHNa1S6OWKV2StInJDkJC/Cg1XorOlXPxTCUxDevgiLdzo+IqNdfKELwlrFpwmMjkMYyYNY0ZM6bx5tAEHFFq3L8c4dql01Rdr0AjmZBCLaj1JrSGUDSSjE6vpiD/HJPHrT27z+NuFTyCVxJFMXvMoLZpaekRhJo8uCt9+Lw1CHjRaDQoiPj8IKol1JIOQ5jEqnlHCU3sxdD3c8jJzmJAiwtY9T4EKQSjIw5DZCxanRFkAyjgdRXjdZVjtEaD3kBWxyks3nui310PqGB8rzrWKeOyUy3J7euhlqz4FQMBRSEQ8COogj4S8N6oxO8+zcoPjqB/oTudR2WyYtFcsnpL2BwOVDrDrXjz3+piTc1NqsqKCfi9mOomIVscqIUq5o1dw8SNB7LuN2GjeEHMGdYzKSN9UALRCTEIchwIOqrdZfg9blQ6CcF3gSW5uxCdnWiakc6OTWvITtdhDNHj94sEVEGjiqAIBEQBtU6PWjbi93sRUOG7fp4lU75m5s6zfwO4Y8zBaZGm3IG9bHWTW8iExaWgtTVBo9WhUmtwnd7C0tk7uWpuT6u+vfn+szWBpOqTQp1oPXaHCZvDhMlqRh9mxRBuRyOF4PepUNChxsPpfRtZNPs31l9yjX3ULIirhzBncIq9z2v9HMQmp2KMCaauSNnxPJbN2Myuy9HlSZ1TLMcOHjp78PDhhWEQHymKjZ2y2CDSoolwOnRiRIQOq02L3WnBEWPD5ykl/4vz7D+s1Pzgrmz/uGGk0sDbfeuZc9/IkEzNU1rjbDsV9+UCFr+Ty/Sd5XMFWS4ON5uTCwsLB9++f1rACsSroGkYNI4U1UkOvTYxVBYssloreKq07C0vziuBkY8DuBNa7doapeVDu6pf7NivDbb6HViW/SFTtl+Z44WJt9PuJuB7SCTrATvQUA/NvODzQR5Q9E8BgnWj6wvi8mGdQnr0Tjfw7Q6FCZuvzPfChNrOgdq8B3QWmD0+1ZJlCtEwaVvxspsw9mkC/KUlw/jeDvvC3cVXNxQqysCnDhAUlGCkXaVqcUFRRj3i7B/L9m888KBiDqAM8D5W6SE//FeA2ure3fcc4HkH/gSNF7Qt0mUkowAAAABJRU5ErkJggg==',\n  width: 32,\n  height: 32,\n  x: -16,\n  y: -16,\n}\n\ngraph.addEdge({\n  source: { x: 240, y: 120 },\n  target: { x: 420, y: 80 },\n  vertices: [{ x: 320, y: 170 }],\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      stroke: '#653433',\n      sourceMarker: { ...marker },\n      targetMarker: { ...marker },\n    },\n  },\n})\n",title:{zh:"使用 image 自定义箭头",en:"Custom Marker with Image"},filename:"image-marker.ts",isNew:!1},{id:"custom-marker",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*AbVgSbIIzbEAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\n// https://x6.antv.vision/zh/docs/tutorial/intermediate/marker#path\ngraph.addEdge({\n  source: { x: 240, y: 120 },\n  target: { x: 420, y: 80 },\n  vertices: [{ x: 320, y: 170 }],\n  connector: { name: 'rounded' },\n  attrs: {\n    line: {\n      strokeWidth: 2,\n      stroke: '#52c41a',\n      sourceMarker: {\n        name: 'path',\n        d: 'M5.5,15.499,15.8,21.447,15.8,15.846,25.5,21.447,25.5,9.552,15.8,15.152,15.8,9.552z',\n      },\n      targetMarker: {\n        name: 'path',\n        offsetX: 10,\n        d: 'M4.834,4.834L4.833,4.833c-5.889,5.892-5.89,15.443,0.001,21.334s15.44,5.888,21.33-0.002c5.891-5.891,5.893-15.44,0.002-21.33C20.275-1.056,10.725-1.056,4.834,4.834zM25.459,5.542c0.833,0.836,1.523,1.757,2.104,2.726l-4.08,4.08c-0.418-1.062-1.053-2.06-1.912-2.918c-0.859-0.859-1.857-1.494-2.92-1.913l4.08-4.08C23.7,4.018,24.622,4.709,25.459,5.542zM10.139,20.862c-2.958-2.968-2.959-7.758-0.001-10.725c2.966-2.957,7.756-2.957,10.725,0c2.954,2.965,2.955,7.757-0.001,10.724C17.896,23.819,13.104,23.817,10.139,20.862zM5.542,25.459c-0.833-0.837-1.524-1.759-2.105-2.728l4.081-4.081c0.418,1.063,1.055,2.06,1.914,2.919c0.858,0.859,1.855,1.494,2.917,1.913l-4.081,4.081C7.299,26.982,6.379,26.292,5.542,25.459zM8.268,3.435l4.082,4.082C11.288,7.935,10.29,8.571,9.43,9.43c-0.858,0.859-1.494,1.855-1.912,2.918L3.436,8.267c0.58-0.969,1.271-1.89,2.105-2.727C6.377,4.707,7.299,4.016,8.268,3.435zM22.732,27.563l-4.082-4.082c1.062-0.418,2.061-1.053,2.919-1.912c0.859-0.859,1.495-1.857,1.913-2.92l4.082,4.082c-0.58,0.969-1.271,1.891-2.105,2.728C24.623,26.292,23.701,26.983,22.732,27.563z',\n      },\n    },\n  },\n})\n",title:{zh:"自定义复杂箭头",en:"Custom Marker with Complexity Path"},filename:"custom-marker.ts",isNew:!1}],icon:"",id:"marker",title:{en:"Marker",zh:"箭头"},api:null,childrenKey:"demos",order:20},{demos:[{id:"render-with-svg",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*g1_HTZNyfC0AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nGraph.registerEdge(\n  'custom-edge-label',\n  {\n    inherit: 'edge',\n    defaultLabel: {\n      markup: [\n        {\n          tagName: 'rect',\n          selector: 'body',\n        },\n        {\n          tagName: 'text',\n          selector: 'label',\n        },\n      ],\n      attrs: {\n        label: {\n          fill: '#000',\n          fontSize: 14,\n          textAnchor: 'middle',\n          textVerticalAnchor: 'middle',\n          pointerEvents: 'none',\n        },\n        body: {\n          ref: 'label',\n          fill: '#ffd591',\n          stroke: '#ffa940',\n          strokeWidth: 2,\n          rx: 4,\n          ry: 4,\n          refWidth: '140%',\n          refHeight: '140%',\n          refX: '-20%',\n          refY: '-20%',\n        },\n      },\n      position: {\n        distance: 200,\n        options: {\n          absoluteDistance: true,\n          reverseDistance: true,\n        },\n      },\n    },\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: [170, 160],\n  target: [550, 160],\n  shape: 'custom-edge-label',\n  attrs: {\n    line: {\n      stroke: '#ccc',\n    },\n  },\n  labels: [\n    {\n      attrs: {\n        line: {\n          stroke: '#73d13d',\n        },\n        text: {\n          text: 'Custom Label',\n        },\n      },\n    },\n  ],\n})\n",title:{zh:"使用 SVG 渲染 Label",en:"Use SVG to Render Label"},filename:"render-with-svg.ts",isNew:!1},{id:"render-with-html",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*EN48Tbp7jcAAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Markup } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  onEdgeLabelRendered: (args) => {\n    const { selectors } = args\n    const content = selectors.foContent as HTMLDivElement\n    if (content) {\n      const btn = document.createElement('button')\n      btn.appendChild(document.createTextNode('HTML Button'))\n      btn.style.width = '100%'\n      btn.style.height = '100%'\n      btn.style.lineHeight = '1'\n      btn.style.borderRadius = '4px'\n      btn.style.textAlign = 'center'\n      btn.style.color = '#000'\n      btn.style.background = '#ffd591'\n      btn.style.border = '2px solid #ffa940'\n      btn.addEventListener('click', () => {\n        alert('clicked')\n      })\n      content.appendChild(btn)\n    }\n  },\n})\n\ngraph.addEdge({\n  source: [170, 160],\n  target: [550, 160],\n  defaultLabel: {\n    markup: Markup.getForeignObjectMarkup(),\n    attrs: {\n      fo: {\n        width: 120,\n        height: 30,\n        x: 60,\n        y: -15,\n      },\n    },\n  },\n  label: {\n    position: 0.25,\n  },\n  attrs: {\n    line: {\n      stroke: '#ccc',\n    },\n  },\n})\n",title:{zh:"使用 HTML 渲染 Label",en:"Use HTML to Render Label"},filename:"render-with-html.ts",isNew:!1},{id:"render-with-react",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*8Er1Tb89MaoAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Markup } from '@antv/x6'\nimport React from 'react'\nimport { createRoot } from 'react-dom/client'\n\nclass Label extends React.Component {\n  onClick = () => {\n    alert('clicked')\n  }\n\n  render() {\n    return (\n      <button\n        style={{\n          width: '100%',\n          height: '100%',\n          textAlign: 'center',\n          color: '#000',\n          background: '#ffd591',\n          border: '2px solid #ffa940',\n          borderRadius: 4,\n        }}\n        onClick={this.onClick}\n      >\n        React Button\n      </button>\n    )\n  }\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  onEdgeLabelRendered: (args) => {\n    const { selectors } = args\n    const content = selectors.foContent as HTMLDivElement\n    if (content) {\n      createRoot(content).render(<Label />)\n    }\n  },\n})\n\ngraph.addEdge({\n  source: [170, 160],\n  target: [550, 160],\n  defaultLabel: {\n    markup: Markup.getForeignObjectMarkup(),\n    attrs: {\n      fo: {\n        width: 120,\n        height: 30,\n        x: 60,\n        y: -15,\n      },\n    },\n  },\n  label: {\n    position: 0.25,\n  },\n  attrs: {\n    line: {\n      stroke: '#ccc',\n    },\n  },\n})\n",title:{zh:"使用 React 渲染 Label",en:"Use React to Render Label"},filename:"render-with-react.tsx",isNew:!1},{id:"multi-labels",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*hHq7R4vqWjIAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: [170, 160],\n  target: [550, 160],\n  attrs: {\n    line: {\n      stroke: '#ccc',\n    },\n  },\n  labels: [\n    // label1\n    {\n      markup: [\n        {\n          tagName: 'rect',\n          selector: 'labelBody',\n        },\n        {\n          tagName: 'text',\n          selector: 'labelText',\n        },\n      ],\n      attrs: {\n        labelText: {\n          text: 'Label 1',\n          fill: '#ffa940',\n          textAnchor: 'middle',\n          textVerticalAnchor: 'middle',\n        },\n        labelBody: {\n          ref: 'labelText',\n          refX: -8,\n          refY: -5,\n          refWidth: '100%',\n          refHeight: '100%',\n          refWidth2: 16,\n          refHeight2: 10,\n          stroke: '#ffa940',\n          fill: '#fff',\n          strokeWidth: 2,\n          rx: 5,\n          ry: 5,\n        },\n      },\n      position: {\n        distance: 0.3,\n        args: {\n          keepGradient: true,\n          ensureLegibility: true,\n        },\n      },\n    },\n    // label 2\n    {\n      markup: [\n        {\n          tagName: 'ellipse',\n          selector: 'labelBody',\n        },\n        {\n          tagName: 'text',\n          selector: 'labelText',\n        },\n      ],\n      attrs: {\n        labelText: {\n          text: 'Label 2',\n          fill: '#31d0c6',\n          textAnchor: 'middle',\n          textVerticalAnchor: 'middle',\n        },\n        labelBody: {\n          ref: 'labelText',\n          refRx: '80%',\n          refRy: '80%',\n          stroke: '#31d0c6',\n          fill: '#fff',\n          strokeWidth: 2,\n        },\n      },\n      position: {\n        distance: 0.7,\n        angle: 45,\n      },\n    },\n  ],\n})\n",title:{zh:"渲染多个 Label",en:"Render Multiple Labels"},filename:"multi-labels.ts",isNew:!1},{id:"label-along-path",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*OHSrQop8Z30AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 310, y: 100 },\n  target: { x: 380, y: 260 },\n  vertices: [{ x: 320, y: 200 }],\n  connector: { name: 'smooth' },\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'line',\n      attrs: {\n        fill: 'none',\n        pointerEvents: 'none',\n      },\n    },\n    {\n      tagName: 'text',\n      selector: 'label',\n    },\n  ],\n  attrs: {\n    line: {\n      connection: true,\n      stroke: '#52c41a',\n      strokeWidth: 20,\n      strokeLinejoin: 'round',\n      targetMarker: '',\n    },\n    label: {\n      // textPath 教程：https://x6.antv.vision/zh/docs/api/registry/attr#textpath\n      textPath: { selector: 'line', startOffset: '50%' },\n      textAnchor: 'middle',\n      textVerticalAnchor: 'middle',\n      text: 'Label Along Path',\n      fill: '#237804',\n    },\n  },\n})\n",title:{zh:"沿路径的 Label",en:"Label Along Path"},filename:"label-along-path.ts",isNew:!1}],icon:"",id:"label",title:{en:"Label",zh:"标签"},api:null,childrenKey:"demos",order:30},{demos:[{id:"normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*rpQdR4VOZQMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  // https://x6.antv.antgroup.com/api/registry/router#normal\n  router: {\n    name: 'normal',\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"默认路由",en:"Normal Router"},filename:"normal.ts",isNew:!1},{id:"orth-normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*61fPRbYQnwEAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  // https://x6.antv.antgroup.com/api/registry/router#orth\n  router: {\n    name: 'orth',\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"拐线",en:"Orth Router"},filename:"orth-normal.ts",isNew:!1},{id:"orth-vertices",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*xdwhR5Z3PfAAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  // https://x6.antv.antgroup.com/api/registry/router#orth\n  router: {\n    name: 'orth',\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"正交线",en:"Orth Router With Vertices"},filename:"orth-vertices.ts",isNew:!1},{id:"er-normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*9FmqSaP7LoYAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  // https://x6.antv.antgroup.com/api/registry/router#er\n  router: {\n    name: 'er',\n    args: {\n      offset: 40,\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"关系路由",en:"ER Router"},filename:"er-normal.ts",isNew:!1},{id:"er-center",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*NTVWSbc9Cz0AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  // https://x6.antv.antgroup.com/api/registry/router#er\n  router: {\n    name: 'er',\n    args: {\n      offset: 'center',\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"关系路由",en:"ER Center Router"},filename:"er-center.ts",isNew:!1},{id:"manhattan",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*MaA1T5rdWVYAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node, Edge, EdgeView } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst obstacles: Node[] = []\nconst obstacle = graph.addNode({\n  x: 240,\n  y: 120,\n  width: 80,\n  height: 30,\n  attrs: {\n    body: {\n      fill: '#ffd591',\n      stroke: '#ffa940',\n    },\n  },\n})\n\nlet edge: Edge\n\nconst update = () => {\n  const edgeView = graph.findViewByCell(edge) as EdgeView\n  edgeView.update()\n}\n\nobstacles.push(obstacle)\nobstacles.push(graph.addNode(obstacle.clone().translate(100, 80)))\nobstacles.push(graph.addNode(obstacle.clone().translate(-100, 140)))\nobstacles.forEach((obstacle) => obstacle.on('change:position', update))\n\nedge = graph.addEdge({\n  source,\n  target,\n  router: {\n    name: 'manhattan',\n    args: {\n      startDirections: ['bottom'],\n      endDirections: ['top'],\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n\nupdate()\n\ngraph.translate(50, 0)\n",title:{zh:"智能路由",en:"Manhattan Router"},filename:"manhattan.ts",isNew:!1},{id:"metro",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*guRmSZlF-oEAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node, Edge, EdgeView } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst obstacles: Node[] = []\nconst obstacle = graph.addNode({\n  x: 240,\n  y: 120,\n  width: 80,\n  height: 30,\n  attrs: {\n    body: {\n      fill: '#ffd591',\n      stroke: '#ffa940',\n    },\n  },\n})\n\nlet edge: Edge\n\nconst update = () => {\n  const edgeView = graph.findViewByCell(edge) as EdgeView\n  edgeView.update()\n}\n\nobstacles.push(obstacle)\nobstacles.push(graph.addNode(obstacle.clone().translate(100, 80)))\nobstacles.push(graph.addNode(obstacle.clone().translate(-100, 140)))\nobstacles.forEach((obstacle) => obstacle.on('change:position', update))\n\nedge = graph.addEdge({\n  source,\n  target,\n  router: {\n    name: 'metro',\n    args: {\n      startDirections: ['bottom'],\n      endDirections: ['top'],\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"智能地铁路由",en:"Metro Router"},filename:"metro.ts",isNew:!1},{id:"one-side",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*H42jSbTYRyoAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  // https://x6.antv.antgroup.com/api/registry/router#oneside\n  router: {\n    name: 'oneSide',\n    args: {\n      side: 'right',\n      padding: 50,\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"单侧路由",en:"OneSide Router"},filename:"one-side.ts",isNew:!1},{id:"custom-random-router",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*byYNRLBM9_0AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Point } from '@antv/x6'\n\nGraph.registerRouter(\n  'random',\n  (vertices, args, view) => {\n    const BOUNCES = args.bounces || 20\n    const points = vertices.map((p) => Point.create(p))\n\n    for (let i = 0; i < BOUNCES; i += 1) {\n      const sourceCorner = view.sourceBBox.getCenter()\n      const targetCorner = view.targetBBox.getCenter()\n      const randomPoint = Point.random(\n        sourceCorner.x,\n        targetCorner.x,\n        sourceCorner.y,\n        targetCorner.y,\n      )\n      points.push(randomPoint)\n    }\n\n    return points\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  router: {\n    name: 'random',\n    args: {\n      bounces: 3,\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"自定义随机路由",en:"Custom Random Router"},filename:"custom-random-router.ts",isNew:!1}],icon:"",id:"router",title:{en:"Router",zh:"路由"},api:null,childrenKey:"demos",order:40},{demos:[{id:"normal",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*ItzNQb0v8QMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  id: 'a',\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addNode({\n  id: 'b',\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: 'a',\n  target: 'b',\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  // https://x6.antv.vision/zh/docs/api/registry/connector#normal\n  connector: { name: 'normal' },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"默认连线",en:"Normal Connector"},filename:"normal.ts",isNew:!1},{id:"rounded",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*XeN0Q4kyuBMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  // https://x6.antv.vision/zh/docs/api/registry/connector#rounded\n  connector: {\n    name: 'rounded',\n    args: {\n      radius: 20,\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"圆角连线",en:"Rounded Connector"},filename:"rounded.ts",isNew:!1},{id:"smooth",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*b7ETSqUNr00AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  // https://x6.antv.vision/zh/docs/api/registry/connector#smooth\n  connector: { name: 'smooth' },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"平滑连线（三次贝塞尔曲线）",en:"Smooth Connector"},filename:"smooth.ts",isNew:!1},{id:"jumpover",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*YfAITIxsiFIAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst rect = graph.createNode({\n  x: 140,\n  y: 40,\n  width: 70,\n  height: 30,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst source = graph.addNode(rect.clone().position(30, 90))\nconst target = graph.addNode(rect.clone().position(30, 170))\n\nconst edge = graph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 640, y: 160 },\n    { x: 640, y: 240 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n\nfor (let i = 0; i < 5; i += 1) {\n  const source = graph.addNode(rect.clone().translate(i * 100, i * 10))\n  const target = graph.addNode(source.clone().translate(0, 200))\n\n  if (i % 2 === 0) {\n    graph.addEdge({\n      source,\n      target,\n      connector: {\n        name: 'jumpover',\n        args: {\n          type: 'gap',\n        },\n      },\n      attrs: {\n        line: {\n          stroke: '#faad14',\n        },\n      },\n    })\n  } else {\n    graph.addEdge({\n      source,\n      target,\n      attrs: {\n        line: {\n          stroke: '#d9d9d9',\n        },\n      },\n    })\n  }\n}\n\nedge.setConnector('jumpover')\n",title:{zh:"跳线",en:"Jumpover Connector"},filename:"jumpover.ts",isNew:!1},{id:"curve",screenshot:"https://mdn.alipayobjects.com/huamei_f4t1bn/afts/img/A*rQ1RT61kot8AAAAAAAAAAAAADtOHAQ/original",source:"import { Graph, Path, Transform } from '@antv/x6'\n\nconst degreesToRadians = (degrees) => degrees * (Math.PI / 180)\nconst transCanvasAngleToRos = (angle) => angle - 90\n\nconst calcPoint = (p) => {\n  const distance = 10\n  const theta = degreesToRadians(transCanvasAngleToRos(p.angle))\n  const x = p.x + distance * Math.cos(theta)\n  const y = p.y + distance * Math.sin(theta)\n  return { x, y }\n}\n\nconst calcIntersectionPoint = (points) => {\n  const [p1, p2] = points\n  const p11 = calcPoint(p1)\n  const p22 = calcPoint(p2)\n  const d1 = (p1.x - p11.x) * (p2.y - p22.y)\n  const d2 = (p1.y - p11.y) * (p2.x - p22.x)\n  const d = d1 - d2\n\n  if (d === 0) {\n    return { x: p1.x, y: p1.y }\n  }\n\n  const u1 = p1.x * p11.y - p1.y * p11.x\n  const u4 = p2.x * p22.y - p2.y * p22.x\n\n  const u2x = p2.x - p22.x\n  const u3x = p1.x - p11.x\n  const u2y = p2.y - p22.y\n  const u3y = p1.y - p11.y\n\n  const px = (u1 * u2x - u3x * u4) / d\n  const py = (u1 * u2y - u3y * u4) / d\n\n  const p = { x: px, y: py }\n\n  return p\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  connecting: {\n    anchor: 'nodeCenter',\n    connectionPoint: 'anchor',\n  },\n})\ngraph.use(\n  new Transform({\n    rotating: {\n      enabled: true,\n    },\n  }),\n)\n\nGraph.registerConnector(\n  'curve',\n  (sourcePoint, targetPoint) => {\n    const path = new Path()\n    path.appendSegment(Path.createSegment('M', sourcePoint))\n    // 基于方向获取控制点\n    const controlPoint = calcIntersectionPoint([\n      {\n        ...sourcePoint,\n        angle: graph.getNodesFromPoint(sourcePoint)[0].getAngle(),\n      },\n      {\n        ...targetPoint,\n        angle: graph.getNodesFromPoint(targetPoint)[0].getAngle(),\n      },\n    ])\n    // 基于控制点生成二次贝塞尔曲线\n    path.appendSegment(path.quadTo(controlPoint, targetPoint))\n    return path.serialize()\n  },\n  true,\n)\n\ngraph.addNode({\n  id: 'source',\n  x: 120,\n  y: 40,\n  angle: 0,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addNode({\n  id: 'target',\n  x: 400,\n  y: 260,\n  angle: 0,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source: 'source',\n  target: 'target',\n  connector: { name: 'curve' },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"二次贝塞尔曲线",en:"Quadratic Bessel Curve"},filename:"curve.ts",isNew:!1},{id:"wobble",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*A19zSqro4asAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Path, Point } from '@antv/x6'\n\n// 帮助文档：https://x6.antv.vision/zh/docs/api/registry/connector#registry\nGraph.registerConnector(\n  'wobble',\n  (sourcePoint, targetPoint, vertices, args) => {\n    const spread = args.spread || 20\n    const points = [...vertices, targetPoint].map((p) => Point.create(p))\n    let prev = Point.create(sourcePoint)\n    const path = new Path()\n    path.appendSegment(Path.createSegment('M', prev))\n\n    for (let i = 0, n = points.length; i < n; i += 1) {\n      const next = points[i]\n      const distance = prev.distance(next)\n      let d = spread\n\n      while (d < distance) {\n        const current = prev.clone().move(next, -d)\n        current.translate(\n          Math.floor(7 * Math.random()) - 3,\n          Math.floor(7 * Math.random()) - 3,\n        )\n        path.appendSegment(Path.createSegment('L', current))\n        d += spread\n      }\n\n      path.appendSegment(Path.createSegment('L', next))\n      prev = next\n    }\n\n    return path\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\ngraph.addEdge({\n  source,\n  target,\n  vertices: [\n    { x: 200, y: 200 },\n    { x: 380, y: 120 },\n  ],\n  connector: {\n    name: 'wobble',\n    args: {\n      spread: 10,\n    },\n  },\n  attrs: {\n    line: {\n      stroke: '#722ed1',\n    },\n  },\n})\n",title:{zh:"随机摇摆线",en:"Custom Wobble Connector"},filename:"wobble.ts",isNew:!1},{id:"multiple-smooth-edges",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*9b-SRYGRGToAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Line, Path, Curve } from '@antv/x6'\n\nGraph.registerConnector(\n  'multi-smooth',\n  (\n    sourcePoint,\n    targetPoint,\n    routePoints,\n    options: { raw?: boolean; index?: number; total?: number; gap?: number },\n  ) => {\n    const { index = 0, total = 1, gap = 12 } = options\n    const line = new Line(sourcePoint, targetPoint)\n    const centerIndex = (total - 1) / 2\n    const dist = index - centerIndex\n    const diff = Math.abs(dist)\n    const factor = diff === 0 ? 1 : diff / dist\n    const vertice = line\n      .pointAtLength(line.length() / 2 + gap * factor * Math.ceil(diff))\n      .rotate(90, line.getCenter())\n\n    const points = [sourcePoint, vertice, targetPoint]\n    const curves = Curve.throughPoints(points)\n    const path = new Path(curves)\n    return options.raw ? path : path.serialize()\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst source = graph.addNode({\n  x: 120,\n  y: 40,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst target = graph.addNode({\n  x: 400,\n  y: 260,\n  width: 100,\n  height: 40,\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n    },\n  },\n})\n\nconst total = 15\nfor (let i = 0; i < total; i += 1) {\n  graph.addEdge({\n    source,\n    target,\n    connector: {\n      name: 'multi-smooth',\n      args: {\n        total,\n        index: i,\n      },\n    },\n    attrs: {\n      line: {\n        stroke: '#722ed1',\n        strokeWidth: 1,\n        targetMarker: null,\n      },\n    },\n  })\n}\n",title:{zh:"多条光滑曲线",en:"Multiple Smooth Edges"},filename:"multiple-smooth-edges.ts",isNew:!1}],icon:"",id:"connector",title:{en:"Connector",zh:"连线"},api:null,childrenKey:"demos",order:50},{demos:[{id:"vertices",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*d_XRRa7kj2EAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  onToolItemCreated({ name, cell, tool }) {\n    if (name === 'vertices' && cell === edge2) {\n      const options = (tool as any).options\n      if (options && options.index % 2 === 1) {\n        tool.setAttrs({ fill: 'red' })\n      }\n    }\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 40 },\n  target: { x: 380, y: 40 },\n  vertices: [\n    { x: 40, y: 80 },\n    { x: 200, y: 80 },\n    { x: 200, y: 40 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  tools: {\n    name: 'vertices',\n    args: {\n      attrs: { fill: '#666' },\n    },\n  },\n})\n\nconst edge2 = graph.addEdge({\n  source: { x: 40, y: 160 },\n  target: { x: 380, y: 160 },\n  vertices: [\n    { x: 40, y: 200 },\n    { x: 200, y: 200 },\n    { x: 200, y: 160 },\n  ],\n  connector: 'smooth',\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n})\n\ngraph.on('edge:mouseenter', ({ cell }) => {\n  if (cell === edge2) {\n    cell.addTools('vertices', 'onhover')\n  }\n})\n\ngraph.on('edge:mouseleave', ({ cell }) => {\n  if (cell.hasTools('onhover')) {\n    cell.removeTools()\n  }\n})\n",title:{zh:"调整顶点",en:"Vertices"},filename:"vertices.ts",isNew:!1},{id:"segments",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*WGufTb4Dt2gAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 40 },\n  target: { x: 380, y: 40 },\n  vertices: [\n    { x: 40, y: 80 },\n    { x: 200, y: 80 },\n    { x: 200, y: 40 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  tools: {\n    name: 'segments',\n    args: {\n      snapRadius: 20,\n      attrs: {\n        fill: '#444',\n      },\n    },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 160 },\n  target: { x: 380, y: 160 },\n  vertices: [\n    { x: 40, y: 200 },\n    { x: 200, y: 200 },\n    { x: 200, y: 160 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  connector: 'smooth',\n  tools: {\n    name: 'segments',\n    args: {\n      snapRadius: 20,\n      attrs: {\n        fill: '#444',\n      },\n    },\n  },\n})\n",title:{zh:"调整线段",en:"Segments"},filename:"segments.ts",isNew:!1},{id:"button",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*hbuoSbtyV6YAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 40 },\n  target: { x: 380, y: 40 },\n  vertices: [\n    { x: 40, y: 80 },\n    { x: 200, y: 80 },\n    { x: 200, y: 40 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  tools: [\n    {\n      name: 'button',\n      args: {\n        markup: [\n          {\n            tagName: 'circle',\n            selector: 'button',\n            attrs: {\n              r: 18,\n              stroke: '#fe854f',\n              strokeWidth: 2,\n              fill: 'white',\n              cursor: 'pointer',\n            },\n          },\n          {\n            tagName: 'text',\n            textContent: 'Btn B',\n            selector: 'icon',\n            attrs: {\n              fill: '#fe854f',\n              fontSize: 10,\n              textAnchor: 'middle',\n              pointerEvents: 'none',\n              y: '0.3em',\n            },\n          },\n        ],\n        distance: -40,\n        onClick({ view }: any) {\n          const edge = view.cell\n          const source = edge.getSource()\n          const target = edge.getTarget()\n          edge.setSource(target)\n          edge.setTarget(source)\n        },\n      },\n    },\n  ],\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 160 },\n  target: { x: 380, y: 160 },\n  vertices: [\n    { x: 40, y: 200 },\n    { x: 200, y: 200 },\n    { x: 200, y: 160 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  connector: 'smooth',\n  tools: {\n    name: 'button',\n    args: {\n      markup: [\n        {\n          tagName: 'circle',\n          selector: 'button',\n          attrs: {\n            r: 18,\n            stroke: '#fe854f',\n            strokeWidth: 2,\n            fill: 'white',\n            cursor: 'pointer',\n          },\n        },\n        {\n          tagName: 'text',\n          textContent: 'Btn A',\n          selector: 'icon',\n          attrs: {\n            fill: '#fe854f',\n            fontSize: 10,\n            textAnchor: 'middle',\n            pointerEvents: 'none',\n            y: '0.3em',\n          },\n        },\n      ],\n      distance: -100,\n      offset: { x: 0, y: 0 },\n      onClick({ view }: any) {\n        const edge = view.cell\n        edge.attr({\n          line: {\n            strokeDasharray: '5, 10',\n            strokeDashoffset: (edge.attr('line/strokeDashoffset') | 0) + 20,\n          },\n        })\n      },\n    },\n  },\n})\n",title:{zh:"自定义按钮",en:"Button"},filename:"button.ts",isNew:!1},{id:"button-remove",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*RG-YRr_drL0AAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 40 },\n  target: { x: 380, y: 40 },\n  vertices: [\n    { x: 40, y: 80 },\n    { x: 200, y: 80 },\n    { x: 200, y: 40 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  tools: {\n    name: 'button-remove',\n    args: { distance: -40 },\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 160 },\n  target: { x: 380, y: 160 },\n  vertices: [\n    { x: 40, y: 200 },\n    { x: 200, y: 200 },\n    { x: 200, y: 160 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  connector: 'smooth',\n  tools: {\n    name: 'button-remove',\n    args: { distance: -40 },\n  },\n})\n",title:{zh:"删除按钮",en:"Remove Button"},filename:"button-remove.ts",isNew:!1},{id:"arrowheads",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*C3LbRodorDwAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Shape } from '@antv/x6'\n\nShape.Rect.config({\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      in: {\n        position: { name: 'top' },\n      },\n      out: {\n        position: { name: 'bottom' },\n      },\n    },\n  },\n  portMarkup: [\n    {\n      tagName: 'circle',\n      selector: 'portBody',\n      attrs: {\n        r: 5,\n        magnet: true,\n        stroke: '#31d0c6',\n        fill: '#fff',\n        strokeWidth: 2,\n      },\n    },\n  ],\n})\n\nconst magnetAvailabilityHighlighter = {\n  name: 'stroke',\n  args: {\n    padding: 3,\n    attrs: {\n      strokeWidth: 3,\n      stroke: '#52c41a',\n    },\n  },\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  highlighting: {\n    magnetAvailable: magnetAvailabilityHighlighter,\n  },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    allowNode: false,\n    highlight: true,\n    validateMagnet({ magnet }) {\n      return magnet.getAttribute('port-group') !== 'in'\n    },\n\n    validateConnection({ sourceMagnet, targetMagnet }) {\n      // 只能从输出连接桩创建连接\n      if (!sourceMagnet || sourceMagnet.getAttribute('port-group') === 'in') {\n        return false\n      }\n\n      // 只能连接到输入连接桩\n      if (!targetMagnet || targetMagnet.getAttribute('port-group') !== 'in') {\n        return false\n      }\n\n      return true\n    },\n  },\n})\n\nconst source = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 40,\n  ports: [\n    { id: 'in-1', group: 'in' },\n    { id: 'in-2', group: 'in' },\n    { id: 'out-1', group: 'out' },\n    { id: 'out-2', group: 'out' },\n  ],\n})\n\nconst target = graph.addNode({\n  x: 140,\n  y: 240,\n  width: 100,\n  height: 40,\n  ports: [\n    { id: 'in-1', group: 'in' },\n    { id: 'in-2', group: 'in' },\n    { id: 'out-1', group: 'out' },\n    { id: 'out-2', group: 'out' },\n  ],\n})\n\ngraph.addNode({\n  x: 320,\n  y: 120,\n  width: 100,\n  height: 40,\n  ports: [\n    { id: 'in-1', group: 'in' },\n    { id: 'in-2', group: 'in' },\n    { id: 'out-1', group: 'out' },\n    { id: 'out-2', group: 'out' },\n  ],\n})\n\ngraph.addEdge({\n  source: { cell: source.id, port: 'out-2' },\n  target: { cell: target.id, port: 'in-1' },\n})\n\ngraph.on('edge:mouseenter', ({ cell }) => {\n  cell.addTools([\n    {\n      name: 'source-arrowhead',\n    },\n    {\n      name: 'target-arrowhead',\n      args: {\n        attrs: {\n          fill: 'red',\n        },\n      },\n    },\n  ])\n})\n\ngraph.on('edge:mouseleave', ({ cell }) => {\n  cell.removeTools()\n})\n",title:{zh:"调整箭头",en:"Arrowheads"},filename:"arrowheads.ts",isNew:!1},{id:"boundary",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*dKabQoQ0lIMAAAAAAAAAAAAAARQnAQ",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 40 },\n  target: { x: 380, y: 40 },\n  vertices: [\n    { x: 40, y: 80 },\n    { x: 200, y: 80 },\n    { x: 200, y: 40 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  tools: {\n    name: 'boundary',\n  },\n})\n\ngraph.addEdge({\n  source: { x: 40, y: 160 },\n  target: { x: 380, y: 160 },\n  vertices: [\n    { x: 40, y: 200 },\n    { x: 200, y: 200 },\n    { x: 200, y: 160 },\n  ],\n  attrs: {\n    line: {\n      stroke: '#3c4260',\n      strokeWidth: 2,\n      targetMarker: 'classic',\n    },\n  },\n  connector: 'smooth',\n  tools: {\n    name: 'boundary',\n    args: {\n      padding: 5,\n      attrs: {\n        fill: '#7c68fc',\n        stroke: '#333',\n        strokeWidth: 0.5,\n        fillOpacity: 0.2,\n      },\n    },\n  },\n})\n",title:{zh:"包围框",en:"Boundary"},filename:"boundary.ts",isNew:!1},{id:"context-menu",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ibBDR7HH5wIAAAAAQlAAAAgAemJ7AQ/original",source:"import { Edge, Graph, Shape } from '@antv/x6'\nimport { Dropdown } from 'antd'\nimport type { MenuProps } from 'antd'\nimport React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport type { Root } from 'react-dom/client'\n\n// 如果项目中使用的是 antd@4，使用方式参考：https://codesandbox.io/s/contextmenu-z8gpq3\n\n// 2.x的使用可以参考2.x文档： https://x6-v2.antv.vision/examples/edge/tool/#context-menu\n\n\nShape.Rect.config({\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      in: { position: { name: 'top' } },\n      out: { position: { name: 'bottom' } },\n    },\n  },\n  portMarkup: [\n    {\n      tagName: 'circle',\n      selector: 'portBody',\n      attrs: {\n        r: 5,\n        magnet: true,\n        stroke: '#31d0c6',\n        fill: '#fff',\n        strokeWidth: 2,\n      },\n    },\n  ],\n})\n\nconst magnetAvailabilityHighlighter = {\n  name: 'stroke',\n  args: {\n    padding: 3,\n    attrs: {\n      strokeWidth: 3,\n      stroke: '#52c41a',\n    },\n  },\n}\n\n// 工具函数：检查点击是否在 dropdown 内\nconst isClickInDropdown = (target: HTMLElement): boolean => {\n  const checkElement = (el: HTMLElement | null): boolean => {\n    if (!el || el === document.body) return false\n\n    const className = el.className?.toString() || ''\n\n    if (\n      className.includes('ant-dropdown') ||\n      className.includes('ant-dropdown-menu')\n    ) {\n      return true\n    }\n\n    return checkElement(el.parentElement)\n  }\n\n  return checkElement(target)\n}\n\n// 右键菜单组件\ninterface ContextMenuProps {\n  x: number\n  y: number\n  cell: Edge\n  onClose: () => void\n}\n\nconst ContextMenu: React.FC<ContextMenuProps> = ({ x, y, cell, onClose }) => {\n  const [visible, setVisible] = useState(true)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  // 关闭菜单\n  const handleClose = useCallback(() => {\n    setVisible(false)\n    // 异步调用 onClose，避免同步 unmount\n    Promise.resolve().then(onClose)\n  }, [onClose])\n\n  // 处理菜单项点击\n  const handleMenuClick: MenuProps['onClick'] = useCallback(({ key }) => {\n    const actions: Record<string, () => void> = {\n      'color-blue': () => cell.setAttrs({ line: { stroke: '#1890ff' } }),\n      'color-green': () => cell.setAttrs({ line: { stroke: '#52c41a' } }),\n      'color-red': () => cell.setAttrs({ line: { stroke: '#ff4d4f' } }),\n      'style-solid': () => cell.setAttrs({ line: { strokeDasharray: '' } }),\n      'style-dashed': () => cell.setAttrs({ line: { strokeDasharray: '5 5' } }),\n      'delete': () => cell.remove(),\n    }\n\n    actions[key]?.()\n    handleClose()\n  }, [cell, handleClose])\n\n  // 监听外部点击\n  useEffect(() => {\n    if (!visible) return\n\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as HTMLElement\n      const isInContainer = containerRef.current?.contains(target)\n      const isInDropdown = isClickInDropdown(target)\n\n      if (!isInContainer && !isInDropdown) {\n        handleClose()\n      }\n    }\n\n    // 延迟添加监听器，避免立即触发\n    const timer = setTimeout(() => {\n      document.addEventListener('mousedown', handleClickOutside, true)\n    }, 200)\n\n    return () => {\n      clearTimeout(timer)\n      document.removeEventListener('mousedown', handleClickOutside, true)\n    }\n  }, [visible, handleClose])\n\n  // 菜单配置\n  const menuItems: MenuProps['items'] = [\n    {\n      key: 'changeColor',\n      label: '修改颜色',\n      children: [\n        { key: 'color-blue', label: '蓝色' },\n        { key: 'color-green', label: '绿色' },\n        { key: 'color-red', label: '红色' },\n      ],\n    },\n    {\n      key: 'changeStyle',\n      label: '修改样式',\n      children: [\n        { key: 'style-solid', label: '实线' },\n        { key: 'style-dashed', label: '虚线' },\n      ],\n    },\n    { type: 'divider' },\n    { key: 'delete', label: '删除', danger: true },\n  ]\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        position: 'fixed',\n        left: x,\n        top: y,\n        zIndex: 9999,\n      }}\n    >\n      <Dropdown\n        open={visible}\n        onOpenChange={(open) => !open && handleClose()}\n        menu={{ items: menuItems, onClick: handleMenuClick }}\n        trigger={[]}\n        getPopupContainer={() => document.body}\n      >\n        <span style={{ display: 'inline-block', width: 0, height: 0 }} />\n      </Dropdown>\n    </div>\n  )\n}\n\n// Graph 配置\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  grid: true,\n  highlighting: {\n    magnetAvailable: magnetAvailabilityHighlighter,\n  },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    allowNode: false,\n    highlight: true,\n    validateMagnet({ magnet }) {\n      return magnet.getAttribute('port-group') !== 'in'\n    },\n    validateConnection({ sourceMagnet, targetMagnet }) {\n      if (!sourceMagnet || sourceMagnet.getAttribute('port-group') === 'in') {\n        return false\n      }\n      if (!targetMagnet || targetMagnet.getAttribute('port-group') !== 'in') {\n        return false\n      }\n      return true\n    },\n  },\n})\n\n// 添加节点和边\nconst source = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 40,\n  ports: [{ id: 'out-2', group: 'out' }],\n})\n\nconst target = graph.addNode({\n  x: 140,\n  y: 240,\n  width: 100,\n  height: 40,\n  ports: [{ id: 'in-1', group: 'in' }],\n})\n\ngraph.addEdge({\n  source: { cell: source.id, port: 'out-2' },\n  target: { cell: target.id, port: 'in-1' },\n})\n\n// 菜单管理器\nclass MenuManager {\n  private root: Root | null = null\n  private container: HTMLDivElement | null = null\n  private isCleaningUp = false\n\n  cleanup = () => {\n    if (this.isCleaningUp) return\n    this.isCleaningUp = true\n\n    requestAnimationFrame(() => {\n      try {\n        this.root?.unmount()\n        this.container?.parentNode?.removeChild(this.container)\n      } catch (error) {\n        console.error('Error cleaning up menu:', error)\n      } finally {\n        this.root = null\n        this.container = null\n        this.isCleaningUp = false\n      }\n    })\n  }\n\n  show = (x: number, y: number, cell: Edge) => {\n    this.cleanup()\n\n    requestAnimationFrame(() => {\n      this.container = document.createElement('div')\n      document.body.appendChild(this.container)\n\n      this.root = createRoot(this.container)\n      this.root.render(\n        <ContextMenu x={x} y={y} cell={cell} onClose={this.cleanup} />\n      )\n    })\n  }\n}\n\nconst menuManager = new MenuManager()\n\n// 监听边的右键菜单事件\ngraph.on('edge:contextmenu', ({ cell, e }: { cell: Edge; e: MouseEvent }) => {\n  e.preventDefault()\n  e.stopPropagation()\n  menuManager.show(e.clientX, e.clientY, cell)\n})\n",title:{zh:"右键菜单",en:"ContextMenu"},filename:"context-menu.tsx",isNew:!1},{id:"tooltip",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*49_8SIK4OGcAAAAAQ4AAAAgAemJ7AQ/original",source:"import { Edge, Graph, Shape } from '@antv/x6'\nimport React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport type { Root } from 'react-dom/client'\nimport { Tooltip } from 'antd'\n\n// 2.x的使用可以参考2.x文档： https://x6-v2.antv.vision/examples/edge/tool/#tooltip\n\nShape.Rect.config({\n  attrs: {\n    body: {\n      fill: '#f5f5f5',\n      stroke: '#d9d9d9',\n      strokeWidth: 1,\n    },\n  },\n  ports: {\n    groups: {\n      in: {\n        position: { name: 'top' },\n      },\n      out: {\n        position: { name: 'bottom' },\n      },\n    },\n  },\n  portMarkup: [\n    {\n      tagName: 'circle',\n      selector: 'portBody',\n      attrs: {\n        r: 5,\n        magnet: true,\n        stroke: '#31d0c6',\n        fill: '#fff',\n        strokeWidth: 2,\n      },\n    },\n  ],\n})\n\nconst magnetAvailabilityHighlighter = {\n  name: 'stroke',\n  args: {\n    padding: 3,\n    attrs: {\n      strokeWidth: 3,\n      stroke: '#52c41a',\n    },\n  },\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  highlighting: {\n    magnetAvailable: magnetAvailabilityHighlighter,\n  },\n  connecting: {\n    snap: true,\n    allowBlank: false,\n    allowLoop: false,\n    allowNode: false,\n    highlight: true,\n    validateMagnet({ magnet }) {\n      return magnet.getAttribute('port-group') !== 'in'\n    },\n\n    validateConnection({ sourceMagnet, targetMagnet }) {\n      // 只能从输出连接桩创建连接\n      if (!sourceMagnet || sourceMagnet.getAttribute('port-group') === 'in') {\n        return false\n      }\n\n      // 只能连接到输入连接桩\n      if (!targetMagnet || targetMagnet.getAttribute('port-group') !== 'in') {\n        return false\n      }\n\n      return true\n    },\n  },\n})\n\nconst source = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 40,\n  ports: [{ id: 'out-2', group: 'out' }],\n})\n\nconst target = graph.addNode({\n  x: 140,\n  y: 240,\n  width: 100,\n  height: 40,\n  ports: [{ id: 'in-1', group: 'in' }],\n})\n\ngraph.addEdge({\n  source: { cell: source.id, port: 'out-2' },\n  target: { cell: target.id, port: 'in-1' },\n})\n\nlet tooltipRoot: Root | null = null\nlet tooltipContainer: HTMLDivElement | null = null\nlet currentEdgeId: string | null = null\n\n// 显示 Tooltip\nfunction showTooltip(cell: Edge, x: number, y: number) {\n  // 如果是同一条边，只更新位置\n  if (currentEdgeId === cell.id && tooltipContainer) {\n    tooltipContainer.style.left = `${x + 6}px`\n    tooltipContainer.style.top = `${y - 6}px`\n    return\n  }\n\n  // 隐藏之前的 tooltip\n  hideTooltip()\n\n  currentEdgeId = cell.id\n\n  // 创建 tooltip 容器\n  tooltipContainer = document.createElement('div')\n  tooltipContainer.style.cssText = `\n    position: fixed;\n    left: ${x + 6}px;\n    top: ${y - 6}px;\n    z-index: 9999;\n    pointer-events: none;\n  `\n  document.body.appendChild(tooltipContainer)\n\n  // 获取边的信息\n  const sourceNode = graph.getCellById(cell.getSourceCellId())\n  const targetNode = graph.getCellById(cell.getTargetCellId())\n\n  // Tooltip 内容\n  const tooltipContent = (\n    <div>\n      <div>\n        <strong>边信息</strong>\n      </div>\n      <div>ID: {cell.id}</div>\n      <div>源节点: {sourceNode?.id || 'Unknown'}</div>\n      <div>目标节点: {targetNode?.id || 'Unknown'}</div>\n    </div>\n  )\n\n  // 渲染 Tooltip\n  tooltipRoot = createRoot(tooltipContainer)\n  tooltipRoot.render(\n    React.createElement(\n      Tooltip,\n      {\n        open: true,\n        title: tooltipContent,\n        placement: 'right',\n      },\n      React.createElement('span', {\n        style: { display: 'inline-block', width: 0, height: 0 },\n      }),\n    ),\n  )\n}\n\n// 隐藏 Tooltip\nfunction hideTooltip() {\n  if (tooltipRoot) {\n    tooltipRoot.unmount()\n    tooltipRoot = null\n  }\n  if (tooltipContainer && tooltipContainer.parentNode) {\n    tooltipContainer.parentNode.removeChild(tooltipContainer)\n    tooltipContainer = null\n  }\n  currentEdgeId = null\n}\n\n// 监听边的 hover 事件\ngraph.on('edge:mouseenter', ({ cell, e }: { cell: Edge; e: MouseEvent }) => {\n  showTooltip(cell, e.clientX, e.clientY)\n})\n\ngraph.on('edge:mouseleave', () => {\n  hideTooltip()\n})\n",title:{zh:"Tooltip",en:"Tooltip"},filename:"tooltip.tsx",isNew:!1}],icon:"",id:"tool",title:{en:"Edge Tools",zh:"辅助工具"},api:null,childrenKey:"demos",order:100}],childrenKey:"examples"},{id:"animation",title:{zh:"动画",en:"Animation"},icon:"scatter",examples:[{demos:[{id:"basic",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*J6XRTpLhFl8AAAAASXAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#9254de',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      { 'position/x': 50 },\n      { duration: 1000, direction: 'alternate', iterations: Infinity },\n    ],\n  ],\n})\n\ngraph.addNode({\n  x: 200,\n  y: 40,\n  width: 100,\n  height: 60,\n  attrs: {\n    body: {\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/body/fill': ['#9254de', '#06b6d4'] },\n      { duration: 3000, direction: 'alternate', iterations: Infinity },\n    ],\n  ],\n})\n\ngraph.addNode({\n  x: 360,\n  y: 40,\n  width: 60,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#85C054',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        'size/width': 120,\n      },\n      {\n        duration: 1000,\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.addNode({\n  x: 40,\n  y: 160,\n  width: 60,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#06b6d4',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        angle: 360,\n      },\n      {\n        duration: 1000,\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.addNode({\n  x: 200,\n  y: 160,\n  width: 100,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#DB655C',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/body/opacity': [0.5, 1],\n      },\n      {\n        duration: 1000,\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.addNode({\n  x: 360,\n  y: 160,\n  width: 100,\n  height: 60,\n  label: '文本',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/text/fontSize': [10, 16],\n      },\n      {\n        duration: 1000,\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n",title:{zh:"基本使用",en:"Basic usage"},filename:"basic.ts",isNew:!1},{id:"composition",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*u_VpTYHNf0EAAAAAUbAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 50,\n  y: 40,\n  width: 80,\n  height: 80,\n  path: 'M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z',\n  attrs: {\n    body: {\n      fill: '#D75A4A',\n      stroke: 'none',\n    },\n  },\n  animation: [\n    [\n      {\n        // 可以同时配置多种动画效果\n        'size/width': 85,\n        'size/height': 85,\n        'attrs/body/opacity': [1, 0.9],\n      },\n      { duration: 900, iterations: Infinity },\n    ],\n  ],\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 210,\n  y: 40,\n  width: 80,\n  height: 80,\n  path: 'M26.285,2.486l5.407,10.956c0.376,0.762,1.103,1.29,1.944,1.412l12.091,1.757c2.118,0.308,2.963,2.91,1.431,4.403l-8.749,8.528c-0.608,0.593-0.886,1.448-0.742,2.285l2.065,12.042c0.362,2.109-1.852,3.717-3.746,2.722l-10.814-5.685c-0.752-0.395-1.651-0.395-2.403,0l-10.814,5.685c-1.894,0.996-4.108-0.613-3.746-2.722l2.065-12.042c0.144-0.837-0.134-1.692-0.742-2.285l-8.749-8.528c-1.532-1.494-0.687-4.096,1.431-4.403l12.091-1.757c0.841-0.122,1.568-0.65,1.944-1.412l5.407-10.956C22.602,0.567,25.338,0.567,26.285,2.486z',\n  attrs: {\n    body: {\n      fill: '#ED8A19',\n      stroke: 'none',\n    },\n  },\n  animation: [\n    [\n      { angle: [0, 360] },\n      {\n        duration: 3000,\n        iterations: Infinity,\n      },\n    ],\n    // 可以配置多个动画效果，以及分别进行动画配置\n    [\n      {\n        'attrs/body/fill': '#D94F00',\n      },\n      {\n        duration: 2000,\n        iterations: Infinity,\n        direction: 'alternate',\n      },\n    ],\n  ],\n})\n\ngraph.addNode({\n  shape: 'path',\n  x: 370,\n  y: 40,\n  width: 80,\n  height: 80,\n  path: 'M52.104,0.249c-0.216-0.189-0.501-0.275-0.789-0.241l-31,4.011c-0.499,0.065-0.872,0.489-0.872,0.992v6.017v4.212v26.035C17.706,39.285,14.997,38,11.944,38c-5.247,0-9.5,3.781-9.5,8.444s4.253,8.444,9.5,8.444s9.5-3.781,9.5-8.444c0-0.332-0.027-0.658-0.069-0.981c0.04-0.108,0.069-0.221,0.069-0.343V16.118l29-3.753v18.909C48.706,29.285,45.997,28,42.944,28c-5.247,0-9.5,3.781-9.5,8.444s4.253,8.444,9.5,8.444s9.5-3.781,9.5-8.444c0-0.092-0.012-0.181-0.015-0.272c0.002-0.027,0.015-0.05,0.015-0.077V11.227V7.016V1C52.444,0.712,52.32,0.438,52.104,0.249z',\n  attrs: {\n    body: {\n      fill: '#eb2f96',\n      stroke: 'none',\n    },\n  },\n  animation: [\n    [\n      {\n        // 可以同时配置多种关键帧\n        'position/x': [370, 390, 350],\n        'position/y': [40, 50, 60],\n        angle: [0, 40, 0, 30],\n      },\n      { duration: 2000, direction: 'alternate', iterations: Infinity },\n    ],\n  ],\n})\n",title:{zh:"组合动画",en:"Composition animation"},filename:"composition.ts",isNew:!1},{id:"control",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*O9zKSLzKtEEAAAAAWpAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst cancelNode = graph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 60,\n  label: '点击取消动画',\n  attrs: {\n    body: {\n      fill: '#9254de',\n      stroke: 'none',\n      rx: 10,\n    },\n    text: {\n      fill: '#fff',\n    },\n  },\n  animation: [\n    [\n      { 'position/x': 50 },\n      { duration: 1000, direction: 'alternate', iterations: Infinity },\n    ],\n  ],\n})\n\nconst rateNode = graph.addNode({\n  x: 200,\n  y: 40,\n  width: 100,\n  height: 60,\n  label: '点击2倍速动画',\n  attrs: {\n    body: {\n      fill: '#DB655C',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/body/opacity': [1, 0.7],\n      },\n      {\n        duration: 1000,\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\nconst pauseNode = graph.addNode({\n  x: 360,\n  y: 40,\n  width: 100,\n  height: 60,\n  label: '点击暂停动画',\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: 'none',\n      rx: 10,\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/text/fontSize': [10, 16],\n      },\n      {\n        duration: 1000,\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.on('node:click', ({ cell }) => {\n  if (cell === cancelNode) {\n    const [ani] = cell.getAnimations()\n    ani.cancel()\n  }\n\n  if (cell === rateNode) {\n    const [ani] = cell.getAnimations()\n    ani.updatePlaybackRate(2)\n  }\n\n  if (cell === pauseNode) {\n    const label = cell.getPropByPath('attrs/text/text')\n    const [ani] = cell.getAnimations()\n    if (label === '点击暂停动画') {\n      ani.pause()\n      cell.setPropByPath('attrs/text/text', '点击继续动画')\n    } else {\n      ani.play()\n      cell.setPropByPath('attrs/text/text', '点击暂停动画')\n    }\n  }\n})\n",title:{zh:"控制动画播放",en:"Control animation playback"},filename:"control.ts",isNew:!1},{id:"edge",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*zG9YRpFTXUYAAAAAS1AAAAgAemJ7AQ/original",source:"import { Graph, Shape } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\ngraph.addEdge({\n  source: { x: 60, y: 60 },\n  target: { x: 240, y: 60 },\n  attrs: {\n    line: {\n      strokeDasharray: 5,\n      strokeDashoffset: 0,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/line/strokeDashoffset': -20 },\n      {\n        duration: 1000,\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.addEdge({\n  source: { x: 60, y: 120 },\n  target: { x: 240, y: 120 },\n  vertices: [{ x: 160, y: 140 }],\n  connector: { name: 'smooth' },\n  markup: [\n    {\n      tagName: 'circle',\n      selector: 'marker',\n      attrs: {\n        stroke: 'none',\n        r: 5,\n      },\n    },\n    ...Shape.Edge.getMarkup(),\n  ],\n  attrs: {\n    line: {\n      strokeDasharray: 5,\n      strokeDashoffset: 0,\n      stroke: '#9DADCE',\n    },\n    marker: {\n      fill: '#C7D5F6',\n      atConnectionRatio: 0,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/marker/atConnectionRatio': 1 },\n      {\n        duration: 2000,\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n\ngraph.addEdge({\n  source: { x: 60, y: 180 },\n  target: { x: 240, y: 180 },\n  vertices: [{ x: 160, y: 200 }],\n  connector: { name: 'smooth' },\n  attrs: {\n    line: {\n      stroke: '#7d8fff',\n      strokeWidth: 2,\n      opacity: 0.6,\n      style: {\n        filter: 'drop-shadow(0 0 2px #7d8fff)',\n      },\n    },\n  },\n  animation: [\n    [\n      { 'attrs/line/strokeWidth': 4 },\n      {\n        duration: 2500,\n        iterations: Infinity,\n        direction: 'alternate',\n        easing: 'ease-in-out-back',\n      },\n    ],\n    [\n      'attrs/line/opacity',\n      1,\n      {\n        duration: 2500,\n        iterations: Infinity,\n        direction: 'alternate',\n        easing: 'ease-in-out-quad',\n      },\n    ],\n  ],\n})\n\ngraph.addEdge({\n  source: { x: 60, y: 240 },\n  target: { x: 240, y: 240 },\n  vertices: [{ x: 160, y: 260 }],\n  connector: { name: 'smooth' },\n  markup: [\n    {\n      tagName: 'path',\n      selector: 'line',\n    },\n  ],\n  attrs: {\n    line: {\n      connection: true,\n      strokeWidth: 8,\n      strokeLinecap: 'round',\n      targetMarker: null,\n      strokeDasharray: '10,20',\n      fill: 'none',\n      stroke: {\n        type: 'linearGradient',\n        stops: [\n          { offset: '0%', color: '#4874EE', opacity: 1 },\n          { offset: '50%', color: '#f0f', opacity: 0.8 },\n          { offset: '100%', color: '#DB655C' },\n        ],\n      },\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/line/opacity': [0.7, 1],\n      },\n      {\n        duration: 1000,\n        fill: 'forwards',\n        direction: 'alternate',\n        iterations: Infinity,\n      },\n    ],\n    [\n      {\n        'attrs/line/strokeDashoffset': [30, 0],\n      },\n      {\n        duration: 500,\n        iterations: Infinity,\n      },\n    ],\n  ],\n})\n",title:{zh:"边动画",en:"Edge animation"},filename:"edge.ts",isNew:!1},{id:"custom-attr",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*26HdQbWVgU8AAAAAQeAAAAgAemJ7AQ/original",source:"import { Dom, Graph, Shape } from '@antv/x6'\n\nShape.HTML.register({\n  shape: 'custom-html',\n  width: 160,\n  height: 80,\n  effect: ['data'],\n  html(cell) {\n    // 自定义的html节点接收一个面积数据来控制div大小，可以对该自定义属性添加动画效果\n    const { ratio } = cell.getData() ?? {}\n    const div = document.createElement('div')\n    const area = 12000\n    const width = Math.sqrt(area / ratio)\n    const height = width * ratio\n    Dom.css(div, {\n      width,\n      height,\n      background: '#72C240',\n      borderRadius: 10,\n    })\n\n    return div\n  },\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  shape: 'custom-html',\n  x: 80,\n  y: 80,\n  data: { ratio: 1 },\n  animation: [\n    // 对自定义节点的面积数据添加动画效果\n    [{ 'data/ratio': 3 / 5 }, { duration: 1000, iterations: Infinity }],\n  ],\n})\n",title:{zh:"自定义属性动画",en:"Custom attribute animation"},filename:"custom-attr.ts",isNew:!1},{id:"breathing-circle",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*l4JaR7UbjfcAAAAATDAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst palette = ['#3875f6', '#efb041', '#ec5b56', '#72c240']\nconst radius = 30\n\npalette.forEach((color, index) => {\n  graph.addNode({\n    shape: 'circle',\n    width: radius * 2,\n    height: radius * 2,\n    x: index % 2 === 0 ? 0 : 300,\n    y: index < 2 ? 0 : 260,\n    markup: [\n      {\n        tagName: 'circle',\n        selector: 'wrapper',\n      },\n      {\n        tagName: 'circle',\n        selector: 'body',\n      },\n    ],\n    attrs: {\n      body: {\n        fill: color,\n        strokeWidth: 0,\n      },\n      wrapper: {\n        r: radius,\n        cx: radius,\n        cy: radius,\n        fill: color,\n        opacity: 0.4,\n        strokeWidth: 0,\n      },\n    },\n    animation: [\n      [\n        {\n          'attrs/wrapper/r': radius + 10,\n        },\n        {\n          duration: 1000,\n          direction: 'alternate',\n          iterations: Infinity,\n        },\n      ],\n    ],\n  })\n})\n\ngraph.centerContent()\n",title:{zh:"呼吸效果",en:"Breathing effect"},filename:"breathing-circle.ts",isNew:!1},{id:"ripple-circle",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*yp1ZTbMeLG8AAAAAUeAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\nconst palette = ['#3875f6', '#efb041', '#ec5b56', '#72c240']\nconst r = 30\nconst length = 5\nconst opacity = 0.4\n\npalette.forEach((color, index) => {\n  graph.addNode({\n    shape: 'circle',\n    width: r * 2,\n    height: r * 2,\n    x: index % 2 === 0 ? 0 : 300,\n    y: index < 2 ? 0 : 260,\n    markup: [\n      ...Array.from({ length }).map((_, markupIndex) => {\n        return {\n          tagName: 'circle',\n          selector: `ripple${markupIndex}`,\n          groupSelector: 'rippleGroup',\n        }\n      }),\n      {\n        tagName: 'circle',\n        selector: 'body',\n      },\n    ],\n    attrs: {\n      body: {\n        fill: color,\n        strokeWidth: 0,\n      },\n      rippleGroup: {\n        cx: r,\n        cy: r,\n        fill: color,\n        strokeWidth: 0,\n      },\n    },\n    animation: Array.from({ length }).map((_, aniIndex) => [\n      {\n        [`attrs/ripple${aniIndex}/r`]: [r, r + length * 5],\n        [`attrs/ripple${aniIndex}/opacity`]: [opacity, 0],\n      },\n      {\n        duration: 1000 * length,\n        iterations: Infinity,\n        delay: 1000 * aniIndex,\n      },\n    ]),\n  })\n})\n\ngraph.centerContent()\n",title:{zh:"涟漪效果",en:"ripple effect"},filename:"ripple-circle.ts",isNew:!1},{id:"css",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Zn_ESYvKC6AAAAAAREAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\nimport insertCss from 'insert-css'\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n})\n\ngraph.addNode({\n  x: 40,\n  y: 40,\n  width: 100,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#efdbff',\n      stroke: 'none',\n      rx: 10,\n      style: {\n        // 也可以使用CSS动画，具体如何选择可参考文档中的详细说明\n        animation: 'trans 1s infinite linear',\n      },\n    },\n  },\n})\n\ngraph.addNode({\n  x: 200,\n  y: 40,\n  width: 100,\n  height: 60,\n  attrs: {\n    body: {\n      fill: '#85C054',\n      stroke: 'none',\n      rx: 10,\n      // 也可以通过添加class来添加动画\n      class: 'css-animation-node',\n    },\n  },\n})\n\n// 我们用 insert-css 协助demo演示\n// 实际项目中只要将下面样式添加到样式文件中\ninsertCss(`\n  @keyframes trans {\n    to {\n        transform: translateX(50px);\n    }\n  }\n\n  .css-animation-node {\n    animation: trans 1s infinite linear;\n  }\n`)\n",title:{zh:"CSS动画",en:"CSS animation"},filename:"css.ts",isNew:!1}],icon:"",id:"usage",title:{en:"Usage",zh:"动画使用"},api:null,childrenKey:"demos",order:1},{demos:[{id:"oscp",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*aEhDTY8sa0kAAAAAUhAAAAgAemJ7AQ/original",source:"import { Graph, Shape } from '@antv/x6'\n\nGraph.registerNode(\n  'custom-node',\n  {\n    width: 150,\n    height: 60,\n    attrs: {\n      body: {\n        stroke: '#000',\n        strokeWidth: 2,\n        fill: '#fff',\n        refWidth: 1,\n        refHeight: 1,\n        rx: 10,\n      },\n      image: {\n        width: 16,\n        height: 16,\n        ref: 'body',\n      },\n      icon: {\n        ref: 'body',\n        fill: '#fff',\n      },\n      icon2: {\n        ref: 'body',\n        fill: '#fff',\n      },\n      title: {\n        text: 'Node',\n        refX: 45,\n        refY: 14,\n        fill: '#fff',\n        fontSize: 14,\n        'text-anchor': 'start',\n        fontWeight: 'bold',\n      },\n      text: {\n        refX: 45,\n        refY: 38,\n        fontSize: 12,\n        fill: '#fff',\n        'text-anchor': 'start',\n      },\n    },\n    markup: [\n      {\n        tagName: 'rect',\n        selector: 'body',\n      },\n      {\n        tagName: 'image',\n        selector: 'image',\n      },\n      {\n        tagName: 'text',\n        selector: 'title',\n      },\n      {\n        tagName: 'text',\n        selector: 'text',\n      },\n      {\n        tagName: 'path',\n        selector: 'icon',\n      },\n      {\n        tagName: 'path',\n        selector: 'icon2',\n      },\n    ],\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: true,\n  connecting: {\n    snap: true,\n    connector: { name: 'smooth' },\n  },\n  background: {\n    color: '#fff',\n  },\n})\n\nconst mainNode = graph.addNode({\n  shape: 'custom-node',\n  x: 300,\n  y: 100,\n  width: 300,\n  height: 150,\n  attrs: {\n    body: {\n      fill: '#FBEAD4',\n      stroke: '#D7CEA9',\n      strokeWidth: 2,\n      rx: 20,\n    },\n    image: {\n      'xlink:href':\n        'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*A-lcQbVTpjwAAAAAAAAAAAAADmJ7AQ/original',\n      width: 100,\n      height: 100,\n      refX: 0.5,\n      refX2: -50,\n      y: 0,\n    },\n    title: {\n      text: 'OSCP',\n      fontSize: 20,\n      refX: 0.5,\n      refX2: -25,\n      y: 90,\n      fontWeight: 800,\n      fill: 'rgba(0,0,0,0.85)',\n    },\n    text: {\n      text: '',\n    },\n  },\n})\n\nconst issueNode = graph.addNode({\n  shape: 'custom-node',\n  x: 800,\n  y: 140,\n  attrs: {\n    body: {\n      fill: '#4CAF50',\n      stroke: '',\n    },\n    title: {\n      text: '主线任务',\n    },\n    text: {\n      text: 'issue修复',\n    },\n    icon: {\n      d: 'M20 40 L20 30 L15 30 L20 25 L20 15 L30 15 L30 25 L35 30 L30 30 L30 40 ZM22 30 L28 30 M25 22 L25 28',\n      refY: 0,\n      refX: 0,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/icon/refY': -5 },\n      {\n        duration: 800,\n        iterations: Infinity,\n        direction: 'alternate',\n      },\n    ],\n  ],\n})\n\nconst docNode = graph.addNode({\n  shape: 'custom-node',\n  x: 650,\n  y: 260,\n  attrs: {\n    body: {\n      fill: '#4994EC',\n      stroke: '',\n    },\n    title: {\n      text: '支线任务',\n    },\n    text: {\n      text: '文档捉\"虫\"',\n    },\n    icon: {\n      d: 'M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',\n      refX: 10,\n      refY: 10,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/icon/refY': 15 },\n      {\n        duration: 600,\n        iterations: Infinity,\n        direction: 'alternate',\n      },\n    ],\n    [\n      { 'attrs/icon/refX': 20 },\n      {\n        duration: 700,\n        iterations: Infinity,\n        direction: 'alternate',\n      },\n    ],\n  ],\n})\n\nconst prNode = graph.addNode({\n  shape: 'custom-node',\n  x: 800,\n  y: 400,\n  attrs: {\n    body: {\n      fill: '#FF9800',\n      stroke: '',\n    },\n    title: {\n      text: '提交PR',\n    },\n    text: {\n      text: '一对一指导',\n    },\n    icon: {\n      d: 'M20 35 L25 30 L30 35 M25 30 L25 40',\n      strokeWidth: 2,\n      refY: -5,\n    },\n    icon2: {\n      d: 'M15 25 L35 25 L35 15 L15 15 Z',\n      opacity: 0.6,\n    },\n  },\n  animation: [\n    [\n      { 'attrs/icon/refY': 0 },\n      {\n        duration: 600,\n        iterations: Infinity,\n        direction: 'alternate',\n      },\n    ],\n  ],\n})\n\nconst rewardNode = graph.addNode({\n  shape: 'custom-node',\n  x: 350,\n  y: 400,\n  attrs: {\n    body: {\n      fill: '#9C27B0',\n      stroke: '',\n      filter: {\n        name: 'highlight',\n        args: {\n          color: '#9C27B0',\n          blur: 1,\n          width: 8,\n          opacity: 0.1,\n        },\n      },\n    },\n    title: {\n      text: '获得奖励',\n    },\n    text: {\n      text: '各种精美奖品',\n    },\n    icon: {\n      d: 'M20 35 L15 35 L15 25 L25 25 L25 35 L20 35 ZM18 25 L18 20 C18 18 19 16 20 16 C21 16 22 18 22 20 L22 25',\n      strokeWidth: 2,\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  },\n  animation: [\n    [\n      {\n        'attrs/body/opacity': [1, 0.85],\n      },\n      { duration: 1000, iterations: Infinity, direction: 'alternate' },\n    ],\n  ],\n})\n\nconst chatNode = graph.addNode({\n  shape: 'custom-node',\n  x: 0,\n  y: 240,\n  attrs: {\n    body: {\n      fill: '#00BCD4',\n      stroke: '',\n    },\n    title: {\n      text: '加入交流群',\n    },\n    text: {\n      text: '获取第一手资讯',\n    },\n    icon: {\n      refX: 10,\n      refY: 10,\n      d: 'M20 2H4C2.9 2 2 2.9 2 4V16C2 17.1 2.9 18 4 18H12L16 22V18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z',\n      strokeWidth: 2,\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  },\n})\n\nconst edges = [\n  {\n    source: mainNode,\n    target: issueNode,\n  },\n  {\n    source: mainNode,\n    target: docNode,\n    attrs: {\n      line: {\n        stroke: '#C7D5F6',\n        strokeWidth: 2,\n        strokeDasharray: 5,\n        strokeDashoffset: 0,\n      },\n    },\n  },\n  {\n    source: mainNode,\n    target: chatNode,\n    markup: [\n      {\n        tagName: 'circle',\n        selector: 'marker',\n        attrs: {\n          stroke: 'none',\n          r: 5,\n        },\n      },\n      ...Shape.Edge.getMarkup(),\n    ],\n    attrs: {\n      line: {\n        stroke: '#A3B1BF',\n        strokeWidth: 2,\n        strokeDasharray: 5,\n        strokeDashoffset: 0,\n      },\n      marker: {\n        fill: '#C7D5F6',\n        atConnectionRatio: 0,\n      },\n    },\n    animation: [\n      [\n        { 'attrs/marker/atConnectionRatio': 1 },\n        {\n          duration: 2000,\n          iterations: Infinity,\n        },\n      ],\n    ],\n  },\n  {\n    source: issueNode,\n    target: prNode,\n  },\n  {\n    source: docNode,\n    target: prNode,\n    attrs: {\n      line: {\n        stroke: '#C7D5F6',\n        strokeWidth: 2,\n        strokeDasharray: 5,\n        strokeDashoffset: 0,\n      },\n    },\n  },\n  {\n    source: prNode,\n    target: rewardNode,\n  },\n]\n\ngraph.addEdges(\n  edges.map((edge) => {\n    return {\n      connector: { name: 'smooth' },\n      attrs: {\n        line: {\n          stroke: '#A3B1BF',\n          strokeWidth: 2,\n          strokeDasharray: 5,\n          strokeDashoffset: 0,\n        },\n      },\n      animation: [\n        [\n          { 'attrs/line/strokeDashoffset': -20 },\n          {\n            duration: 600,\n            iterations: Infinity,\n          },\n        ],\n      ],\n      ...edge,\n    }\n  }),\n)\n\ngraph.centerContent()\ngraph.zoomToFit()\n",title:{zh:"OSCP 活动",en:"OSCP activity"},filename:"oscp.ts",isNew:!1},{id:"scattering",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8xH6R4SrE7AAAAAAXiAAAAgAemJ7AQ/original",source:"import { Graph } from '@antv/x6'\n\nconst circleRadius = 20\nconst rippleCounts = 5\nconst centerPoint = { x: 400, y: 400 }\n\nfunction getPoint(\n  start: { x: number; y: number },\n  angleDeg: number,\n  dist: number,\n) {\n  const rad = (angleDeg * Math.PI) / 180\n  return {\n    x: start.x + dist * Math.cos(rad),\n    y: start.y + dist * Math.sin(rad),\n  }\n}\n\nconst rippleMarkups = Array.from({ length: rippleCounts }).map((_, index) => ({\n  tagName: 'circle',\n  selector: `ripple${index}`,\n  groupSelector: 'rippleGroup',\n  attrs: {\n    cx: circleRadius,\n    cy: circleRadius,\n  },\n}))\n\nconst rippleAnimations = Array.from({ length: rippleCounts }).map(\n  (_, index) => [\n    {\n      [`attrs/ripple${index}/r`]: [0, 350],\n      [`attrs/ripple${index}/strokeOpacity`]: [0.5, 0],\n    },\n    {\n      duration: 2000,\n      fill: 'forwards',\n      delay: index * 150,\n      iterations: Infinity,\n      easing: 'ease-out-sine',\n    },\n  ],\n) as AnimateParams[]\n\nGraph.registerNode(\n  'custom-circle',\n  {\n    inherit: 'circle',\n    width: circleRadius * 2,\n    height: circleRadius * 2,\n    markup: [\n      ...rippleMarkups,\n      {\n        selector: 'center',\n        tagName: 'circle',\n      },\n      {\n        selector: 'body',\n        tagName: 'circle',\n      },\n    ],\n    attrs: {\n      body: {\n        fill: '#fff',\n        stroke: 'none',\n        magnet: true,\n      },\n      center: {\n        fill: '#DEE9EB',\n        stroke: 'none',\n        r: circleRadius,\n        cx: circleRadius,\n        cy: circleRadius,\n        filter: {\n          name: 'dropShadow',\n          args: {\n            dx: 0,\n            dy: 0,\n            blur: 10,\n            color: '#fff',\n          },\n        },\n      },\n      rippleGroup: {\n        fill: 'transparent',\n        strokeWidth: 4,\n        stroke: '#0ff',\n      },\n    },\n    animation: [\n      ...rippleAnimations,\n      [\n        {\n          'attrs/center/r': [circleRadius, circleRadius * 1.2],\n        },\n        {\n          duration: 1000,\n          fill: 'forwards',\n          iterations: Infinity,\n          direction: 'alternate',\n        },\n      ],\n    ],\n  },\n  true,\n)\n\nGraph.registerEdge(\n  'custom-edge',\n  {\n    inherit: 'edge',\n    markup: [\n      {\n        tagName: 'path',\n        selector: 'line',\n      },\n      {\n        tagName: 'path',\n        selector: 'fill',\n      },\n    ],\n    attrs: {\n      line: {\n        connection: true,\n        strokeWidth: 8,\n        strokeLinecap: 'round',\n        opacity: 0.7,\n        targetMarker: null,\n        strokeDasharray: '10,20',\n        stroke: {\n          type: 'linearGradient',\n          stops: [\n            { offset: '0%', color: '#0ff', opacity: 1 },\n            { offset: '50%', color: '#f0f', opacity: 0.8 },\n            { offset: '100%', color: '#ff0' },\n          ],\n        },\n      },\n    },\n    animation: [\n      [\n        {\n          'attrs/line/opacity': [0.7, 1],\n        },\n        {\n          duration: 1000,\n          fill: 'forwards',\n          direction: 'alternate',\n          iterations: Infinity,\n        },\n      ],\n      [\n        {\n          'attrs/line/strokeDashoffset': [30, 0],\n        },\n        {\n          duration: 500,\n          iterations: Infinity,\n        },\n      ],\n    ],\n  },\n  true,\n)\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  connecting: {\n    connectionPoint: {\n      name: 'anchor',\n      args: {\n        offset: 20,\n      },\n    },\n  },\n  background: {\n    color: '#000',\n  },\n})\ngraph.addNode({\n  id: 'main',\n  shape: 'custom-circle',\n  ...centerPoint,\n})\n\nconst edgeDistances = [300, 250, 280, 240, 230, 260, 210, 240, 270, 220]\n\nedgeDistances.forEach((d, index) => {\n  const p = getPoint(centerPoint, (360 / 10) * index, d)\n\n  graph.addNode({\n    id: `node${index}`,\n    shape: 'circle',\n    x: p.x,\n    y: p.y,\n  })\n\n  graph.addEdge({\n    source: 'main',\n    target: `node${index}`,\n    shape: 'custom-edge',\n    zIndex: -1,\n  })\n})\n\ngraph.centerContent()\n",title:{zh:"炫酷散射动画",en:"Cool scatter Animation"},filename:"scattering.ts",isNew:!1},{id:"route-planning",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*n7PQSYXZ180AAAAATuAAAAgAemJ7AQ/original",source:"import { Graph, Shape } from '@antv/x6'\nimport insertCss from 'insert-css'\n\nGraph.registerConnector(\n  'loop-curve',\n  (start, end) => {\n    const sx = start.x\n    const sy = start.y\n    const ex = end.x\n    const ey = end.y\n\n    const mx = (sx + ex) / 2\n    const my = (sy + ey) / 2\n    const dir = sy < ey ? 1 : -1\n    const offset = 30\n\n    const path = [\n      `M ${sx} ${sy}`,\n      `C ${sx + 0} ${sy - 0 * dir}, ${mx - 50} ${my + 15 * dir}, ${mx - 20} ${my}`,\n      `C ${mx + 0} ${my - 6 * dir}, ${mx} ${my - offset * dir}, ${mx - 20} ${my - offset * dir + 10 * dir}`,\n      `C ${mx - 25} ${my - offset * dir + 15 * dir}, ${mx - 30} ${my - 10 * dir}, ${mx} ${my}`,\n      `C ${mx + 60} ${my + 20 * dir}, ${ex - 0} ${ey + 0 * dir}, ${ex} ${ey}`,\n    ].join(' ')\n\n    return path\n  },\n  true,\n)\n\nGraph.registerEdge(\n  'plane-edge',\n  {\n    markup: [\n      {\n        tagName: 'svg',\n        selector: 'plane',\n        attrs: {\n          viewBox: '0 0 1024 1024',\n          width: 32,\n          height: 32,\n          y: -16,\n          opacity: 0,\n        },\n        children: [\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M488.5 391.1l-90.5-69.9a9.6 9.6 0 0 1 5.9-17.1h94.3a9.6 9.6 0 0 1 5.9 2l110.2 85.1H488.5z',\n              fill: '#fff',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M488.7 294.4H374.6a19.2 19.2 0 0 0-15.2 7.5c-6.5 8.4-4.9 20.4 3.5 26.9l93 71.9h176.9l-114.4-85a19.2 19.2 0 0 0-11.7-4z m-26.2 87.1L374.6 313.6h114.1l87.8 67.9H462.4z',\n              fill: '#30699A',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M143.5 344.4l-26.9 10a28.8 28.8 0 0 0-18.8 27v78.5a57.6 57.6 0 0 0 22.6 45.7l150.3 115.2a57.6 57.6 0 0 0 35 11.9h557c31.8 0 57.6-25.8 57.6-57.6a57.6 57.6 0 0 0-21.6-45l-163.4-130.6l-.5-.4a57.6 57.6 0 0 0-35.4-12.2l-480.6 0-47-38a28.8 28.8 0 0 0-28.1-4.6z m6.7 18a9.6 9.6 0 0 1 9.1 1.3l.3.2l52.3 42.2h487.4a38.4 38.4 0 0 1 23.5 8l.4.4l163.4 130.6a38.4 38.4 0 0 1 14.4 30c0 21-16.8 38.1-37.8 38.4l-.6 0H305.7a38.4 38.4 0 0 1-22.9-7.6l-.5-.3L132.1 460.5a38.4 38.4 0 0 1-14.6-29.7v-79a9.6 9.6 0 0 1 6-8.9l.3-.1l26.9-10z',\n              fill: '#30699A',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M150.2 362.4a9.6 9.6 0 0 1 9.4 1.5l52.3 42.2h487.4a38.4 38.4 0 0 1 24 8.4l163.4 130.6a38.4 38.4 0 0 1 14.4 30c0 21.2-17.2 38.4-38.4 38.4H309L151.7 489.7a38.4 38.4 0 0 1-14.6-29.6v-.5v-87.2c0-2.1.7-4.1 1.9-5.8z',\n              fill: '#3982D1',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M560.6 584.6L426.5 702.1c-4.5 4-4.7 10.6-.4 14.7 2.1 2.1 5.1 3.2 8.2 3.2h68.4c2.9 0 5.7-1 7.9-2.9h10l141.4-132.6',\n              fill: '#fff',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M528 577.4L394.7 694.8c-8.7 7.7-9 20.8-.7 28.9 3.8 3.7 9 5.8 14.4 5.9h107.7c5.1 0 10-1.8 13.8-5l.4-.3l150.5-132.6l-12.7-14.4-150.5 132.6c-.3.3-.8.4-1.3.5h-107.7c-.6 0-1.2-.2-1.5-.5-.2-.2-.3-.3 0-.5l.1-.1l133.4-117.5l-12.7-14.4z',\n              fill: '#30699A',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M805.4 492.7v19.2H700.2v-19.2z',\n              fill: '#fff',\n            },\n          },\n          {\n            tagName: 'path',\n            attrs: {\n              d: 'M431.5 497.5a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm56.8 0a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm57.4 0a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm57.4 0a8 8 0 1 1 0 16 8 8 0 0 1 0-16z',\n              fill: '#FFF',\n            },\n          },\n        ],\n      },\n      // @ts-expect-error\n      ...Shape.Edge.getMarkup(),\n    ],\n    attrs: {\n      line: {\n        strokeDasharray: 4,\n        stroke: '#B8A58A',\n      },\n      plane: {\n        atConnectionRatio: 0,\n      },\n    },\n  },\n  true,\n)\n\nShape.HTML.register({\n  shape: 'destination-node',\n  width: 160,\n  height: 80,\n  effect: ['data'],\n  html(cell) {\n    const {\n      img,\n      tag,\n      tagPosition = 'top-left',\n      des,\n      star,\n    } = cell.getData() ?? {}\n    const div = document.createElement('div')\n    div.className = 'routePlanning'\n\n    div.innerHTML = `\n      <div class=\"destination-node\">\n        <div class=\"node-image-wrapper\">\n          <div class=\"node-image-shadow\"></div>\n          <img class=\"node-image\" src='${img}' />\n        </div>\n        <div class=\"node-label-wrapper\">\n          <div class=\"node-label\">${des}</div>\n          <div class=\"node-label-shadow\"></div>\n          <div class=\"node-label-tag node-label-tag-${tagPosition}\">${tag}</div>\n          <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" xmlns=\"http://www.w3.org/2000/svg\" class=\"node-label-star\" style=\"display: ${star ? 'block' : 'none'}\" transform=\"rotate(0 0 0)\">\n            <polygon\n              points=\"15,5 18.54,13.62 27,14.46 21,21.8 22.38,30 15,25.2 7.62,30 9,21.8 3,14.46 11.46,13.62\"\n              fill=\"gold\"\n              stroke=\"orange\"\n              stroke-width=\"1\"\n            />\n          </svg>\n        </div>\n      </div>\n    `\n    return div\n  },\n})\n\nlet currentPlaneIdx = 0\n\nconst graph = new Graph({\n  container: document.getElementById('container'),\n  grid: {\n    visible: true,\n    type: 'doubleMesh',\n    size: 25,\n    args: {\n      color: '#EEAD8A',\n    },\n  },\n  background: {\n    color: '#FAEFB3',\n  },\n})\n\nconst stops = [\n  {\n    img: 'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*8HpYRKt7uzwAAAAAVmAAAAgAemJ7AQ/fmt.webp',\n    y: 225,\n    des: '法国 - 巴黎铁塔',\n  },\n  {\n    img: 'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ZFxTS428nZkAAAAAaLAAAAgAemJ7AQ/fmt.webp',\n    y: 150,\n    des: '美国 - 自由女神像',\n    tagPosition: 'bottom-left',\n  },\n  {\n    img: 'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*tfejTKFkjUUAAAAAW0AAAAgAemJ7AQ/fmt.webp',\n    y: 225,\n    des: '罗马 - 古罗马斗兽场',\n    tagPosition: 'top-right',\n  },\n  {\n    img: 'https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*OM9JTbpmU-cAAAAAZbAAAAgAemJ7AQ/fmt.webp',\n    y: 175,\n    des: '英国 - 伦敦塔桥',\n    star: true,\n  },\n]\n\nstops.forEach((stop, index) => {\n  graph.addNode({\n    id: `stop${index + 1}`,\n    shape: 'destination-node',\n    x: 160 + index * 310,\n    y: stop.y,\n    data: { ...stop, tag: `${index + 1} stop` },\n  })\n\n  if (index + 1 === stops.length) return\n\n  graph.addEdge({\n    source: { cell: `stop${index + 1}` },\n    target: { cell: `stop${index + 2}` },\n    connector: { name: 'loop-curve' },\n    shape: 'plane-edge',\n    animation: [\n      [\n        { 'attrs/line/strokeDashoffset': [0, -16] },\n        {\n          duration: 1000,\n          iterations: Infinity,\n        },\n      ],\n    ],\n  })\n})\n\nconst fly = () => {\n  const edges = graph.getEdges()\n  const edge = edges[currentPlaneIdx]\n  edge.setAttrByPath('plane/opacity', 1)\n  const flyAni = edge.getAnimations().find((item) => item.id === 'fly')\n  if (flyAni) {\n    flyAni.play()\n    return\n  }\n\n  const ani = edge.animate(\n    { 'attrs/plane/atConnectionRatio': 1 },\n    { duration: 2000, id: 'fly' },\n  )\n\n  ani.onfinish = () => {\n    edge.setAttrByPath('plane/opacity', 0)\n    currentPlaneIdx =\n      currentPlaneIdx + 1 === edges.length ? 0 : currentPlaneIdx + 1\n    fly()\n  }\n}\n\nfly()\n\ngraph.centerContent()\ngraph.zoomToFit()\n\ninsertCss(`\n  .destination-node {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-family:\n      \"Hiragino Maru Gothic Pro\",\n      /* 圆体最可爱，优先日文/繁体环境 */\n      \"PingFang SC\",\n      /* 苹方，简体中文首选，清新现代 */\n      \"Hiragino Sans GB\",\n      /* 冬青黑体简体，柔和清晰 */\n      \"Helvetica Neue\",\n      \"Arial\",\n      sans-serif;\n  }\n\n  .node-image-wrapper {\n    position: relative;\n    width: 110px;\n    height: 110px;\n    background: #fff;\n    border-radius: 50%;\n  }\n\n  .node-image {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n\n  }\n\n  .node-image-shadow {\n    position: absolute;\n    top: 0;\n    left: 4px;\n    width: 100%;\n    height: 100%;\n    background: #EBB27D;\n    z-index: -1;\n    border-radius: 50%;\n  }\n\n\n  .node-label-wrapper {\n    margin-top: 20px;\n    background-color: #FEFCF2;\n    min-height: 120px;\n    border-radius: 4px;\n    width: 150px;\n    position: relative;\n    color: #838181;\n    box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);\n    transition: box-shadow 0.3s ease;\n  }\n\n  .node-label-wrapper:hover {\n    box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.3);\n  }\n\n  .node-label-shadow {\n    position: absolute;\n    top: 0;\n    left: 3px;\n    width: 100%;\n    height: 100%;\n    background: #F7D0AE;\n    z-index: -1;\n    border-radius: 4px;\n    transform: rotate(-2deg);\n  }\n\n  .node-label {\n    padding: 8px;\n    z-index: 2;\n  }\n\n  .node-label-tag {\n    background: #EEAD8A;\n    color: #fff;\n    border-radius: 4px;\n    position: absolute;\n    line-height: 22px;\n    width: 60px;\n    text-align: center;\n    font-size: 12px;\n    font-weight: 800;\n  }\n\n  @keyframes shake {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(20deg);\n    }\n  }\n\n  .node-label-star {\n    position: absolute;\n    right: 8px;\n    bottom: 8px;\n    animation: shake 0.5s ease infinite;\n    animation-direction: alternate;\n  }\n\n\n  .node-label-tag-top-left {\n    left: 0;\n    top: 0;\n    transform: translateX(-50%) translateY(-50%) rotate(-20deg);\n  }\n\n  .node-label-tag-bottom-left {\n    left: 0;\n    bottom: 0;\n    transform: translateX(-50%) translateY(50%) rotate(20deg);\n  }\n\n\n  .node-label-tag-top-right {\n    right: 0;\n    top: 0;\n    transform: translateX(50%) translateY(-50%) rotate(20deg);\n  }\n\n\n\n  .node-label-tag-bottom-right {\n    right: 0;\n    bottom: 0;\n    transform: translateX(50%) translateY(50%) rotate(-20deg);\n  }\n`)\n",title:{zh:"路线规划图",en:"Route planning graph"},filename:"route-planning.ts",isNew:!1}],icon:"",id:"case",title:{en:"Case",zh:"动画案例"},api:null,childrenKey:"demos",order:2}],childrenKey:"examples"},{id:"layout",title:{zh:"布局",en:"Layout"},icon:"tree",examples:[{demos:[{id:"grid",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*14yLQY9-FQ0AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Model } from '@antv/x6'\nimport { GridLayout } from '@antv/layout'\n\nconst data: Model.FromJSONData = {\n  nodes: [],\n  edges: [],\n}\nconst keyPoints = [\n  20, 12, 12, 4, 18, 12, 12, 6, 16, 17, 17, 10, 10, 3, 3, 2, 2, 9, 9, 10,\n]\n\nfor (let i = 1; i <= 21; i++) {\n  data.nodes!.push({\n    id: `${i}`,\n    shape: 'circle',\n    width: 32,\n    height: 32,\n    attrs: {\n      body: {\n        fill: '#5F95FF',\n        stroke: 'transparent',\n      },\n      label: {\n        fill: '#ffffff',\n      },\n    },\n    label: i,\n  })\n}\n\nfor (let i = 0; i < keyPoints.length; i += 2) {\n  data.edges!.push({\n    source: `${keyPoints[i]}`,\n    target: `${keyPoints[i + 1]}`,\n    attrs: {\n      line: {\n        stroke: '#A2B1C3',\n        strokeWidth: 2,\n        targetMarker: null,\n      },\n    },\n  })\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\nconst gridLayout = new GridLayout({\n  type: 'grid',\n  width: 738,\n  height: 360,\n  sortBy: 'label',\n  rows: 3,\n  cols: 7,\n})\n\nconst model = gridLayout.layout(data)\ngraph.fromJSON(model)\n",title:{zh:"网格布局",en:"Grid"},filename:"grid.ts",isNew:!1},{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*8IF1SYl7wrwAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Model } from '@antv/x6'\nimport { CircularLayout } from '@antv/layout'\n\nconst data: Model.FromJSONData = {\n  nodes: [],\n}\n\nfor (let i = 1; i <= 16; i++) {\n  data.nodes!.push({\n    id: `${i}`,\n    shape: 'circle',\n    width: 30,\n    height: 30,\n    label: `${i}`,\n    attrs: {\n      body: {\n        stroke: 'transparent',\n        fill: '#5F95FF',\n      },\n      label: {\n        fill: '#fff',\n      },\n    },\n  })\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\nconst circularLayout = new CircularLayout({\n  type: 'circular',\n  center: [350, 250],\n})\nconst model = circularLayout.layout(data)\n\ngraph.fromJSON(model)\n",title:{zh:"环形布局",en:"Circular"},filename:"circle.ts",isNew:!1},{id:"dagre",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*D-QDTo_YzQgAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Model } from '@antv/x6'\nimport { DagreLayout } from '@antv/layout'\n\nconst data: Model.FromJSONData = {\n  nodes: [],\n  edges: [],\n}\nconst edges = [\n  ['1', '2'],\n  ['2', '3'],\n  ['2', '4'],\n  ['4', '5'],\n  ['4', '6'],\n  ['4', '7'],\n  ['4', '8'],\n  ['5', '9'],\n  ['6', '10'],\n  ['7', '11'],\n  ['8', '12'],\n]\n\nfor (let i = 1; i <= 12; i++) {\n  data.nodes!.push({\n    id: `${i}`,\n    shape: 'circle',\n    width: 32,\n    height: 32,\n    label: i,\n    attrs: {\n      body: {\n        fill: '#5F95FF',\n        stroke: 'transparent',\n      },\n      label: {\n        fill: '#ffffff',\n      },\n    },\n  })\n}\n\nedges.forEach((edge: [string, string]) => {\n  data.edges!.push({\n    source: edge[0],\n    target: edge[1],\n    attrs: {\n      line: {\n        stroke: '#A2B1C3',\n        strokeWidth: 2,\n      },\n    },\n  })\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\nconst dagreLayout = new DagreLayout({\n  type: 'dagre',\n  rankdir: 'LR',\n  align: 'UR',\n  ranksep: 35,\n  nodesep: 15,\n})\nconst model = dagreLayout.layout(data)\n\ngraph.fromJSON(model)\n",title:{zh:"Dagre",en:"Dagre"},filename:"dagre.ts",isNew:!1},{id:"ellipse",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*Er8NQ7Qsap8AAAAAAAAAAAAAARQnAQ",source:"import { Graph, Node, Point } from '@antv/x6'\n\nconst nodes: Node.Metadata[] = []\n\nfor (let i = 1; i <= 20; i++) {\n  nodes!.push({\n    id: `${i}`,\n    shape: 'path',\n    width: 26,\n    height: 26,\n    attrs: {\n      body: {\n        d: 'M0,-9.898961565145173L2.222455340918111,-3.0589473502942863L9.41447190108659,-3.058947350294287L3.596008280084239,1.1684139180159865L5.818463621002351,8.008428132866873L4.440892098500626e-16,3.7810668645565997L-5.8184636210023495,8.008428132866873L-3.5960082800842383,1.1684139180159867L-9.41447190108659,-3.058947350294285L-2.2224553409181116,-3.058947350294286Z',\n        fill: '#EFF4FF',\n        stroke: '#5F95FF',\n      },\n    },\n  })\n}\n\nfunction layout(nodes: Node.Metadata[]) {\n  const cx = 320\n  const cy = 180\n  const rx = 200\n  const ry = 120\n  const ratio = rx / ry\n  const center = new Point(cx, cy)\n  const start = new Point(cx, cy - ry)\n  const stepAngle = 360 / nodes.length\n\n  nodes.forEach((node: Node.Metadata, index: number) => {\n    const angle = stepAngle * index\n    const p = start\n      .clone()\n      .rotate(-angle, center)\n      .scale(ratio, 1, center)\n      .round()\n    node.x = p.x\n    node.y = p.y\n  })\n\n  return nodes\n}\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\ngraph.fromJSON(layout(nodes))\n",title:{zh:"椭圆布局",en:"Ellipse"},filename:"ellipse.ts",isNew:!1},{id:"concentric-circles",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*U5uxR5kSLU8AAAAAQsAAAAgAemJ7AQ/original",source:"import { Graph, Model } from '@antv/x6'\n\nconst data: Model.FromJSONData = {\n  nodes: [],\n  edges: [],\n}\n\n// 中心节点\nconst centerNode = {\n  id: 'center',\n  shape: 'circle',\n  width: 50,\n  height: 50,\n  label: '核心',\n  attrs: {\n    body: {\n      stroke: '#5F95FF',\n      fill: '#5F95FF',\n      strokeWidth: 2,\n    },\n    label: {\n      fill: '#fff',\n      fontSize: 13,\n      fontWeight: 'bold',\n    },\n  },\n}\ndata.nodes!.push(centerNode)\n\n// 第一层节点（内圈）\nconst innerNodes = ['A1', 'A2', 'A3', 'A4', 'A5', 'A6', 'A7', 'A8']\ninnerNodes.forEach((label, index) => {\n  data.nodes!.push({\n    id: `inner-${index}`,\n    shape: 'circle',\n    width: 40,\n    height: 40,\n    label: label,\n    attrs: {\n      body: {\n        stroke: '#5F95FF',\n        fill: '#5F95FF',\n        strokeWidth: 2,\n      },\n      label: {\n        fill: '#fff',\n        fontSize: 12,\n      },\n    },\n  })\n  // 连接到中心节点\n  data.edges!.push({\n    id: `edge-center-inner-${index}`,\n    source: 'center',\n    target: `inner-${index}`,\n    attrs: {\n      line: {\n        stroke: '#d9d9d9',\n        strokeWidth: 1,\n      },\n    },\n  })\n})\n\n// 第二层节点（外圈）\nconst outerNodes = [\n  'B1',\n  'B2',\n  'B3',\n  'B4',\n  'B5',\n  'B6',\n  'B7',\n  'B8',\n  'B9',\n  'B10',\n  'B11',\n  'B12',\n  'B13',\n  'B14',\n  'B15',\n  'B16',\n]\nouterNodes.forEach((label, index) => {\n  data.nodes!.push({\n    id: `outer-${index}`,\n    shape: 'circle',\n    width: 30,\n    height: 30,\n    label: label,\n    attrs: {\n      body: {\n        stroke: '#5F95FF',\n        fill: '#5F95FF',\n        strokeWidth: 2,\n      },\n      label: {\n        fill: '#fff',\n        fontSize: 10,\n      },\n    },\n  })\n})\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\n// 同心圆布局位置\nconst center = [300, 300]\n\n// 设置各层节点的位置\nconst nodeMap = new Map(data.nodes!.map((node) => [node.id, node]))\nconst DEG_TO_RAD = Math.PI / 180\nconst INNER_RADIUS = 110\nconst OUTER_RADIUS = 260\n\nconst positionNodesOnCircle = (\n  prefix: string,\n  count: number,\n  radius: number,\n) => {\n  for (let i = 0; i < count; i++) {\n    const node = nodeMap.get(`${prefix}-${i}`)\n    if (node) {\n      const angle = ((i * 360) / count) * DEG_TO_RAD\n      Object.assign(node, {\n        x: center[0] + radius * Math.cos(angle),\n        y: center[1] + radius * Math.sin(angle),\n      })\n    }\n  }\n}\n\n// 中心节点\nconst centerNodeData = nodeMap.get('center')\nif (centerNodeData) {\n  Object.assign(centerNodeData, {\n    x: center[0],\n    y: center[1],\n  })\n}\n\n// 内层节点\npositionNodesOnCircle('inner', innerNodes.length, INNER_RADIUS)\n\n// 外层节点\npositionNodesOnCircle('outer', outerNodes.length, OUTER_RADIUS)\n\n// 渲染图形\ngraph.fromJSON(data)\n",title:{zh:"同心圆布局",en:"Concentric Circles"},filename:"concentric-circles.ts",isNew:!1},{id:"force",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*0HvAR6qMEf8AAAAAAAAAAAAAARQnAQ",source:"import {\n  ForceLayout,\n  type Edge as LayoutEdge,\n  type OutNode as LayoutNode,\n} from '@antv/layout'\nimport { FunctionExt, Graph, type Model, type Node } from '@antv/x6'\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n})\n\nconst originData: {\n  nodes: LayoutNode[]\n  edges: LayoutEdge[]\n} = {\n  nodes: [\n    { id: 'node0', size: 50, x: 0, y: 0 },\n    { id: 'node1', size: 30, x: 0, y: 0 },\n    { id: 'node2', size: 30, x: 0, y: 0 },\n    { id: 'node3', size: 30, x: 0, y: 0 },\n    { id: 'node4', size: 30, x: 0, y: 0 },\n    { id: 'node5', size: 30, x: 0, y: 0 },\n    { id: 'node6', size: 15, x: 0, y: 0 },\n    { id: 'node7', size: 15, x: 0, y: 0 },\n    { id: 'node8', size: 15, x: 0, y: 0 },\n    { id: 'node9', size: 15, x: 0, y: 0 },\n    { id: 'node10', size: 15, x: 0, y: 0 },\n    { id: 'node11', size: 15, x: 0, y: 0 },\n    { id: 'node12', size: 15, x: 0, y: 0 },\n    { id: 'node13', size: 15, x: 0, y: 0 },\n    { id: 'node14', size: 15, x: 0, y: 0 },\n    { id: 'node15', size: 15, x: 0, y: 0 },\n    { id: 'node16', size: 15, x: 0, y: 0 },\n  ],\n  edges: [\n    { source: 'node0', target: 'node1' },\n    { source: 'node0', target: 'node2' },\n    { source: 'node0', target: 'node3' },\n    { source: 'node0', target: 'node4' },\n    { source: 'node0', target: 'node5' },\n    { source: 'node1', target: 'node6' },\n    { source: 'node1', target: 'node7' },\n    { source: 'node2', target: 'node8' },\n    { source: 'node2', target: 'node9' },\n    { source: 'node2', target: 'node10' },\n    { source: 'node2', target: 'node11' },\n    { source: 'node2', target: 'node12' },\n    { source: 'node2', target: 'node13' },\n    { source: 'node3', target: 'node14' },\n    { source: 'node3', target: 'node15' },\n    { source: 'node3', target: 'node16' },\n  ],\n}\n\nconst getModelFromOriginData = (data: typeof originData) => {\n  const model: Model.FromJSONData = {\n    nodes: [],\n    edges: [],\n  }\n  originData.nodes.forEach((item) => {\n    model.nodes?.push({\n      id: item.id,\n      shape: 'circle',\n      width: item.size as number,\n      height: item.size as number,\n      x: item.x,\n      y: item.y,\n      attrs: {\n        body: {\n          fill: '#5F95FF',\n          stroke: 'transparent',\n        },\n      },\n    })\n  })\n  originData.edges.forEach((item) => {\n    model.edges?.push({\n      source: item.source,\n      target: item.target,\n      attrs: {\n        line: {\n          stroke: '#A2B1C3',\n          strokeWidth: 2,\n          targetMarker: null,\n        },\n      },\n    })\n  })\n  return model\n}\n\n// helper function to update node positions\nfunction update() {\n  for (const n of originData.nodes) {\n    const node: Node = graph.getCellById(n.id) as Node\n    node.position(n.x, n.y)\n  }\n}\n\n// Store the current layout promise to prevent concurrent executions\nlet currentLayoutPromise: Promise<void> | null = null\n\nconst forceLayout = new ForceLayout({\n  type: 'force',\n  center: [369, 180],\n  preventOverlap: true,\n  // Adjust alpha parameters for faster convergence\n  alpha: 0.5, // 初始\"温度\"，默认 0.3，提高到 0.5 使初始运动更快\n  alphaDecay: 0.05, // 温度衰减率，默认 0.028，增加到 0.05 使其更快收敛\n  alphaMin: 0.01, // 停止阈值，默认 0.001，增加到 0.01 使其更早停止\n  linkDistance: (d) => {\n    if (d.source.id === 'node0') {\n      return 100\n    }\n    return 30\n  },\n  nodeStrength: (d) => {\n    if (d.isLeaf) {\n      return -50\n    }\n    return -10\n  },\n  edgeStrength: (d) => {\n    if (\n      d.source.id === 'node1' ||\n      d.source.id === 'node2' ||\n      d.source.id === 'node3'\n    ) {\n      return 0.7\n    }\n    return 0.1\n  },\n  tick: update,\n})\n\n// Helper function to run layout and return a promise\nfunction runLayout(): Promise<void> {\n  return new Promise((resolve) => {\n    // Set onLayoutEnd callback to resolve the promise\n    forceLayout.updateCfg({\n      onLayoutEnd: () => {\n        currentLayoutPromise = null\n        resolve()\n      },\n    } as any)\n\n    // Start the layout\n    forceLayout.layout(originData)\n  })\n}\n\n// Helper to ensure layout runs, chaining if one is already running\nasync function scheduleLayout(): Promise<void> {\n  if (currentLayoutPromise) {\n    // Wait for current layout to finish, then run a new one\n    await currentLayoutPromise\n  }\n\n  // Start new layout\n  currentLayoutPromise = runLayout()\n  return currentLayoutPromise\n}\n\n// initial render\nconst model = getModelFromOriginData(originData)\ngraph.fromJSON(model)\n\n// run initial layout\nscheduleLayout()\n\n// Debounced layout function to prevent too frequent calls during dragging\nconst debouncedScheduleLayout = FunctionExt.debounce(\n  () => scheduleLayout(),\n  16, // Wait 16ms (~1 frame at 60fps) after last movement before running layout\n)\n\n// rerun layout on node drag, keep the dragged node fixed\ngraph.on('node:moving', (e) => {\n  // Update the fixed position immediately for responsive dragging\n  for (const n of originData.nodes) {\n    if (n.id === e.cell.id) {\n      n.fx = e.x\n      n.fy = e.y\n    } else {\n      delete n.fx\n      delete n.fy\n    }\n  }\n\n  // Use debounced layout to avoid too frequent calls\n  debouncedScheduleLayout()\n})\n\n// When node drag ends, ensure layout runs one final time\ngraph.on('node:moved', () => {\n  // Cancel any pending debounced layout\n  debouncedScheduleLayout.cancel?.()\n\n  // Run final layout immediately when drag ends\n  // This ensures the final state is correctly calculated\n  scheduleLayout()\n})\n",title:{zh:"力导向布局",en:"Force"},filename:"force.ts",isNew:!1}],icon:"",id:"general",title:{en:"General Layout",zh:"一般布局"},api:null,childrenKey:"demos",order:10},{demos:[{id:"mindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*qSgRR7R6O6MAAAAAAAAAAAAAARQnAQ",source:"import { Graph, Model } from '@antv/x6'\nimport Hierarchy from '@antv/hierarchy'\n\nconst graph = new Graph({\n  container: document.getElementById('container')!,\n  connecting: {\n    connector: 'smooth',\n  },\n})\n\nfetch('/data/algorithm-category.json')\n  .then((response) => response.json())\n  .then((data) => {\n    const result = Hierarchy.mindmap(data, {\n      direction: 'H',\n      getHeight() {\n        return 16\n      },\n      getWidth() {\n        return 16\n      },\n      getHGap() {\n        return 80\n      },\n      getVGap() {\n        return 1\n      },\n      getSide: () => {\n        return 'right'\n      },\n    })\n\n    const model: Model.FromJSONData = { nodes: [], edges: [] }\n    const traverse = (data: HierarchyResult) => {\n      if (data) {\n        model.nodes?.push({\n          id: `${data.id}`,\n          x: data.x + 250,\n          y: data.y + 250,\n          shape: 'circle',\n          width: 16,\n          height: 16,\n          attrs: {\n            body: {\n              fill: '#5F95FF',\n              stroke: 'transparent',\n            },\n          },\n        })\n      }\n      if (data.children) {\n        data.children.forEach((item: HierarchyResult) => {\n          model.edges?.push({\n            source: `${data.id}`,\n            target: `${item.id}`,\n            attrs: {\n              line: {\n                stroke: '#A2B1C3',\n                strokeWidth: 1,\n                targetMarker: null,\n              },\n            },\n          })\n          traverse(item)\n        })\n      }\n    }\n    traverse(result)\n\n    graph.fromJSON(model)\n  })\n\ninterface HierarchyResult {\n  id: number\n  x: number\n  y: number\n  children: HierarchyResult[]\n}\n",title:{zh:"脑图树",en:"Mindmap"},filename:"mindmap.ts",isNew:!1}],icon:"",id:"tree",title:{en:"Tree Layout",zh:"树布局"},api:null,childrenKey:"demos",order:11}],childrenKey:"examples"}]}},children:n})}}}]);